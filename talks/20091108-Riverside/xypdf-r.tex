%% xypdf-r.tex from $Id: xypdf-r.doc,v $
%%
%% Xy-pic ``PDF Rotations and Scaling''.
%% Copyright (c) 1999-1999 Ross Moore <ross@maths.mq.edu.au>
%%
%% This file is part of the Xy-pic package for graphs and diagrams in TeX.
%% See the companion README and INSTALL files for further information.
%% Copyright (c) 1991-1999 Kristoffer H. Rose <krisrose@brics.dk>
%%
%% The Xy-pic package is free software; you can redistribute it and/or modify
%% it under the terms of the GNU General Public License as published by the
%% Free Software Foundation; either version 2 of the License, or (at your
%% option) any later version.
%%
%% The Xy-pic package is distributed in the hope that it will be useful, but
%% WITHOUT ANY WARRANTY; without even the implied warranty of MERCHANTABILITY
%% or FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License
%% for more details.
%%
%% You should have received a copy of the GNU General Public License along
%% with this package; if not, write to the Free Software Foundation, Inc.,
%% 675 Mass Ave, Cambridge, MA 02139, USA.
%%
%% As a special exception, you may use this file and all files derived
%% from it without restrictions. This special exception was added with
%% version 3.7 of Xy-pic.
%%
\expandafter\ifx\csname xypdf-rloaded\endcsname\empty
 \message{not reloaded}\endinput \fi
\expandafter\let\csname xypdf-rloaded\endcsname=\empty \xycatcodes
\expandafter\ifx\csname xypdf-sloaded\endcsname\empty\else
 \xyinputorelse@{xypdf-s}{\xyerror@{Could not load xypdf-s}{}}%
 \xycatcodes\fi
\xydef@\installPDFrotscale@{\installPDFstyle@
% \let\xyRotate@@=\xyPDFrotate@@
% \let\doSpecialRotate@@=\doPDFspecialRotate@@
 \let\xyscale@@=\xyPDFscale@@
 \xyPDFshapes@true
 \xyuncatcodes }
\xydef@\UsePDFrotate{\installPDFrotscale@}
\xydef@\NoPDFrotate{\UnloadRotate@\relax}
\xydef@\xyPDFpretransform@{\xyPDFrawA@{\preXYtransform@@}}
\xydef@\xyPDFposttransform@{\xyPDFrawZ@{\postXYtransform@@}}
\let\preXYtransform@=\xyPDFpretransform@
\let\postXYtransform@=\xyPDFposttransform@
\xydef@\xyPDFrotSplit@{%
 \expandafter\def\expandafter\preShape@@\expandafter{\xyPDFpre@}%
 \expandafter\def\expandafter\postShape@@\expandafter{\xyPDFpost@}}
\xydef@\xyPDFscale@@#1#2{%
 \xyPDFsplitPDF@{\xyscale@start(#1,#2)}{\xyscale@end}%
 \xyPDFrotSplit@\xyPDFpdfxy@ }
\xydef@\xyPDFrotate@@#1{%
 \xyPDFsplitPDF@{\xyrot@start(#1 xyd)}{\xyrot@end}%%%<<------ here
 \xyPDFrotSplit@\xyPDFpdfxy@ }
\xydef@\xyPDFspecialRotate@#1{%
 \xyPDFsplitPDF@{\xyrot@start(#1)}{\xyrot@end}\xyPDFrotSplit@\xyPDFpdfxy@ }
\xydef@\doPDFspecialRotate@@#1@@{\xyPDFspecialRotate@{#1}}
\xydef@\xyRotScale@@{%
% \def\xyrot@start(##1){{xyt ##1\space xyr}}%%%<<------ here
 \def\xyscale@start(##1,##2){ q ##1 0 0 ##2 0 0 cm}%
 \def\xyrot@end{ Q}\def\xyscale@end{ Q}}
\endinput
