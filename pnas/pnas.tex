%% PNAStmpl.tex
%% Template file to use for PNAS articles prepared in LaTeX
%% Version: Apr 14, 2008


%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%% BASIC CLASS FILE 
%% PNAStwo for two column articles is called by default.
%% Uncomment PNASone for single column articles. One column class
%% and style files are available upon request from pnas@nas.edu.
%% (uncomment means get rid of the '%' in front of the command)

%\documentclass{pnasone}
\documentclass{pnastwo}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%% Changing position of text on physical page:
%% Since not all printers position
%% the printed page in the same place on the physical page,
%% you can change the position yourself here, if you need to:

% \advance\voffset -.5in % Minus dimension will raise the printed page on the 
                         %  physical page; positive dimension will lower it.

%% You may set the dimension to the size that you need.

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%% OPTIONAL GRAPHICS STYLE FILE

%% Requires graphics style file (graphicx.sty), used for inserting
%% .eps files into LaTeX articles.
%% Note that inclusion of .eps files is for your reference only;
%% when submitting to PNAS please submit figures separately.

%% Type into the square brackets the name of the driver program 
%% that you are using. If you don't know, try dvips, which is the
%% most common PC driver, or textures for the Mac. These are the options:

% [dvips], [xdvi], [dvipdf], [dvipdfm], [dvipdfmx], [pdftex], [dvipsone],
% [dviwindo], [emtex], [dviwin], [pctexps], [pctexwin], [pctexhp], [pctex32],
% [truetex], [tcidvi], [vtex], [oztex], [textures], [xetex]

%\usepackage[dvips]{graphicx}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%% OPTIONAL POSTSCRIPT FONT FILES

%% PostScript font files: You may need to edit the PNASoneF.sty
%% or PNAStwoF.sty file to make the font names match those on your system. 
%% Alternatively, you can leave the font style file commands commented out
%% and typeset your article using the default Computer Modern 
%% fonts (recommended). If accepted, your article will be typeset
%% at PNAS using PostScript fonts.


% Choose PNASoneF for one column; PNAStwoF for two column:
%\usepackage{PNASoneF}
%\usepackage{PNAStwoF}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%% ADDITIONAL OPTIONAL STYLE FILES

%% The AMS math files are commonly used to gain access to useful features
%% like extended math fonts and math commands.

\usepackage{amssymb,amsfonts,amsmath,amsthm}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%% OPTIONAL MACRO FILES
%% Insert self-defined macros here.
%% \newcommand definitions are recommended; \def definitions are supported

%\newcommand{\mfrac}[2]{\frac{\displaystyle #1}{\displaystyle #2}}
%\def\s{\sigma}

\input{preamble}
\input{../text/kw_macros}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%% Don't type in anything in the following section:
%%%%%%%%%%%%
%% For PNAS Only:
\contributor{Submitted to Proceedings
of the National Academy of Sciences of the United States of America}
%\url{www.pnas.org/cgi/doi/10.1073/pnas.0709640104}
\copyrightyear{2008}
\issuedate{Issue Date}
\volume{Volume}
\issuenumber{Issue Number}
%%%%%%%%%%%%

\begin{document}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%


%% For titles, only capitalize the first letter
%% \title{Almost sharp fronts for the surface quasi-geostrophic equation}

\title{The blob complex}


%% Enter authors via the \author command.  
%% Use \affil to define affiliations.
%% (Leave no spaces between author name and \affil command)

%% Note that the \thanks{} command has been disabled in favor of
%% a generic, reserved space for PNAS publication footnotes.

%% \author{<author name>
%% \affil{<number>}{<Institution>}} One number for each institution.
%% The same number should be used for authors that
%% are affiliated with the same institution, after the first time
%% only the number is needed, ie, \affil{number}{text}, \affil{number}{}
%% Then, before last author ...
%% \and
%% \author{<author name>
%% \affil{<number>}{}}

%% For example, assuming Garcia and Sonnery are both affiliated with
%% Universidad de Murcia:
%% \author{Roberta Graff\affil{1}{University of Cambridge, Cambridge,
%% United Kingdom},
%% Javier de Ruiz Garcia\affil{2}{Universidad de Murcia, Bioquimica y Biologia
%% Molecular, Murcia, Spain}, \and Franklin Sonnery\affil{2}{}}

\author{Scott Morrison\affil{1}{Miller Institute for Basic Research, UC Berkeley, CA 94704, USA} \and Kevin Walker\affil{2}{Microsoft Station Q, 2243 CNSI Building, UC Santa Barbara, CA 93106, USA}}

\contributor{Submitted to Proceedings of the National Academy of Sciences
of the United States of America}

%% The \maketitle command is necessary to build the title page.
\maketitle

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\begin{article}

\begin{abstract} -- enter abstract text here -- \end{abstract}


%% When adding keywords, separate each term with a straight line: |
\keywords{term | term | term}

%% Optional for entering abbreviations, separate the abbreviation from
%% its definition with a comma, separate each pair with a semicolon:
%% for example:
%% \abbreviations{SAM, self-assembled monolayer; OTS,
%% octadecyltrichlorosilane}

% \abbreviations{}

%% The first letter of the article should be drop cap: \dropcap{}
%\dropcap{I}n this article we study the evolution of ''almost-sharp'' fronts

%% Enter the text of your article beginning here and ending before
%% \begin{acknowledgements}
%% Section head commands for your reference:
%% \section{}
%% \subsection{}
%% \subsubsection{}


\section{}

\nn{
background: TQFTs are important, historically, semisimple categories well-understood.
Many new examples arising recently which do not fit this framework, e.g. SW and OS theory.
These have more complicated gluing formulas (\cite{1003.0598,1005.1248}, etc); 
it would be nice to give generalized TQFT axioms that encompass these.
Triangulated categories are important; often calculations are via exact sequences,
and the standard TQFT constructions are quotients, which destroy exactness.
A first attempt to deal with this might be to replace all the tensor products in gluing formulas
with derived tensor products (cite Kh?).
However, in this approach it's probably difficult to prove invariance of constructions,
because they depend on explicit presentations of the manifold.
We'll give a manifestly invariant construction,
and deduce gluing formulas based on derived (actually, $A_\infty$) tensor products.}

\section{Definitions}
\subsection{$n$-categories}
\nn{
Axioms for $n$-categories, examples (maps, string diagrams)
}
\nn{
Decide if we need a friendlier, skein-module version.
}
\subsection{The blob complex}
\subsubsection{Decompositions of manifolds}

A \emph{ball decomposition} of $W$ is a 
sequence of gluings $M_0\to M_1\to\cdots\to M_m = W$ such that $M_0$ is a disjoint union of balls
$\du_a X_a$ and each $M_i$ is a manifold.
If $X_a$ is some component of $M_0$, its image in $W$ need not be a ball; $\bd X_a$ may have been glued to itself.
A {\it permissible decomposition} of $W$ is a map
\[
	\coprod_a X_a \to W,
\]
which can be completed to a ball decomposition $\du_a X_a = M_0\to\cdots\to M_m = W$.
A permissible decomposition is weaker than a ball decomposition; we forget the order in which the balls
are glued up to yield $W$, and just require that there is some non-pathological way to do this.

Given permissible decompositions $x = \{X_a\}$ and $y = \{Y_b\}$ of $W$, we say that $x$ is a refinement
of $y$, or write $x \le y$, if there is a ball decomposition $\du_a X_a = M_0\to\cdots\to M_m = W$
with $\du_b Y_b = M_i$ for some $i$.

\begin{defn}
The poset $\cell(W)$ has objects the permissible decompositions of $W$, 
and a unique morphism from $x$ to $y$ if and only if $x$ is a refinement of $y$.
See Figure \ref{partofJfig} for an example.
\end{defn}


An $n$-category $\cC$ determines 
a functor $\psi_{\cC;W}$ from $\cell(W)$ to the category of sets 
(possibly with additional structure if $k=n$).
Each $k$-ball $X$ of a decomposition $y$ of $W$ has its boundary decomposed into $k{-}1$-balls,
and there is a subset $\cC(X)\spl \sub \cC(X)$ of morphisms whose boundaries
are splittable along this decomposition.

\begin{defn}
Define the functor $\psi_{\cC;W} : \cell(W) \to \Set$ as follows.
For a decomposition $x = \bigsqcup_a X_a$ in $\cell(W)$, $\psi_{\cC;W}(x)$ is the subset
\begin{equation*}
%\label{eq:psi-C}
	\psi_{\cC;W}(x) \sub \prod_a \cC(X_a)\spl
\end{equation*}
where the restrictions to the various pieces of shared boundaries amongst the cells
$X_a$ all agree (this is a fibered product of all the labels of $n$-cells over the labels of $n-1$-cells).
If $x$ is a refinement of $y$, the map $\psi_{\cC;W}(x) \to \psi_{\cC;W}(y)$ is given by the composition maps of $\cC$.
\end{defn}


\nn{Mention that the axioms for $n$-categories can be stated in terms of decompositions of balls}
\subsubsection{Homotopy colimits}
\nn{How can we extend an $n$-category from balls to arbitrary manifolds?}

\nn{In practice, this gives the old definition}
\subsubsection{}
\section{Properties of the blob complex}
\subsection{Formal properties}
\label{sec:properties}
The blob complex enjoys the following list of formal properties.

\begin{property}[Functoriality]
\label{property:functoriality}%
The blob complex is functorial with respect to homeomorphisms.
That is, 
for a fixed $n$-category $\cC$, the association
\begin{equation*}
X \mapsto \bc_*(X; \cC)
\end{equation*}
is a functor from $n$-manifolds and homeomorphisms between them to chain 
complexes and isomorphisms between them.
\end{property}
As a consequence, there is an action of $\Homeo(X)$ on the chain complex $\bc_*(X; \cC)$; 
this action is extended to all of $C_*(\Homeo(X))$ in Theorem \ref{thm:CH} below.

\begin{property}[Disjoint union]
\label{property:disjoint-union}
The blob complex of a disjoint union is naturally isomorphic to the tensor product of the blob complexes.
\begin{equation*}
\bc_*(X_1 \du X_2) \iso \bc_*(X_1) \tensor \bc_*(X_2)
\end{equation*}
\end{property}

If an $n$-manifold $X$ contains $Y \sqcup Y^\text{op}$ (we allow $Y = \eset$) as a codimension $0$ submanifold of its boundary, 
write $X \bigcup_{Y}\selfarrow$ for the manifold obtained by gluing together $Y$ and $Y^\text{op}$.
\begin{property}[Gluing map]
\label{property:gluing-map}%
%If $X_1$ and $X_2$ are $n$-manifolds, with $Y$ a codimension $0$-submanifold of $\bdy X_1$, and $Y^{\text{op}}$ a codimension $0$-submanifold of $\bdy X_2$, there is a chain map
%\begin{equation*}
%\gl_Y: \bc_*(X_1) \tensor \bc_*(X_2) \to \bc_*(X_1 \cup_Y X_2).
%\end{equation*}
Given a gluing $X \to X_\mathrm{gl}$, there is
a map
\[
	\bc_*(X) \to \bc_*(X \bigcup_{Y}\selfarrow),
\]
natural with respect to homeomorphisms, and associative with respect to iterated gluings.
\end{property}

\begin{property}[Contractibility]
\label{property:contractibility}%
With field coefficients, the blob complex on an $n$-ball is contractible in the sense 
that it is homotopic to its $0$-th homology.
Moreover, the $0$-th homology of balls can be canonically identified with the vector spaces 
associated by the system of fields $\cF$ to balls.
\begin{equation*}
\xymatrix{\bc_*(B^n;\cF) \ar[r]^(0.4){\iso}_(0.4){\text{qi}} & H_0(\bc_*(B^n;\cF)) \ar[r]^(0.6)\iso & A_\cF(B^n)}
\end{equation*}
\end{property}

\nn{Properties \ref{property:functoriality} will be immediate from the definition given in
\S \ref{sec:blob-definition}, and we'll recall it at the appropriate point there.
Properties \ref{property:disjoint-union}, \ref{property:gluing-map} and 
\ref{property:contractibility} are established in \S \ref{sec:basic-properties}.}

\subsection{Specializations}
\label{sec:specializations}

The blob complex has two important special cases.

\begin{thm}[Skein modules]
\label{thm:skein-modules}
The $0$-th blob homology of $X$ is the usual 
(dual) TQFT Hilbert space (a.k.a.\ skein module) associated to $X$
by $\cF$.
\begin{equation*}
H_0(\bc_*(X;\cF)) \iso A_{\cF}(X)
\end{equation*}
\end{thm}

\begin{thm}[Hochschild homology when $X=S^1$]
\label{thm:hochschild}
The blob complex for a $1$-category $\cC$ on the circle is
quasi-isomorphic to the Hochschild complex.
\begin{equation*}
\xymatrix{\bc_*(S^1;\cC) \ar[r]^(0.47){\iso}_(0.47){\text{qi}} & \HC_*(\cC).}
\end{equation*}
\end{thm}

Theorem \ref{thm:skein-modules} is immediate from the definition, and
Theorem \ref{thm:hochschild} is established by extending the statement to bimodules as well as categories, then verifying that the universal properties of Hochschild homology also hold for $\bc_*(S^1; -)$.


\subsection{Structure of the blob complex}
\label{sec:structure}

In the following $\CH{X} = C_*(\Homeo(X))$ is the singular chain complex of the space of homeomorphisms of $X$, fixed on $\bdy X$.

\begin{thm}[$C_*(\Homeo(-))$ action]
\label{thm:CH}\label{thm:evaluation}
There is a chain map
\begin{equation*}
e_X: \CH{X} \tensor \bc_*(X) \to \bc_*(X).
\end{equation*}
such that
\begin{enumerate}
\item Restricted to $CH_0(X)$ this is the action of homeomorphisms described in Property \ref{property:functoriality}. 

\item For
any codimension $0$-submanifold $Y \sqcup Y^\text{op} \subset \bdy X$ the following diagram
(using the gluing maps described in Property \ref{property:gluing-map}) commutes (up to homotopy).
\begin{equation*}
\xymatrix@C+0.3cm{
     \CH{X} \otimes \bc_*(X)
        \ar[r]_{e_{X}}  \ar[d]^{\gl^{\Homeo}_Y \otimes \gl_Y}  &
            \bc_*(X) \ar[d]_{\gl_Y} \\
     \CH{X \bigcup_Y \selfarrow} \otimes \bc_*(X \bigcup_Y \selfarrow) \ar[r]_<<<<<<<{e_{(X \bigcup_Y \scalebox{0.5}{\selfarrow})}}    & \bc_*(X \bigcup_Y \selfarrow)
}
\end{equation*}
\end{enumerate}

Futher, this map is associative, in the sense that the following diagram commutes (up to homotopy).
\begin{equation*}
\xymatrix{
\CH{X} \tensor \CH{X} \tensor \bc_*(X) \ar[r]^<<<<<{\id \tensor e_X} \ar[d]^{\compose \tensor \id} & \CH{X} \tensor \bc_*(X) \ar[d]^{e_X} \\
\CH{X} \tensor \bc_*(X) \ar[r]^{e_X} & \bc_*(X)
}
\end{equation*}
\end{thm}

Since the blob complex is functorial in the manifold $X$, this is equivalent to having chain maps
$$ev_{X \to Y} : \CH{X \to Y} \tensor \bc_*(X) \to \bc_*(Y)$$
for any homeomorphic pair $X$ and $Y$, 
satisfying corresponding conditions.

\begin{thm}[Blob complexes of products with balls form an $A_\infty$ $n$-category]
\label{thm:blobs-ainfty}
Let $\cC$ be  a topological $n$-category.
Let $Y$ be an $n{-}k$-manifold. 
There is an $A_\infty$ $k$-category $\bc_*(Y;\cC)$, defined on each $m$-ball $D$, for $0 \leq m < k$, 
to be the set $$\bc_*(Y;\cC)(D) = \cC(Y \times D)$$ and on $k$-balls $D$ to be the set 
$$\bc_*(Y;\cC)(D) = \bc_*(Y \times D; \cC).$$ 
(When $m=k$ the subsets with fixed boundary conditions form a chain complex.) 
These sets have the structure of an $A_\infty$ $k$-category, with compositions coming from the gluing map in 
Property \ref{property:gluing-map} and with the action of families of homeomorphisms given in Theorem \ref{thm:evaluation}.
\end{thm}
\begin{rem}
Perhaps the most interesting case is when $Y$ is just a point; then we have a way of building an $A_\infty$ $n$-category from a topological $n$-category.
We think of this $A_\infty$ $n$-category as a free resolution.
\end{rem}
This result is described in more detail as Example 6.2.8 of \cite{1009.5025}

We next describe the blob complex for product manifolds, in terms of the $A_\infty$ blob complex of the $A_\infty$ $n$-categories constructed as above.

\begin{thm}[Product formula]
\label{thm:product}
Let $W$ be a $k$-manifold and $Y$ be an $n-k$ manifold.
Let $\cC$ be an $n$-category.
Let $\bc_*(Y;\cC)$ be the $A_\infty$ $k$-category associated to $Y$ via blob homology.
Then
\[
	\bc_*(Y\times W; \cC) \simeq \cl{\bc_*(Y;\cC)}(W).
\]
\end{thm}
The statement can be generalized to arbitrary fibre bundles, and indeed to arbitrary maps
(see \cite[\S7.1]{1009.5025}).

Fix a topological $n$-category $\cC$, which we'll omit from the notation.
Recall that for any $(n-1)$-manifold $Y$, the blob complex $\bc_*(Y)$ is naturally an $A_\infty$ category.

\begin{thm}[Gluing formula]
\label{thm:gluing}
\mbox{}% <-- gets the indenting right
\begin{itemize}
\item For any $n$-manifold $X$, with $Y$ a codimension $0$-submanifold of its boundary, the blob complex of $X$ is naturally an
$A_\infty$ module for $\bc_*(Y)$.

\item For any $n$-manifold $X_\text{gl} = X\bigcup_Y \selfarrow$, the blob complex $\bc_*(X_\text{gl})$ is the $A_\infty$ self-tensor product of
$\bc_*(X)$ as an $\bc_*(Y)$-bimodule:
\begin{equation*}
\bc_*(X_\text{gl}) \simeq \bc_*(X) \Tensor^{A_\infty}_{\mathclap{\bc_*(Y)}} \selfarrow
\end{equation*}
\end{itemize}
\end{thm}

\nn{Theorem \ref{thm:product} is proved in \S \ref{ss:product-formula}, and Theorem \ref{thm:gluing} in \S \ref{sec:gluing}.}

\section{Applications}
\label{sec:applications}
Finally, we give two applications of the above machinery.

\begin{thm}[Mapping spaces]
\label{thm:map-recon}
Let $\pi^\infty_{\le n}(T)$ denote the $A_\infty$ $n$-category based on maps 
$B^n \to T$.
(The case $n=1$ is the usual $A_\infty$-category of paths in $T$.)
Then 
$$\bc_*(X; \pi^\infty_{\le n}(T)) \simeq \CM{X}{T}.$$
\end{thm}

This says that we can recover (up to homotopy) the space of maps to $T$ via blob homology from local data. 
Note that there is no restriction on the connectivity of $T$ as there is for the corresponding result in topological chiral homology \cite[Theorem 3.8.6]{0911.0018}.


\begin{thm}[Higher dimensional Deligne conjecture]
\label{thm:deligne}
The singular chains of the $n$-dimensional surgery cylinder operad act on blob cochains.
Since the little $n{+}1$-balls operad is a suboperad of the $n$-dimensional surgery cylinder operad,
this implies that the little $n{+}1$-balls operad acts on blob cochains of the $n$-ball.
\end{thm}
\nn{Explain and sketch}

%% == end of paper:

%% Optional Materials and Methods Section
%% The Materials and Methods section header will be added automatically.

%% Enter any subheads and the Materials and Methods text below.
%\begin{materials}
% Materials text
%\end{materials}


%% Optional Appendix or Appendices
%% \appendix Appendix text...
%% or, for appendix with title, use square brackets:
%% \appendix[Appendix Title]

\begin{acknowledgments}
-- text of acknowledgments here, including grant info --
\end{acknowledgments}

%% PNAS does not support submission of supporting .tex files such as BibTeX.
%% Instead all references must be included in the article .tex document. 
%% If you currently use BibTeX, your bibliography is formed because the 
%% command \verb+\bibliography{}+ brings the <filename>.bbl file into your
%% .tex document. To conform to PNAS requirements, copy the reference listings
%% from your .bbl file and add them to the article .tex file, using the
%% bibliography environment described above.  

%%  Contact pnas@nas.edu if you need assistance with your
%%  bibliography.

% Sample bibliography item in PNAS format:
%% \bibitem{in-text reference} comma-separated author names up to 5,
%% for more than 5 authors use first author last name et al. (year published)
%% article title  {\it Journal Name} volume #: start page-end page.
%% ie,
% \bibitem{Neuhaus} Neuhaus J-M, Sitcher L, Meins F, Jr, Boller T (1991) 
% A short C-terminal sequence is necessary and sufficient for the
% targeting of chitinases to the plant vacuole. 
% {\it Proc Natl Acad Sci USA} 88:10362-10366.


%% Enter the largest bibliography number in the facing curly brackets
%% following \begin{thebibliography}

%%%% BIBTEX
\bibliographystyle{alpha}
\bibliography{../bibliography/bibliography}

%%%% non-BIBTEX
%\begin{thebibliography}{}
%
%\end{thebibliography}


\end{article}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

%% Adding Figure and Table References
%% Be sure to add figures and tables after \end{article}
%% and before \end{document}

%% For figures, put the caption below the illustration.
%%
%% \begin{figure}
%% \caption{Almost Sharp Front}\label{afoto}
%% \end{figure}


\begin{figure}
\begin{equation*}
\mathfig{.23}{ncat/zz2}
\end{equation*}
\caption{A small part of $\cell(W)$}
\label{partofJfig}
\end{figure}


%% For Tables, put caption above table
%%
%% Table caption should start with a capital letter, continue with lower case
%% and not have a period at the end
%% Using @{\vrule height ?? depth ?? width0pt} in the tabular preamble will
%% keep that much space between every line in the table.

%% \begin{table}
%% \caption{Repeat length of longer allele by age of onset class}
%% \begin{tabular}{@{\vrule height 10.5pt depth4pt  width0pt}lrcccc}
%% table text
%% \end{tabular}
%% \end{table}

%% For two column figures and tables, use the following:

%% \begin{figure*}
%% \caption{Almost Sharp Front}\label{afoto}
%% \end{figure*}

%% \begin{table*}
%% \caption{Repeat length of longer allele by age of onset class}
%% \begin{tabular}{ccc}
%% table text
%% \end{tabular}
%% \end{table*}

\end{document}

