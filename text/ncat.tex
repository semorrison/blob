%!TEX root = ../blob1.tex

\def\xxpar#1#2{\smallskip\noindent{\bf #1} {\it #2} \smallskip}
\def\mmpar#1#2#3{\smallskip\noindent{\bf #1} (#2). {\it #3} \smallskip}

\section{Definitions of $n$-categories}
\label{sec:ncats}

\subsection{Definition of $n$-categories}

Before proceeding, we need more appropriate definitions of $n$-categories, 
$A_\infty$ $n$-categories, modules for these, and tensor products of these modules.
(As is the case throughout this paper, by ``$n$-category" we implicitly intend some notion of
a `weak' $n$-category with `strong duality'.)

The definitions presented below tie the categories more closely to the topology
and avoid combinatorial questions about, for example, the minimal sufficient
collections of generalized associativity axioms; we prefer maximal sets of axioms to minimal sets.
For examples of topological origin, it is typically easy to show that they
satisfy our axioms.
For examples of a more purely algebraic origin, one would typically need the combinatorial
results that we have avoided here.

\medskip

There are many existing definitions of $n$-categories, with various intended uses. In any such definition, there are sets of $k$-morphisms for each $0 \leq k \leq n$. Generally, these sets are indexed by instances of a certain typical chape. 
Some $n$-category definitions model $k$-morphisms on the standard bihedrons (interval, bigon, and so on).
Other definitions have a separate set of 1-morphisms for each interval $[0,l] \sub \r$, 
a separate set of 2-morphisms for each rectangle $[0,l_1]\times [0,l_2] \sub \r^2$,
and so on.
(This allows for strict associativity.)
Still other definitions (see, for example, \cite{MR2094071})
model the $k$-morphisms on more complicated combinatorial polyhedra.

For our definition, we will allow our $k$-morphisms to have any shape, so long as it is homeomorphic to the standard $k$-ball:

\begin{axiom}[Morphisms]{\textup{\textbf{[preliminary]}}}
For any $k$-manifold $X$ homeomorphic 
to the standard $k$-ball, we have a set of $k$-morphisms
$\cC_k(X)$.
\end{axiom}

By ``a $k$-ball" we mean any $k$-manifold which is homeomorphic to the 
standard $k$-ball.
We {\it do not} assume that it is equipped with a 
preferred homeomorphism to the standard $k$-ball, and the same applies to ``a $k$-sphere" below.


Given a homeomorphism $f:X\to Y$ between $k$-balls (not necessarily fixed on 
the boundary), we want a corresponding
bijection of sets $f:\cC(X)\to \cC(Y)$.
(This will imply ``strong duality", among other things.)
So we replace the above with

\addtocounter{axiom}{-1}
\begin{axiom}[Morphisms]
\label{axiom:morphisms}
For each $0 \le k \le n$, we have a functor $\cC_k$ from 
the category of $k$-balls and 
homeomorphisms to the category of sets and bijections.
\end{axiom}


(Note: We usually omit the subscript $k$.)

We are so far  being deliberately vague about what flavor of $k$-balls
we are considering.
They could be unoriented or oriented or Spin or $\mbox{Pin}_\pm$.
They could be topological or PL or smooth.
%\nn{need to check whether this makes much difference}
(If smooth, ``homeomorphism" should be read ``diffeomorphism", and we would need
to be fussier about corners.)
For each flavor of manifold there is a corresponding flavor of $n$-category.
We will concentrate on the case of PL unoriented manifolds.

Next we consider domains and ranges of morphisms (or, as we prefer to say, boundaries
of morphisms).
The 0-sphere is unusual among spheres in that it is disconnected.
Correspondingly, for 1-morphisms it makes sense to distinguish between domain and range.
(Actually, this is only true in the oriented case, with 1-morphsims parameterized
by oriented 1-balls.)
For $k>1$ and in the presence of strong duality the division into domain and range makes less sense. For example, in a pivotal tensor category, there are natural isomorphisms $\Hom{}{A}{B \tensor C} \isoto \Hom{}{A \tensor B^*}{C}$, etc. (sometimes called ``Frobenius reciprocity''), which canonically identify all the morphism spaces which have the same boundary. We prefer to not make the distinction in the first place.

Instead, we combine the domain and range into a single entity which we call the 
boundary of a morphism.
Morphisms are modeled on balls, so their boundaries are modeled on spheres:

\begin{axiom}[Boundaries (spheres)]
For each $0 \le k \le n-1$, we have a functor $\cC_k$ from 
the category of $k$-spheres and 
homeomorphisms to the category of sets and bijections.
\end{axiom}

In order to conserve symbols, we use the same symbol $\cC_k$ for both morphisms and boundaries, and again often omit the subscript.

In fact, the functors for spheres are entirely determined by the functors for balls and the subsequent axioms. (In particular, $\cC(S^k)$ is the colimit of $\cC$ applied to decompositions of $S^k$ into balls.) However, it is easiest to think of it as additional data at this point.

\begin{axiom}[Boundaries (maps)]\label{nca-boundary}
For each $k$-ball $X$, we have a map of sets $\bd: \cC(X)\to \cC(\bd X)$.
These maps, for various $X$, comprise a natural transformation of functors.
\end{axiom}

(Note that the first ``$\bd$" above is part of the data for the category, 
while the second is the ordinary boundary of manifolds.)

Given $c\in\cC(\bd(X))$, we will write $\cC(X; c)$ for $\bd^{-1}(c)$, those morphisms with specified boundary $c$.

Most of the examples of $n$-categories we are interested in are enriched in the following sense.
The various sets of $n$-morphisms $\cC(X; c)$, for all $n$-balls $X$ and
all $c\in \cC(\bd X)$, have the structure of an object in some auxiliary category
(e.g.\ vector spaces, or modules over some ring, or chain complexes),
and all the structure maps of the $n$-category should be compatible with the auxiliary
category structure.
Note that this auxiliary structure is only in dimension $n$;
$\cC(Y; c)$ is just a plain set if $\dim(Y) < n$.

\medskip
\nn{
%At the moment I'm a little confused about orientations, and more specifically
%about the role of orientation-reversing maps of boundaries when gluing oriented manifolds.
Maybe need a discussion about what the boundary of a manifold with a 
structure (e.g. orientation) means.
Tentatively, I think we need to redefine the oriented boundary of an oriented $n$-manifold.
Instead of an ordinary oriented $(n-1)$-manifold via the inward (or outward) normal 
first (or last) convention, perhaps it is better to define the boundary to be an $(n-1)$-manifold
equipped with an orientation of its once-stabilized tangent bundle.
Similarly, in dimension $n-k$ we would have manifolds equipped with an orientation of 
their $k$ times stabilized tangent bundles.
(cf. [Stolz and Teichner].)
Probably should also have a framing of the stabilized dimensions in order to indicate which 
side the bounded manifold is on.
For the moment just stick with unoriented manifolds.}
\medskip

We have just argued that the boundary of a morphism has no preferred splitting into
domain and range, but the converse meets with our approval.
That is, given compatible domain and range, we should be able to combine them into
the full boundary of a morphism:

\begin{axiom}[Boundary from domain and range]
Let $S = B_1 \cup_E B_2$, where $S$ is a $k$-sphere $(0\le k\le n-1)$,
$B_i$ is a $k$-ball, and $E = B_1\cap B_2$ is a $k{-}1$-sphere (Figure \ref{blah3}).
Let $\cC(B_1) \times_{\cC(E)} \cC(B_2)$ denote the fibered product of the 
two maps $\bd: \cC(B_i)\to \cC(E)$.
Then we have an injective map
\[
	\gl_E : \cC(B_1) \times_{\cC(E)} \cC(B_2) \into \cC(S)
\]
which is natural with respect to the actions of homeomorphisms.
\end{axiom}

\begin{figure}[!ht]
$$
\begin{tikzpicture}[%every label/.style={green}
					]
\node[fill=black, circle, label=below:$E$, inner sep=2pt](S) at (0,0) {};
\node[fill=black, circle, label=above:$E$, inner sep=2pt](N) at (0,2) {};
\draw (S) arc  (-90:90:1);
\draw (N) arc  (90:270:1);
\node[left] at (-1,1) {$B_1$};
\node[right] at (1,1) {$B_2$};
\end{tikzpicture}
$$
\caption{Combining two balls to get a full boundary.}\label{blah3}\end{figure}

Note that we insist on injectivity above.

Let $\cC(S)_E$ denote the image of $\gl_E$.
We will refer to elements of $\cC(S)_E$ as ``splittable along $E$" or ``transverse to $E$". 

If $X$ is a $k$-ball and $E \sub \bd X$ splits $\bd X$ into two $k{-}1$-balls $B_1$ and $B_2$
as above, then we define $\cC(X)_E = \bd^{-1}(\cC(\bd X)_E)$.

We will call the projection $\cC(S)_E \to \cC(B_i)$
a {\it restriction} map and write $\res_{B_i}(a)$
(or simply $\res(a)$ when there is no ambiguity), for $a\in \cC(S)_E$.
More generally, we also include under the rubric ``restriction map" the
the boundary maps of Axiom \ref{nca-boundary} above,
another class of maps introduced after Axiom \ref{nca-assoc} below, as well as any composition
of restriction maps.
In particular, we have restriction maps $\cC(X)_E \to \cC(B_i)$
($i = 1, 2$, notation from previous paragraph).
These restriction maps can be thought of as 
domain and range maps, relative to the choice of splitting $\bd X = B_1 \cup_E B_2$.


Next we consider composition of morphisms.
For $n$-categories which lack strong duality, one usually considers
$k$ different types of composition of $k$-morphisms, each associated to a different direction.
(For example, vertical and horizontal composition of 2-morphisms.)
In the presence of strong duality, these $k$ distinct compositions are subsumed into 
one general type of composition which can be in any ``direction".

\begin{axiom}[Composition]
Let $B = B_1 \cup_Y B_2$, where $B$, $B_1$ and $B_2$ are $k$-balls ($0\le k\le n$)
and $Y = B_1\cap B_2$ is a $k{-}1$-ball (Figure \ref{blah5}).
Let $E = \bd Y$, which is a $k{-}2$-sphere.
Note that each of $B$, $B_1$ and $B_2$ has its boundary split into two $k{-}1$-balls by $E$.
We have restriction (domain or range) maps $\cC(B_i)_E \to \cC(Y)$.
Let $\cC(B_1)_E \times_{\cC(Y)} \cC(B_2)_E$ denote the fibered product of these two maps. 
We have a map
\[
	\gl_Y : \cC(B_1)_E \times_{\cC(Y)} \cC(B_2)_E \to \cC(B)_E
\]
which is natural with respect to the actions of homeomorphisms, and also compatible with restrictions
to the intersection of the boundaries of $B$ and $B_i$.
If $k < n$ we require that $\gl_Y$ is injective.
(For $k=n$, see below.)
\end{axiom}

\begin{figure}[!ht]
$$
\begin{tikzpicture}[%every label/.style={green},
				x=1.5cm,y=1.5cm]
\node[fill=black, circle, label=below:$E$, inner sep=2pt](S) at (0,0) {};
\node[fill=black, circle, label=above:$E$, inner sep=2pt](N) at (0,2) {};
\draw (S) arc  (-90:90:1);
\draw (N) arc  (90:270:1);
\draw (N) -- (S);
\node[left] at (-1/4,1) {$B_1$};
\node[right] at (1/4,1) {$B_2$};
\node at (1/6,3/2)  {$Y$};
\end{tikzpicture}
$$
\caption{From two balls to one ball.}\label{blah5}\end{figure}

\begin{axiom}[Strict associativity] \label{nca-assoc}
The composition (gluing) maps above are strictly associative.
\end{axiom}

\begin{figure}[!ht]
$$\mathfig{.65}{ncat/strict-associativity}$$
\caption{An example of strict associativity.}\label{blah6}\end{figure}

We'll use the notations  $a\bullet b$ as well as $a \cup b$ for the glued together field $\gl_Y(a, b)$.
In the other direction, we will call the projection from $\cC(B)_E$ to $\cC(B_i)_E$ 
a restriction map (one of many types of map so called) and write $\res_{B_i}(a)$ for $a\in \cC(B)_E$.
%Compositions of boundary and restriction maps will also be called restriction maps.
%For example, if $B$ is a $k$-ball and $Y\sub \bd B$ is a $k{-}1$-ball, there is a
%restriction map from $\cC(B)_{\bd Y}$ to $\cC(Y)$.

We will write $\cC(B)_Y$ for the image of $\gl_Y$ in $\cC(B)$.
We will call elements of $\cC(B)_Y$ morphisms which are `splittable along $Y$' or `transverse to $Y$'.
We have $\cC(B)_Y \sub \cC(B)_E \sub \cC(B)$.

More generally, let $\alpha$ be a subdivision of a ball (or sphere) $X$ into smaller balls.
Let $\cC(X)_\alpha \sub \cC(X)$ denote the image of the iterated gluing maps from 
the smaller balls to $X$.
We  say that elements of $\cC(X)_\alpha$ are morphisms which are `splittable along $\alpha$'.
In situations where the subdivision is notationally anonymous, we will write
$\cC(X)\spl$ for the morphisms which are splittable along (a.k.a.\ transverse to)
the unnamed subdivision.
If $\beta$ is a subdivision of $\bd X$, we define $\cC(X)_\beta \deq \bd\inv(\cC(\bd X)_\beta)$;
this can also be denoted $\cC(X)\spl$ if the context contains an anonymous
subdivision of $\bd X$ and no competing subdivision of $X$.

The above two composition axioms are equivalent to the following one,
which we state in slightly vague form.

\xxpar{Multi-composition:}
{Given any decomposition $B = B_1\cup\cdots\cup B_m$ of a $k$-ball
into small $k$-balls, there is a 
map from an appropriate subset (like a fibered product) 
of $\cC(B_1)\spl\times\cdots\times\cC(B_m)\spl$ to $\cC(B)\spl$,
and these various $m$-fold composition maps satisfy an
operad-type strict associativity condition (Figure \ref{blah7}).}

\begin{figure}[!ht]
$$\mathfig{.8}{tempkw/blah7}$$
\caption{Operad composition and associativity}\label{blah7}\end{figure}

The next axiom is related to identity morphisms, though that might not be immediately obvious.

\begin{axiom}[Product (identity) morphisms]
For each $k$-ball $X$ and $m$-ball $D$, with $k+m \le n$, there is a map $\cC(X)\to \cC(X\times D)$, usually denoted $a\mapsto a\times D$ for $a\in \cC(X)$. These maps must satisfy the following conditions.
\begin{enumerate}
\item
If $f:X\to X'$ and $\tilde{f}:X\times D \to X'\times D'$ are maps such that the diagram
\[ \xymatrix{
	X\times D \ar[r]^{\tilde{f}} \ar[d]_{\pi} & X'\times D' \ar[d]^{\pi} \\
	X \ar[r]^{f} & X'
} \]
commutes, then we have 
\[
	\tilde{f}(a\times D) = f(a)\times D' .
\]
\item
Product morphisms are compatible with gluing (composition) in both factors:
\[
	(a'\times D)\bullet(a''\times D) = (a'\bullet a'')\times D
\]
and
\[
	(a\times D')\bullet(a\times D'') = a\times (D'\bullet D'') .
\]
\nn{if pinched boundary, then remove first case above}
\item
Product morphisms are associative:
\[
	(a\times D)\times D' = a\times (D\times D') .
\]
(Here we are implicitly using functoriality and the obvious homeomorphism
$(X\times D)\times D' \to X\times(D\times D')$.)
\item
Product morphisms are compatible with restriction:
\[
	\res_{X\times E}(a\times D) = a\times E
\]
for $E\sub \bd D$ and $a\in \cC(X)$.
\end{enumerate}
\end{axiom}

\nn{need even more subaxioms for product morphisms?}

\nn{Almost certainly we need a little more than the above axiom.
More specifically, in order to bootstrap our way from the top dimension
properties of identity morphisms to low dimensions, we need regular products,
pinched products and even half-pinched products.
I'm not sure what the best way to cleanly axiomatize the properties of these various
products is.
For the moment, I'll assume that all flavors of the product are at
our disposal, and I'll plan on revising the axioms later.}

\nn{current idea for fixing this: make the above axiom a ``preliminary version"
(as we have already done with some of the other axioms), then state the official
axiom for maps $\pi: E \to X$ which are almost fiber bundles.
one option is to restrict E to be a (full/half/not)-pinched product (up to homeo).
the alternative is to give some sort of local criterion for what's allowed.
state a gluing axiom for decomps $E = E'\cup E''$ where all three are of the correct type.
}

All of the axioms listed above hold for both ordinary $n$-categories and $A_\infty$ $n$-categories.
The last axiom (below), concerning actions of 
homeomorphisms in the top dimension $n$, distinguishes the two cases.

We start with the plain $n$-category case.

\begin{axiom}[Isotopy invariance in dimension $n$]{\textup{\textbf{[preliminary]}}}
Let $X$ be an $n$-ball and $f: X\to X$ be a homeomorphism which restricts
to the identity on $\bd X$ and is isotopic (rel boundary) to the identity.
Then $f$ acts trivially on $\cC(X)$; $f(a) = a$ for all $a\in \cC(X)$.
\end{axiom}

This axiom needs to be strengthened to force product morphisms to act as the identity.
Let $X$ be an $n$-ball and $Y\sub\bd X$ be an $n{-}1$-ball.
Let $J$ be a 1-ball (interval).
We have a collaring homeomorphism $s_{Y,J}: X\cup_Y (Y\times J) \to X$.
(Here we use the ``pinched" version of $Y\times J$.
\nn{need notation for this})
We define a map
\begin{eqnarray*}
	\psi_{Y,J}: \cC(X) &\to& \cC(X) \\
	a & \mapsto & s_{Y,J}(a \cup ((a|_Y)\times J)) .
\end{eqnarray*}
(See Figure \ref{glue-collar}.)
\begin{figure}[!ht]
\begin{equation*}
\begin{tikzpicture}
\def\rad{1}
\def\srad{0.75}
\def\gap{4.5}
\foreach \i in {0, 1, 2} {
	\node(\i) at ($\i*(\gap,0)$) [draw, circle through = {($\i*(\gap,0)+(\rad,0)$)}] {};
	\node(\i-small) at (\i.east) [circle through={($(\i.east)+(\srad,0)$)}] {};
	\foreach \n in {1,2} {
		\fill (intersection \n of \i-small and \i) node(\i-intersection-\n) {} circle (2pt);
	}
}

\begin{scope}[decoration={brace,amplitude=10,aspect=0.5}]
	\draw[decorate] (0-intersection-1.east) -- (0-intersection-2.east);
\end{scope}
\node[right=1mm] at (0.east) {$a$};
\draw[->] ($(0.east)+(0.75,0)$) -- ($(1.west)+(-0.2,0)$);

\draw (1-small)  circle (\srad);
\foreach \theta in {90, 72, ..., -90} {
	\draw[blue] (1) -- ($(1)+(\rad,0)+(\theta:\srad)$);
}
\filldraw[fill=white] (1) circle (\rad);
\foreach \n in {1,2} {
	\fill (intersection \n of 1-small and 1) circle (2pt);
}
\node[below] at (1-small.south) {$a \times J$};
\draw[->] ($(1.east)+(1,0)$) -- ($(2.west)+(-0.2,0)$);

\begin{scope}
\path[clip] (2) circle (\rad);
\draw[clip] (2.east) circle (\srad);
\foreach \y in {1, 0.86, ..., -1} {
	\draw[blue] ($(2)+(-1,\y) $)-- ($(2)+(1,\y)$);
}
\end{scope}
\end{tikzpicture}
\end{equation*}
\begin{equation*}
\xymatrix@C+2cm{\cC(X) \ar[r]^(0.45){\text{glue}} & \cC(X \cup \text{collar}) \ar[r]^(0.55){\text{homeo}} & \cC(X)}
\end{equation*}

\caption{Extended homeomorphism.}\label{glue-collar}\end{figure}
We say that $\psi_{Y,J}$ is {\it extended isotopic} to the identity map.
\nn{bad terminology; fix it later}
\nn{also need to make clear that plain old isotopic to the identity implies
extended isotopic}
\nn{maybe remark that in some examples (e.g.\ ones based on sub cell complexes) 
extended isotopies are also plain isotopies, so
no extension necessary}
It can be thought of as the action of the inverse of
a map which projects a collar neighborhood of $Y$ onto $Y$.

The revised axiom is

\addtocounter{axiom}{-1}
\begin{axiom}{\textup{\textbf{[topological  version]}} Extended isotopy invariance in dimension $n$}
\label{axiom:extended-isotopies}
Let $X$ be an $n$-ball and $f: X\to X$ be a homeomorphism which restricts
to the identity on $\bd X$ and is extended isotopic (rel boundary) to the identity.
Then $f$ acts trivially on $\cC(X)$.
\end{axiom}

\nn{need to rephrase this, since extended isotopies don't correspond to homeomorphisms.}

\smallskip

For $A_\infty$ $n$-categories, we replace
isotopy invariance with the requirement that families of homeomorphisms act.
For the moment, assume that our $n$-morphisms are enriched over chain complexes.

\addtocounter{axiom}{-1}
\begin{axiom}{\textup{\textbf{[$A_\infty$ version]}} Families of homeomorphisms act in dimension $n$}
For each $n$-ball $X$ and each $c\in \cC(\bd X)$ we have a map of chain complexes
\[
	C_*(\Homeo_\bd(X))\ot \cC(X; c) \to \cC(X; c) .
\]
Here $C_*$ means singular chains and $\Homeo_\bd(X)$ is the space of homeomorphisms of $X$
which fix $\bd X$.
These action maps are required to be associative up to homotopy
\nn{iterated homotopy?}, and also compatible with composition (gluing) in the sense that
a diagram like the one in Proposition \ref{CHprop} commutes.
\nn{repeat diagram here?}
\nn{restate this with $\Homeo(X\to X')$?  what about boundary fixing property?}
\end{axiom}

We should strengthen the above axiom to apply to families of extended homeomorphisms.
To do this we need to explain how extended homeomorphisms form a topological space.
Roughly, the set of $n{-}1$-balls in the boundary of an $n$-ball has a natural topology,
and we can replace the class of all intervals $J$ with intervals contained in $\r$.
\nn{need to also say something about collaring homeomorphisms.}
\nn{this paragraph needs work.}

Note that if we take homology of chain complexes, we turn an $A_\infty$ $n$-category
into a plain $n$-category (enriched over graded groups).
\nn{say more here?}
In a different direction, if we enrich over topological spaces instead of chain complexes,
we get a space version of an $A_\infty$ $n$-category, with $\Homeo_\bd(X)$ acting 
instead of  $C_*(\Homeo_\bd(X))$.
Taking singular chains converts such a space type $A_\infty$ $n$-category into a chain complex
type $A_\infty$ $n$-category.

\medskip

The alert reader will have already noticed that our definition of (plain) $n$-category
is extremely similar to our definition of topological fields.
The main difference is that for the $n$-category definition we restrict our attention to balls
(and their boundaries), while for fields we consider all manifolds.
(A minor difference is that in the category definition we directly impose isotopy
invariance in dimension $n$, while in the fields definition we have non-isotopy-invariant fields
but then mod out by local relations which imply isotopy invariance.)
Thus a system of fields determines an $n$-category simply by restricting our attention to
balls.
This $n$-category can be thought of as the local part of the fields.
Conversely, given an $n$-category we can construct a system of fields via 
a colimit construction; see \S \ref{ss:ncat_fields} below.

%\nn{Next, say something about $A_\infty$ $n$-categories and ``homological" systems
%of fields.
%The universal (colimit) construction becomes our generalized definition of blob homology.
%Need to explain how it relates to the old definition.}

\medskip

\subsection{Examples of $n$-categories}\ \

\nn{these examples need to be fleshed out a bit more}

We now describe several classes of examples of $n$-categories satisfying our axioms.

\begin{example}[Maps to a space]
\rm
\label{ex:maps-to-a-space}%
Fix a `target space' $T$, any topological space. We define $\pi_{\leq n}(T)$, the fundamental $n$-category of $T$, as follows.
For $X$ a $k$-ball or $k$-sphere with $k < n$, define $\pi_{\leq n}(T)(X)$ to be the set of 
all continuous maps from $X$ to $T$.
For $X$ an $n$-ball define $\pi_{\leq n}(T)(X)$ to be continuous maps from $X$ to $T$ modulo
homotopies fixed on $\bd X$.
(Note that homotopy invariance implies isotopy invariance.)
For $a\in \cC(X)$ define the product morphism $a\times D \in \cC(X\times D)$ to
be $a\circ\pi_X$, where $\pi_X : X\times D \to X$ is the projection.
\end{example}

\begin{example}[Maps to a space, with a fiber]
\rm
\label{ex:maps-to-a-space-with-a-fiber}%
We can modify the example above, by fixing a
closed $m$-manifold $F$, and defining $\pi^{\times F}_{\leq n}(T)(X) = \Maps(X \times F \to T)$, otherwise leaving the definition in Example \ref{ex:maps-to-a-space} unchanged. Taking $F$ to be a point recovers the previous case.
\end{example}

\begin{example}[Linearized, twisted, maps to a space]
\rm
\label{ex:linearized-maps-to-a-space}%
We can linearize Examples \ref{ex:maps-to-a-space} and \ref{ex:maps-to-a-space-with-a-fiber} as follows.
Let $\alpha$ be an $(n{+}m{+}1)$-cocycle on $T$ with values in a ring $R$
(have in mind the trivial cocycle).
For $X$ of dimension less than $n$ define $\pi^{\alpha, \times F}_{\leq n}(T)(X)$ as before, ignoring $\alpha$.
For $X$ an $n$-ball and $c\in \Maps(\bdy X \times F \to T)$ define $\pi^{\alpha, \times F}_{\leq n}(T)(X; c)$ to be
the $R$-module of finite linear combinations of continuous maps from $X\times F$ to $T$,
modulo the relation that if $a$ is homotopic to $b$ (rel boundary) via a homotopy
$h: X\times F\times I \to T$, then $a = \alpha(h)b$.
\nn{need to say something about fundamental classes, or choose $\alpha$ carefully}
\end{example}

The next example is only intended to be illustrative, as we don't specify which definition of a `traditional $n$-category' we intend. Further, most of these definitions don't even have an agreed-upon notion of `strong duality', which we assume here.
\begin{example}[Traditional $n$-categories]
\rm
\label{ex:traditional-n-categories}
Given a `traditional $n$-category with strong duality' $C$
define $\cC(X)$, for $X$ a $k$-ball or $k$-sphere with $k < n$,
to be the set of all $C$-labeled sub cell complexes of $X$ (c.f. \S \ref{sec:fields}).
For $X$ an $n$-ball and $c\in \cC(\bd X)$, define $\cC(X)$ to finite linear
combinations of $C$-labeled sub cell complexes of $X$
modulo the kernel of the evaluation map.
Define a product morphism $a\times D$, for $D$ an $m$-ball, to be the product of the cell complex of $a$ with $D$,
with each cell labelled by the $m$-th iterated identity morphism of the corresponding cell for $a$.
More generally, start with an $n{+}m$-category $C$ and a closed $m$-manifold $F$.
Define $\cC(X)$, for $\dim(X) < n$,
to be the set of all $C$-labeled sub cell complexes of $X\times F$.
Define $\cC(X; c)$, for $X$ an $n$-ball,
to be the dual Hilbert space $A(X\times F; c)$.
\nn{refer elsewhere for details?}
\end{example}

Finally, we describe a version of the bordism $n$-category suitable to our definitions.

\nn{should also include example of ncats coming from TQFTs, or refer ahead to where we discuss that example}

\newcommand{\Bord}{\operatorname{Bord}}
\begin{example}[The bordism $n$-category]
\rm
\label{ex:bordism-category}
For a $k$-ball or $k$-sphere $X$, $k<n$, define $\Bord^n(X)$ to be the set of all $k$-dimensional
submanifolds $W$ of $X\times \Real^\infty$ such that the projection $W \to X$ is transverse
to $\bd X$.
For an $n$-ball $X$ define $\Bord^n(X)$ to be homeomorphism classes (rel boundary) of such $n$-dimensional submanifolds;
we identify $W$ and $W'$ if $\bd W = \bd W'$ and there is a homeomorphism
$W \to W'$ which restricts to the identity on the boundary.
\end{example}

%\nn{the next example might be an unnecessary distraction.  consider deleting it.}

%\begin{example}[Variation on the above examples]
%We could allow $F$ to have boundary and specify boundary conditions on $X\times \bd F$,
%for example product boundary conditions or take the union over all boundary conditions.
%%\nn{maybe should not emphasize this case, since it's ``better" in some sense
%%to think of these guys as affording a representation
%%of the $n{+}1$-category associated to $\bd F$.}
%\end{example}


We have two main examples of $A_\infty$ $n$-categories, coming from maps to a target space and from the blob complex.

\begin{example}[Chains of maps to a space]
\rm
\label{ex:chains-of-maps-to-a-space}
We can modify Example \ref{ex:maps-to-a-space} above to define the fundamental $A_\infty$ $n$-category $\pi^\infty_{\le n}(T)$ of a topological space $T$.
For $k$-balls and $k$-spheres $X$, with $k < n$, the sets $\pi^\infty_{\leq n}(T)(X)$ are just $\Maps(X \to T)$.
Define $\pi^\infty_{\leq n}(T)(X; c)$ for an $n$-ball $X$ and $c \in \pi^\infty_{\leq n}(T)(\bdy X)$ to be the chain complex
$$C_*(\Maps_c(X\times F \to T)),$$ where $\Maps_c$ denotes continuous maps restricting to $c$ on the boundary,
and $C_*$ denotes singular chains.
\nn{maybe should also mention version where we enrich over spaces rather than chain complexes}
\end{example}

See also Theorem \ref{thm:map-recon} below, recovering $C_*(\Maps(M \to T))$ up to homotopy the blob complex of $M$ with coefficients in $\pi^\infty_{\le n}(T)$.

\begin{example}[Blob complexes of balls (with a fiber)]
\rm
\label{ex:blob-complexes-of-balls}
Fix an $m$-dimensional manifold $F$ and system of fields $\cE$.
We will define an $A_\infty$ $(n-m)$-category $\cC$.
When $X$ is a $k$-ball or $k$-sphere, with $k<n-m$, define $\cC(X) = \cE(X\times F)$.
When $X$ is an $(n-m)$-ball,
define $\cC(X; c) = \bc^\cE_*(X\times F; c)$
where $\bc^\cE_*$ denotes the blob complex based on $\cE$.
\end{example}

This example will be essential for Theorem \ref{product_thm} below, which allows us to compute the blob complex of a product. Notice that with $F$ a point, the above example is a construction turning a topological $n$-category into an $A_\infty$ $n$-category. We think of this as providing a `free resolution' of the topological $n$-category. \todo{Say more here!} In fact, there is also a trivial way to do this: we can think of each vector space associated to an $n$-ball as a chain complex concentrated in degree $0$, and take $\CD{B}$ to act trivially. 

Be careful that the `free resolution' of the topological $n$-category $\pi_{\leq n}(T)$ is not the $A_\infty$ $n$-category $\pi^\infty_{\leq n}(T)$. It's easy to see that with $n=0$, the corresponding system of fields is just linear combinations of connected components of $T$, and the local relations are trivial. There's no way for the blob complex to magically recover all the data of $\pi^\infty_{\leq 0}(T) \iso C_* T$.

\begin{example}
\nn{should add $\infty$ version of bordism $n$-cat}
\end{example}






\subsection{From $n$-categories to systems of fields}
\label{ss:ncat_fields}
In this section we describe how to extend an $n$-category as described above (of either the plain or $A_\infty$ variety) to a system of fields. That is, we show that functors $\cC_k$ satisfying the axioms above have a canonical extension, from $k$-balls and $k$-spheres to arbitrary $k$-manifolds.
In the case of plain $n$-categories, this is just the usual construction of a TQFT
from an $n$-category.
For $A_\infty$ $n$-categories, this gives an alternate (and
somewhat more canonical/tautological) construction of the blob complex.
\nn{though from this point of view it seems more natural to just add some
adjective to ``TQFT" rather than coining a completely new term like ``blob complex".}

We will first define the `cell-decomposition' poset $\cJ(W)$ for any $k$-manifold $W$, for $1 \leq k \leq n$. 
An $n$-category $\cC$ provides a functor from this poset to the category of sets, and we  will define $\cC(W)$ as a suitable colimit (or homotopy colimit in the $A_\infty$ case) of this functor. 
We'll later give a more explicit description of this colimit. In the case that the $n$-category $\cC$ is enriched (e.g. associates vector spaces or chain complexes to $n$-manifolds with boundary data), then the resulting system of fields is also enriched, that is, the set associated to $W$ splits into subsets according to boundary data, and each of these subsets has the appropriate structure (e.g. a vector space or chain complex).

\begin{defn}
Say that a `permissible decomposition' of $W$ is a cell decomposition
\[
	W = \bigcup_a X_a ,
\]
where each closed top-dimensional cell $X_a$ is an embedded $k$-ball.

Given permissible decompositions $x$ and $y$, we say that $x$ is a refinement
of $y$, or write $x \le y$, if each $k$-ball of $y$ is a union of $k$-balls of $x$.

The category $\cJ(W)$ has objects the permissible decompositions of $W$, and a unique morphism from $x$ to $y$ if and only if $x$ is a refinement of $y$.
See Figure \ref{partofJfig} for an example.
\end{defn}

\begin{figure}[!ht]
\begin{equation*}
\mathfig{.63}{ncat/zz2}
\end{equation*}
\caption{A small part of $\cJ(W)$}
\label{partofJfig}
\end{figure}



An $n$-category $\cC$ determines 
a functor $\psi_{\cC;W}$ from $\cJ(W)$ to the category of sets 
(possibly with additional structure if $k=n$).
Each $k$-ball $X$ of a decomposition $y$ of $W$ has its boundary decomposed into $k{-}1$-balls,
and, as described above, we have a subset $\cC(X)\spl \sub \cC(X)$ of morphisms whose boundaries
are splittable along this decomposition.
%For a $k$-cell $X$ in a cell composition of $W$, we can consider the `splittable fields' $\cC(X)_{\bdy X}$, the subset of $\cC(X)$ consisting of fields which are splittable with respect to each boundary $k-1$-cell.

\begin{defn}
Define the functor $\psi_{\cC;W} : \cJ(W) \to \Set$ as follows.
For a decomposition $x = \bigcup_a X_a$ in $\cJ(W)$, $\psi_{\cC;W}(x)$ is the subset
\begin{equation}
\label{eq:psi-C}
	\psi_{\cC;W}(x) \sub \prod_a \cC(X_a)\spl
\end{equation}
where the restrictions to the various pieces of shared boundaries amongst the cells
$X_a$ all agree (this is a fibered product of all the labels of $n$-cells over the labels of $n-1$-cells).
If $x$ is a refinement of $y$, the map $\psi_{\cC;W}(x) \to \psi_{\cC;W}(y)$ is given by the composition maps of $\cC$.
\end{defn}

When the $n$-category $\cC$ is enriched in some monoidal category $(A,\boxtimes)$, and $W$ is a
closed $n$-manifold, the functor $\psi_{\cC;W}$ has target $A$ and
we replace the cartesian product of sets appearing in Equation \eqref{eq:psi-C} with the monoidal product $\boxtimes$. (Moreover, $\psi_{\cC;W}(x)$ might be a subobject, rather than a subset, of the product.)
Similar things are true if $W$ is an $n$-manifold with non-empty boundary and we
fix a field on $\bd W$
(i.e. fix an element of the colimit associated to $\bd W$).

Finally, we construct $\cC(W)$ as the appropriate colimit of $\psi_{\cC;W}$.

\begin{defn}[System of fields functor]
If $\cC$ is an $n$-category enriched in sets or vector spaces, $\cC(W)$ is the usual colimit of the functor $\psi_{\cC;W}$.
That is, for each decomposition $x$ there is a map
$\psi_{\cC;W}(x)\to \cC(W)$, these maps are compatible with the refinement maps
above, and $\cC(W)$ is universal with respect to these properties.
\end{defn}

\begin{defn}[System of fields functor, $A_\infty$ case]
When $\cC$ is an $A_\infty$ $n$-category, $\cC(W)$ for $W$ a $k$-manifold with $k < n$ is defined as above, as the colimit of $\psi_{\cC;W}$. When $W$ is an $n$-manifold, the chain complex $\cC(W)$ is the homotopy colimit of the functor $\psi_{\cC;W}$.
\end{defn}

We can specify boundary data $c \in \cC(\bdy W)$, and define functors $\psi_{\cC;W,c}$ with values the subsets of those of $\psi_{\cC;W}$ which agree with $c$ on the boundary of $W$.

We now give a more concrete description of the colimit in each case. If $\cC$ is enriched over vector spaces, and $W$ is an $n$-manifold, we can take the vector space $\cC(W,c)$ to be the direct sum over all permissible decompositions of $W$
\begin{equation*}
	\cC(W,c) = \left( \bigoplus_x \psi_{\cC;W,c}(x)\right) \big/ K
\end{equation*}
where $K$ is the vector space spanned by elements $a - g(a)$, with
$a\in \psi_{\cC;W,c}(x)$ for some decomposition $x$, and $g: \psi_{\cC;W,c}(x)
\to \psi_{\cC;W,c}(y)$ is value of $\psi_{\cC;W,c}$ on some antirefinement $x \leq y$.

In the $A_\infty$ case, enriched over chain complexes, the concrete description of the homotopy colimit
is more involved.
%\nn{should probably rewrite this to be compatible with some standard reference}
Define an $m$-sequence in $W$ to be a sequence $x_0 \le x_1 \le \dots \le x_m$ of permissible decompositions of $W$.
Such sequences (for all $m$) form a simplicial set in $\cJ(W)$.
Define $V$ as a vector space via
\[
	V = \bigoplus_{(x_i)} \psi_{\cC;W}(x_0)[m] ,
\]
where the sum is over all $m$-sequences $(x_i)$ and all $m$, and each summand is degree shifted by $m$. (Our homological conventions are non-standard: if a complex $U$ is concentrated in degree $0$, the complex $U[m]$ is concentrated in degree $m$.)
We endow $V$ with a differential which is the sum of the differential of the $\psi_{\cC;W}(x_0)$
summands plus another term using the differential of the simplicial set of $m$-sequences.
More specifically, if $(a, \bar{x})$ denotes an element in the $\bar{x}$
summand of $V$ (with $\bar{x} = (x_0,\dots,x_k)$), define
\[
	\bd (a, \bar{x}) = (\bd a, \bar{x}) + (-1)^{\deg{a}} (g(a), d_0(\bar{x})) + (-1)^{\deg{a}} \sum_{j=1}^k (-1)^{j} (a, d_j(\bar{x})) ,
\]
where $d_j(\bar{x}) = (x_0,\dots,x_{j-1},x_{j+1},\dots,x_k)$ and $g: \psi_\cC(x_0)\to \psi_\cC(x_1)$
is the usual gluing map coming from the antirefinement $x_0 \le x_1$.
\nn{need to say this better}
\nn{maybe mention that there is a version that emphasizes minimal gluings (antirefinements) which
combine only two balls at a time; for $n=1$ this version will lead to usual definition
of $A_\infty$ category}

We will call $m$ the filtration degree of the complex.
We can think of this construction as starting with a disjoint copy of a complex for each
permissible decomposition (filtration degree 0).
Then we glue these together with mapping cylinders coming from gluing maps
(filtration degree 1).
Then we kill the extra homology we just introduced with mapping cylinders between the mapping cylinders (filtration degree 2), and so on.

$\cC(W)$ is functorial with respect to homeomorphisms of $k$-manifolds.

It is easy to see that
there are well-defined maps $\cC(W)\to\cC(\bd W)$, and that these maps
comprise a natural transformation of functors.

\nn{need to finish explaining why we have a system of fields;
need to say more about ``homological" fields? 
(actions of homeomorphisms);
define $k$-cat $\cC(\cdot\times W)$}

Recall that Axiom \ref{} for an $n$-category provided functors $\cC$ from $k$-spheres to sets for $0 \leq k < n$. We claim now that these functors automatically agree with the colimits we have associated to spheres in this section. \todo{} \todo{In fact, we probably should do this for balls as well!} For the remainder of this section we will write $\underrightarrow{\cC}(W)$ for the colimit associated to an arbitary manifold $W$, to distinguish it, in the case that $W$ is a ball or a sphere, from $\cC(W)$, which is part of the definition of the $n$-category. After the next three lemmas, there will be no further need for this notational distinction.

\begin{lem}
For a $k$-ball or $k$-sphere $W$, with $0\leq k < n$, $$\underrightarrow{\cC}(W) = \cC(W).$$
\end{lem}

\begin{lem}
For a topological $n$-category $\cC$, and an $n$-ball $B$, $$\underrightarrow{\cC}(B) = \cC(B).$$
\end{lem}

\begin{lem}
For an $A_\infty$ $n$-category $\cC$, and an $n$-ball $B$, $$\underrightarrow{\cC}(B) \quism \cC(B).$$
\end{lem}


\subsection{Modules}

Next we define plain and $A_\infty$ $n$-category modules.
The definition will be very similar to that of $n$-categories,
but with $k$-balls replaced by {\it marked $k$-balls,} defined below.
\nn{** need to make sure all revisions of $n$-cat def are also made to module def.}
%\nn{should they be called $n$-modules instead of just modules?  probably not, but worth considering.}

Our motivating example comes from an $(m{-}n{+}1)$-dimensional manifold $W$ with boundary
in the context of an $m{+}1$-dimensional TQFT.
Such a $W$ gives rise to a module for the $n$-category associated to $\bd W$.
This will be explained in more detail as we present the axioms.

\nn{should also develop $\pi_{\le n}(T, S)$ as a module for $\pi_{\le n}(T)$, where $S\sub T$.}

Throughout, we fix an $n$-category $\cC$. For all but one axiom, it doesn't matter whether $\cC$ is a topological $n$-category or an $A_\infty$ $n$-category. We state the final axiom, on actions of homeomorphisms, differently in the two cases.

Define a {\it marked $k$-ball} to be a pair $(B, N)$ homeomorphic to the pair
$$(\text{standard $k$-ball}, \text{northern hemisphere in boundary of standard $k$-ball}).$$
We call $B$ the ball and $N$ the marking.
A homeomorphism between marked $k$-balls is a homeomorphism of balls which
restricts to a homeomorphism of markings.

\mmpar{Module axiom 1}{Module morphisms}
{For each $0 \le k \le n$, we have a functor $\cM_k$ from 
the category of marked $k$-balls and 
homeomorphisms to the category of sets and bijections.}

(As with $n$-categories, we will usually omit the subscript $k$.)

For example, let $\cD$ be the $m{+}1$-dimensional TQFT which assigns to a $k$-manifold $N$ the set 
of maps from $N$ to $T$, modulo homotopy (and possibly linearized) if $k=m$.
Let $W$ be an $(m{-}n{+}1)$-dimensional manifold with boundary.
Let $\cC$ be the $n$-category with $\cC(X) \deq \cD(X\times \bd W)$.
Let $\cM(B, N) \deq \cD((B\times \bd W)\cup (N\times W))$.
(The union is along $N\times \bd W$.)
(If $\cD$ were a general TQFT, we would define $\cM(B, N)$ to be
the subset of $\cD((B\times \bd W)\cup (N\times W))$ which is splittable along $N\times \bd W$.)

\begin{figure}[!ht]
$$\mathfig{.8}{ncat/boundary-collar}$$
\caption{From manifold with boundary collar to marked ball}\label{blah15}\end{figure}

Define the boundary of a marked $k$-ball $(B, N)$ to be the pair $(\bd B \setmin N, \bd N)$.
Call such a thing a {marked $k{-}1$-hemisphere}.

\mmpar{Module axiom 2}{Module boundaries (hemispheres)}
{For each $0 \le k \le n-1$, we have a functor $\cM_k$ from 
the category of marked $k$-hemispheres and 
homeomorphisms to the category of sets and bijections.}

In our example, let $\cM(H) \deq \cD(H\times\bd W \cup \bd H\times W)$.

\mmpar{Module axiom 3}{Module boundaries (maps)}
{For each marked $k$-ball $M$ we have a map of sets $\bd: \cM(M)\to \cM(\bd M)$.
These maps, for various $M$, comprise a natural transformation of functors.}

Given $c\in\cM(\bd M)$, let $\cM(M; c) \deq \bd^{-1}(c)$.

If the $n$-category $\cC$ is enriched over some other category (e.g.\ vector spaces),
then $\cM(M; c)$ should be an object in that category for each marked $n$-ball $M$
and $c\in \cC(\bd M)$.

\mmpar{Module axiom 4}{Boundary from domain and range}
{Let $H = M_1 \cup_E M_2$, where $H$ is a marked $k$-hemisphere ($0\le k\le n-1$),
$M_i$ is a marked $k$-ball, and $E = M_1\cap M_2$ is a marked $k{-}1$-hemisphere.
Let $\cM(M_1) \times_{\cM(E)} \cM(M_2)$ denote the fibered product of the 
two maps $\bd: \cM(M_i)\to \cM(E)$.
Then (axiom) we have an injective map
\[
	\gl_E : \cM(M_1) \times_{\cM(E)} \cM(M_2) \hookrightarrow \cM(H)
\]
which is natural with respect to the actions of homeomorphisms.}

Let $\cM(H)_E$ denote the image of $\gl_E$.
We will refer to elements of $\cM(H)_E$ as ``splittable along $E$" or ``transverse to $E$". 


\mmpar{Module axiom 5}{Module to category restrictions}
{For each marked $k$-hemisphere $H$ there is a restriction map
$\cM(H)\to \cC(H)$.  
($\cC(H)$ means apply $\cC$ to the underlying $k$-ball of $H$.)
These maps comprise a natural transformation of functors.}

Note that combining the various boundary and restriction maps above
(for both modules and $n$-categories)
we have for each marked $k$-ball $(B, N)$ and each $k{-}1$-ball $Y\sub \bd B \setmin N$
a natural map from a subset of $\cM(B, N)$ to $\cC(Y)$.
The subset is the subset of morphisms which are appropriately splittable (transverse to the
cutting submanifolds).
This fact will be used below.

In our example, the various restriction and gluing maps above come from
restricting and gluing maps into $T$.

We require two sorts of composition (gluing) for modules, corresponding to two ways
of splitting a marked $k$-ball into two (marked or plain) $k$-balls.
(See Figure \ref{zzz3}.)

\begin{figure}[!ht]
\begin{equation*}
\mathfig{.4}{ncat/zz3}
\end{equation*}
\caption{Module composition (top); $n$-category action (bottom).}
\label{zzz3}
\end{figure}

First, we can compose two module morphisms to get another module morphism.

\mmpar{Module axiom 6}{Module composition}
{Let $M = M_1 \cup_Y M_2$, where $M$, $M_1$ and $M_2$ are marked $k$-balls (with $0\le k\le n$)
and $Y = M_1\cap M_2$ is a marked $k{-}1$-ball.
Let $E = \bd Y$, which is a marked $k{-}2$-hemisphere.
Note that each of $M$, $M_1$ and $M_2$ has its boundary split into two marked $k{-}1$-balls by $E$.
We have restriction (domain or range) maps $\cM(M_i)_E \to \cM(Y)$.
Let $\cM(M_1)_E \times_{\cM(Y)} \cM(M_2)_E$ denote the fibered product of these two maps. 
Then (axiom) we have a map
\[
	\gl_Y : \cM(M_1)_E \times_{\cM(Y)} \cM(M_2)_E \to \cM(M)_E
\]
which is natural with respect to the actions of homeomorphisms, and also compatible with restrictions
to the intersection of the boundaries of $M$ and $M_i$.
If $k < n$ we require that $\gl_Y$ is injective.
(For $k=n$, see below.)}



Second, we can compose an $n$-category morphism with a module morphism to get another
module morphism.
We'll call this the action map to distinguish it from the other kind of composition.

\mmpar{Module axiom 7}{$n$-category action}
{Let $M = X \cup_Y M'$, where $M$ and $M'$ are marked $k$-balls ($0\le k\le n$),
$X$ is a plain $k$-ball,
and $Y = X\cap M'$ is a $k{-}1$-ball.
Let $E = \bd Y$, which is a $k{-}2$-sphere.
We have restriction maps $\cM(M')_E \to \cC(Y)$ and $\cC(X)_E\to \cC(Y)$.
Let $\cC(X)_E \times_{\cC(Y)} \cM(M')_E$ denote the fibered product of these two maps. 
Then (axiom) we have a map
\[
	\gl_Y :\cC(X)_E \times_{\cC(Y)} \cM(M')_E \to \cM(M)_E
\]
which is natural with respect to the actions of homeomorphisms, and also compatible with restrictions
to the intersection of the boundaries of $X$ and $M'$.
If $k < n$ we require that $\gl_Y$ is injective.
(For $k=n$, see below.)}

\mmpar{Module axiom 8}{Strict associativity}
{The composition and action maps above are strictly associative.}

Note that the above associativity axiom applies to mixtures of module composition,
action maps and $n$-category composition.
See Figure \ref{zzz1b}.

\begin{figure}[!ht]
\begin{equation*}
\mathfig{0.49}{ncat/zz0} \mathfig{0.49}{ncat/zz1}
\end{equation*}
\caption{Two examples of mixed associativity}
\label{zzz1b}
\end{figure}


The above three axioms are equivalent to the following axiom,
which we state in slightly vague form.
\nn{need figure for this}

\xxpar{Module multi-composition:}
{Given any decomposition 
\[
	M =  X_1 \cup\cdots\cup X_p \cup M_1\cup\cdots\cup M_q
\]
of a marked $k$-ball $M$
into small (marked and plain) $k$-balls $M_i$ and $X_j$, there is a 
map from an appropriate subset (like a fibered product) 
of 
\[
	\cC(X_1)\times\cdots\times\cC(X_p) \times \cM(M_1)\times\cdots\times\cM(M_q) 
\]
to $\cM(M)$,
and these various multifold composition maps satisfy an
operad-type strict associativity condition.}

(The above operad-like structure is analogous to the swiss cheese operad
\cite{MR1718089}.)
%\nn{need to double-check that this is true.}

\mmpar{Module axiom 9}{Product/identity morphisms}
{Let $M$ be a marked $k$-ball and $D$ be a plain $m$-ball, with $k+m \le n$.
Then we have a map $\cM(M)\to \cM(M\times D)$, usually denoted $a\mapsto a\times D$ for $a\in \cM(M)$.
If $f:M\to M'$ and $\tilde{f}:M\times D \to M'\times D'$ are maps such that the diagram
\[ \xymatrix{
	M\times D \ar[r]^{\tilde{f}} \ar[d]_{\pi} & M'\times D' \ar[d]^{\pi} \\
	M \ar[r]^{f} & M'
} \]
commutes, then we have $\tilde{f}(a\times D) = f(a)\times D'$.}

\nn{Need to add compatibility with various things, as in the n-cat version of this axiom above.}

\nn{postpone finalizing the above axiom until the n-cat version is finalized}

There are two alternatives for the next axiom, according whether we are defining
modules for plain $n$-categories or $A_\infty$ $n$-categories.
In the plain case we require

\mmpar{Module axiom 10a}{Extended isotopy invariance in dimension $n$}
{Let $M$ be a marked $n$-ball and $f: M\to M$ be a homeomorphism which restricts
to the identity on $\bd M$ and is extended isotopic (rel boundary) to the identity.
Then $f$ acts trivially on $\cM(M)$.}

\nn{need to rephrase this, since extended isotopies don't correspond to homeomorphisms.}

We emphasize that the $\bd M$ above means boundary in the marked $k$-ball sense.
In other words, if $M = (B, N)$ then we require only that isotopies are fixed 
on $\bd B \setmin N$.

For $A_\infty$ modules we require

\mmpar{Module axiom 10b}{Families of homeomorphisms act}
{For each marked $n$-ball $M$ and each $c\in \cM(\bd M)$ we have a map of chain complexes
\[
	C_*(\Homeo_\bd(M))\ot \cM(M; c) \to \cM(M; c) .
\]
Here $C_*$ means singular chains and $\Homeo_\bd(M)$ is the space of homeomorphisms of $M$
which fix $\bd M$.
These action maps are required to be associative up to homotopy
\nn{iterated homotopy?}, and also compatible with composition (gluing) in the sense that
a diagram like the one in Proposition \ref{CHprop} commutes.
\nn{repeat diagram here?}
\nn{restate this with $\Homeo(M\to M')$?  what about boundary fixing property?}}

\medskip

Note that the above axioms imply that an $n$-category module has the structure
of an $n{-}1$-category.
More specifically, let $J$ be a marked 1-ball, and define $\cE(X)\deq \cM(X\times J)$,
where $X$ is a $k$-ball or $k{-}1$-sphere and in the product $X\times J$ we pinch 
above the non-marked boundary component of $J$.
(More specifically, we collapse $X\times P$ to a single point, where
$P$ is the non-marked boundary component of $J$.)
\nn{give figure for this?}
Then $\cE$ has the structure of an $n{-}1$-category.

All marked $k$-balls are homeomorphic, unless $k = 1$ and our manifolds
are oriented or Spin (but not unoriented or $\text{Pin}_\pm$).
In this case ($k=1$ and oriented or Spin), there are two types
of marked 1-balls, call them left-marked and right-marked,
and hence there are two types of modules, call them right modules and left modules.
In all other cases ($k>1$ or unoriented or $\text{Pin}_\pm$),
there is no left/right module distinction.

\medskip

We now give some examples of modules over topological and $A_\infty$ $n$-categories.

\begin{example}[Examples from TQFTs]
\todo{}
\end{example}

\begin{example}
Suppose $S$ is a topological space, with a subspace $T$. We can define a module $\pi_{\leq n}(S,T)$ so that on each marked $k$-ball $(B,N)$ for $k<n$ the set $\pi_{\leq n}(S,T)(B,N)$ consists of all continuous maps of pairs $(B,N) \to (S,T)$ and on each marked $n$-ball $(B,N)$ it consists of all such maps modulo homotopies fixed on $\bdy B \setminus N$. This is a module over the fundamental $n$-category $\pi_{\leq n}(S)$ of $S$, from Example \ref{ex:maps-to-a-space}. Modifications corresponding to Examples \ref{ex:maps-to-a-space-with-a-fiber} and \ref{ex:linearized-maps-to-a-space} are also possible, and there is an $A_\infty$ version analogous to Example \ref{ex:chains-of-maps-to-a-space} given by taking singular chains.
\end{example}

\subsection{Modules as boundary labels}
\label{moddecss}

Fix a topological $n$-category or $A_\infty$ $n$-category  $\cC$. Let $W$ be a $k$-manifold ($k\le n$),
let $\{Y_i\}$ be a collection of disjoint codimension 0 submanifolds of $\bd W$,
and let $\cN = (\cN_i)$ be an assignment of a $\cC$ module $\cN_i$ to $Y_i$.

%Let $\cC$ be an [$A_\infty$] $n$-category, let $W$ be a $k$-manifold ($k\le n$),
%and let $\cN = (\cN_i)$ be an assignment of a $\cC$ module $\cN_i$ to each boundary 
%component $\bd_i W$ of $W$.
%(More generally, each $\cN_i$ could label some codimension zero submanifold of $\bd W$.)

We will define a set $\cC(W, \cN)$ using a colimit construction similar to the one appearing in \S \ref{ss:ncat_fields} above.
(If $k = n$ and our $n$-categories are enriched, then
$\cC(W, \cN)$ will have additional structure; see below.)

Define a permissible decomposition of $W$ to be a decomposition
\[
	W = \left(\bigcup_a X_a\right) \cup \left(\bigcup_{i,b} M_{ib}\right) ,
\]
where each $X_a$ is a plain $k$-ball (disjoint from $\bd W$) and
each $M_{ib}$ is a marked $k$-ball intersecting $\bd_i W$,
with $M_{ib}\cap Y_i$ being the marking.
(See Figure \ref{mblabel}.)
\begin{figure}[!ht]\begin{equation*}
\mathfig{.4}{ncat/mblabel}
\end{equation*}\caption{A permissible decomposition of a manifold
whose boundary components are labeled by $\cC$ modules $\{\cN_i\}$. Marked balls are shown shaded, plain balls are unshaded.}\label{mblabel}\end{figure}
Given permissible decompositions $x$ and $y$, we say that $x$ is a refinement
of $y$, or write $x \le y$, if each ball of $y$ is a union of balls of $x$.
This defines a partial ordering $\cJ(W)$, which we will think of as a category.
(The objects of $\cJ(D)$ are permissible decompositions of $W$, and there is a unique
morphism from $x$ to $y$ if and only if $x$ is a refinement of $y$.)

The collection of modules $\cN$ determines 
a functor $\psi_\cN$ from $\cJ(W)$ to the category of sets 
(possibly with additional structure if $k=n$).
For a decomposition $x = (X_a, M_{ib})$ in $\cJ(W)$, define $\psi_\cN(x)$ to be the subset
\[
	\psi_\cN(x) \sub \left(\prod_a \cC(X_a)\right) \times \left(\prod_{ib} \cN_i(M_{ib})\right)
\]
such that the restrictions to the various pieces of shared boundaries amongst the
$X_a$ and $M_{ib}$ all agree.
(That is, the fibered product over the boundary maps.)
If $x$ is a refinement of $y$, define a map $\psi_\cN(x)\to\psi_\cN(y)$
via the gluing (composition or action) maps from $\cC$ and the $\cN_i$.

We now define the set $\cC(W, \cN)$ to be the colimit of the functor $\psi_\cN$.
(As usual, if $k=n$ and we are in the $A_\infty$ case, then ``colimit" means
homotopy colimit.)

If $D$ is an $m$-ball, $0\le m \le n-k$, then we can similarly define
$\cC(D\times W, \cN)$, where in this case $\cN_i$ labels the submanifold 
$D\times Y_i \sub \bd(D\times W)$. It is not hard to see that the assignment $D \mapsto \cC(D\times W, \cN)$
has the structure of an $n{-}k$-category, which we call $\cT(W, \cN)(D)$.

\medskip


We will use a simple special case of the above 
construction to define tensor products 
of modules.
Let $\cM_1$ and $\cM_2$ be modules for an $n$-category $\cC$.
(If $k=1$ and our manifolds are oriented, then one should be 
a left module and the other a right module.)
Choose a 1-ball $J$, and label the two boundary points of $J$ by $\cM_1$ and $\cM_2$.
Define the tensor product $\cM_1 \tensor \cM_2$ to be the 
$n{-}1$-category $\cT(J, \{\cM_1, \cM_2\})$. This of course depends (functorially)
on the choice of 1-ball $J$.

We will define a more general self tensor product (categorified coend) below.

%\nn{what about self tensor products /coends ?}

\nn{maybe ``tensor product" is not the best name?}

%\nn{start with (less general) tensor products; maybe change this later}




\subsection{Morphisms of $A_\infty$ 1-cat modules}
\label{ss:module-morphisms}

In order to state and prove our version of the higher dimensional Deligne conjecture
(Section \ref{sec:deligne}),
we need to define morphisms of $A_\infty$ 1-category modules and establish
some of their elementary properties.

To motivate the definitions which follow, consider algebras $A$ and $B$,  right modules $X_B$ and $Z_A$ and a bimodule $\leftidx{_B}{Y}{_A}$, and the familiar adjunction
\begin{eqnarray*}
	\hom_A(X_B\ot {_BY_A} \to Z_A) &\cong& \hom_B(X_B \to \hom_A( {_BY_A} \to Z_A)) \\
	f &\mapsto& [x \mapsto f(x\ot -)] \\
	{}[x\ot y \mapsto g(x)(y)] & \mapsfrom & g .
\end{eqnarray*}
If $A$ and $Z_A$ are both the ground field $\k$, this simplifies to
\[
	(X_B\ot {_BY})^* \cong  \hom_B(X_B \to (_BY)^*) .
\]
We will establish the analogous isomorphism for a topological $A_\infty$ 1-cat $\cC$
and modules $\cM_\cC$ and $_\cC\cN$,
\[
	(\cM_\cC\ot {_\cC\cN})^* \cong  \hom_\cC(\cM_\cC \to (_\cC\cN)^*) .
\]

In the next few paragraphs we define the objects appearing in the above equation:
$\cM_\cC\ot {_\cC\cN}$, $(\cM_\cC\ot {_\cC\cN})^*$, $(_\cC\cN)^*$ and finally
$\hom_\cC$.


\def\olD{{\overline D}}
\def\cbar{{\bar c}}
In the previous subsection we defined a tensor product of $A_\infty$ $n$-category modules
for general $n$.
For $n=1$ this definition is a homotopy colimit indexed by subdivisions of a fixed interval $J$
and their gluings (antirefinements).
(This tensor product depends functorially on the choice of $J$.)
To a subdivision $D$
\[
	J = I_1\cup \cdots\cup I_p
\]
we associate the chain complex
\[
	\psi(D) = \cM(I_1)\ot\cC(I_2)\ot\cdots\ot\cC(I_{m-1})\ot\cN(I_m) .
\]
To each antirefinement we associate a chain map using the composition law of $\cC$ and the 
module actions of $\cC$ on $\cM$ and $\cN$.
The underlying graded vector space of the homotopy colimit is
\[
	\bigoplus_l \bigoplus_{\olD} \psi(D_0)[l] ,
\]
where $l$ runs through the natural numbers, $\olD = (D_0\to D_1\to\cdots\to D_l)$
runs through chains of antirefinements of length $l+1$, and $[l]$ denotes a grading shift.
We will denote an element of the summand indexed by $\olD$ by
$\olD\ot m\ot\cbar\ot n$, where $m\ot\cbar\ot n \in \psi(D_0)$.
The boundary map is given by
\begin{align*}
	\bd(\olD\ot m\ot\cbar\ot n) &= (\bd_0 \olD)\ot \rho(m\ot\cbar\ot n) + (\bd_+ \olD)\ot m\ot\cbar\ot n \; + \\
	& \qquad + (-1)^l \olD\ot\bd(m\ot\cbar\ot n) 
\end{align*}
where $\bd_+ \olD = \sum_{i>0} (-1)^i (D_0\to \cdots \to \widehat{D_i} \to \cdots \to D_l)$ (those parts of the simplicial
boundary which retain $D_0$), $\bd_0 \olD = (D_1 \to \cdots \to D_l)$,
and $\rho$ is the gluing map associated to the antirefinement $D_0\to D_1$.

$(\cM_\cC\ot {_\cC\cN})^*$ is just the dual chain complex to $\cM_\cC\ot {_\cC\cN}$:
\[
	\prod_l \prod_{\olD} (\psi(D_0)[l])^* ,
\]
where $(\psi(D_0)[l])^*$ denotes the linear dual.
The boundary is given by
\begin{eqnarray*}
	(\bd f)(\olD\ot m\ot\cbar\ot n) &=& f(\olD\ot\bd(m\ot\cbar)\ot n) + 
													f(\olD\ot m\ot\cbar\ot \bd n) + \\
			& & \;\;	f((\bd_+ \olD)\ot m\ot\cbar\ot n) + f((\bd_0 \olD)\ot \rho(m\ot\cbar\ot n)) .
\end{eqnarray*}
(Again, we are ignoring signs.) \nn{put signs in}

Next we define the dual module $(_\cC\cN)^*$.
This will depend on a choice of interval $J$, just as the tensor product did.
Recall that $_\cC\cN$ is, among other things, a functor from right-marked intervals
to chain complexes.
Given $J$, we define for each $K\sub J$ which contains the {\it left} endpoint of $J$
\[
	(_\cC\cN)^*(K) \deq ({_\cC\cN}(J\setmin K))^* ,
\]
where $({_\cC\cN}(J\setmin K))^*$ denotes the (linear) dual of the chain complex associated
to the right-marked interval $J\setmin K$.
This extends to a functor from all left-marked intervals (not just those contained in $J$).
\nn{need to say more here; not obvious how homeomorphisms act}
It's easy to verify the remaining module axioms.

Now we reinterpret $(\cM_\cC\ot {_\cC\cN})^*$
as some sort of morphism $\cM_\cC \to (_\cC\cN)^*$.
Let $f\in (\cM_\cC\ot {_\cC\cN})^*$.
Let $\olD = (D_0\cdots D_l)$ be a chain of subdivisions with $D_0 = [J = I_1\cup\cdots\cup I_m]$.
Recall that $(_\cC\cN)^*(I_1\cup\cdots\cup I_{p-1}) = (_\cC\cN(I_p))^*$.
Then for each such $\olD$ we have a degree $l$ map
\begin{eqnarray*}
	\cM(I_1)\ot\cC(I_2)\ot\cdots\ot\cC(I_{p-1}) &\to& (_\cC\cN)^*(I_1\cup\cdots\cup I_{p-1}) \\
	m\ot \cbar &\mapsto& [n\mapsto f(\olD\ot m\ot \cbar\ot n)]
\end{eqnarray*}

We are almost ready to give the definition of morphisms between arbitrary modules
$\cX_\cC$ and $\cY_\cC$.
Note that the rightmost interval $I_m$ does not appear above, except implicitly in $\olD$.
To fix this, we define subdivisions as antirefinements of left-marked intervals.
Subdivisions are just the obvious thing, but antirefinements are defined to mimic
the above antirefinements of the fixed interval $J$, but with the rightmost subinterval $I_m$ always
omitted.
More specifically, $D\to D'$ is an antirefinement if $D'$ is obtained from $D$ by 
gluing subintervals together and/or omitting some of the rightmost subintervals.
(See Figure \ref{fig:lmar}.)
\begin{figure}[t]\begin{equation*}
\mathfig{.6}{tempkw/left-marked-antirefinements}
\end{equation*}\caption{Antirefinements of left-marked intervals}\label{fig:lmar}\end{figure}

Now we define the chain complex $\hom_\cC(\cX_\cC \to \cY_\cC)$.
The underlying vector space is 
\[
	\prod_l \prod_{\olD} \hom[l]\left(
				\cX(I_1)\ot\cC(I_2)\ot\cdots\ot\cC(I_{p-1}) \to 
							\cY(I_1\cup\cdots\cup I_{p-1}) \rule{0pt}{1.1em}\right) ,
\]
where, as usual $\olD = (D_0\cdots D_l)$ is a chain of antirefinements
(but now of left-marked intervals) and $D_0$ is the subdivision $I_1\cup\cdots\cup I_{p-1}$.
$\hom[l](- \to -)$ means graded linear maps of degree $l$.

\nn{small issue (pun intended): 
the above is a vector space only if the class of subdivisions is a set, e.g. only if
all of our left-marked intervals are contained in some universal interval (like $J$ above).
perhaps we should give another version of the definition in terms of natural transformations of functors.}

Abusing notation slightly, we will denote elements of the above space by $g$, with
\[
	\olD\ot x \ot \cbar \mapsto g(\olD\ot x \ot \cbar) \in \cY(I_1\cup\cdots\cup I_{p-1}) .
\]
For fixed $D_0$ and $D_1$, let $\cbar = \cbar'\ot\cbar''$, where $\cbar'$ corresponds to the subintervals of $D_0$ which map to $D_1$ and $\cbar''$ corresponds to the subintervals
which are dropped off the right side.
(Either $\cbar'$ or $\cbar''$ might be empty.)
Translating from the boundary map for $(\cM_\cC\ot {_\cC\cN})^*$ \nn{give ref?},
we have
\begin{eqnarray*}
	(\bd g)(\olD\ot x \ot \cbar) &=& \bd(g(\olD\ot x \ot \cbar)) + g(\olD\ot\bd(x\ot\cbar)) + \\
	& & \;\; g((\bd_+\olD)\ot x\ot\cbar) + \gl(g((\bd_0\olD)\ot x\ot\cbar')\ot\cbar'') .
\end{eqnarray*}
Here $\gl$ denotes the module action in $\cY_\cC$.
This completes the definition of $\hom_\cC(\cX_\cC \to \cY_\cC)$.

Note that if $\bd g = 0$, then each 
\[
	g(\olD\ot -) : \cX(I_1)\ot\cC(I_2)\ot\cdots\ot\cC(I_{p-1}) \to \cY(I_1\cup\cdots\cup I_{p-1})
\]
constitutes a null homotopy of
$g((\bd \olD)\ot -)$ (where the $g((\bd_0 \olD)\ot -)$ part of $g((\bd \olD)\ot -)$
should be interpreted as above).

Define a {\it naive morphism} 
\nn{should consider other names for this}
of modules to be a collection of {\it chain} maps
\[
	h_K : \cX(K)\to \cY(K)
\]
for each left-marked interval $K$.
These are required to commute with gluing;
for each subdivision $K = I_1\cup\cdots\cup I_q$ the following diagram commutes:
\[ \xymatrix{
	\cX(I_1)\ot\cC(I_2)\ot\cdots\ot\cC(I_q) \ar[r]^{h_{I_0}\ot \id} 
							\ar[d]_{\gl} & \cY(I_1)\ot\cC(I_2)\ot\cdots\ot\cC(I_q) 
								\ar[d]^{\gl} \\
	\cX(K) \ar[r]^{h_{K}} & \cY(K)
} \]
Given such an $h$ we can construct a non-naive morphism $g$, with $\bd g = 0$, as follows.
Define $g(\olD\ot - ) = 0$ if the length/degree of $\olD$ is greater than 0.
If $\olD$ consists of the single subdivision $K = I_0\cup\cdots\cup I_q$ then define
\[
	g(\olD\ot x\ot \cbar) \deq h_K(\gl(x\ot\cbar)) .
\]
Trivially, we have $(\bd g)(\olD\ot x \ot \cbar) = 0$ if $\deg(\olD) > 1$.
If $\deg(\olD) = 1$, $(\bd g) = 0$ is equivalent to the fact that $h$ commutes with gluing.
If $\deg(\olD) = 0$, $(\bd g) = 0$ is equivalent to the fact 
that each $h_K$ is a chain map.

\medskip

Given $_\cC\cZ$ and  $g: \cX_\cC \to \cY_\cC$ with $\bd g = 0$ as above, we next define a chain map
\[
	g\ot\id : \cX_\cC \ot {}_\cC\cZ \to \cY_\cC \ot {}_\cC\cZ .
\]
\nn{this is fairly straightforward, but the details are messy enough that I'm inclined
to postpone writing it up, in the hopes that I'll think of a better way to organize things.}




\medskip


\nn{do we need to say anything about composing morphisms of modules?}

\nn{should we define functors between $n$-cats in a similar way?}


\nn{...}









\subsection{The $n{+}1$-category of sphere modules}
\label{ssec:spherecat}

In this subsection we define an $n{+}1$-category $\cS$ of ``sphere modules" 
whose objects correspond to $n$-categories.
When $n=2$
this is a version of the familiar algebras-bimodules-intertwiners 2-category.
(Terminology: It is clearly appropriate to call an $S^0$ module a bimodule,
but this is much less true for higher dimensional spheres, 
so we prefer the term ``sphere module" for the general case.)

The $0$- through $n$-dimensional parts of $\cC$ are various sorts of modules, and we describe
these first.
The $n{+}1$-dimensional part of $\cS$ consists of intertwiners
(of garden-variety $1$-category modules associated to decorated $n$-balls).
We will see below that in order for these $n{+}1$-morphisms to satisfy all of
the duality requirements of an $n{+}1$-category, we will have to assume
that our $n$-categories and modules have non-degenerate inner products.
(In other words, we need to assume some extra duality on the $n$-categories and modules.)

\medskip

Our first task is to define an $n$-category $m$-sphere module, for $0\le m \le n-1$.
These will be defined in terms of certain classes of marked balls, very similarly
to the definition of $n$-category modules above.
(This, in turn, is very similar to our definition of $n$-category.)
Because of this similarity, we only sketch the definitions below.

We start with 0-sphere modules, which also could reasonably be called (categorified) bimodules.
(For $n=1$ they are precisely bimodules in the usual, uncategorified sense.)
Define a 0-marked $k$-ball $(X, M)$, $1\le k \le n$, to be a pair homeomorphic to the standard
$(B^k, B^{k-1})$, where $B^{k-1}$ is properly embedded in $B^k$.
See Figure \ref{feb21a}.
Another way to say this is that $(X, M)$ is homeomorphic to $B^{k-1}\times([-1,1], \{0\})$.

\begin{figure}[!ht]
\begin{equation*}
\mathfig{.85}{tempkw/feb21a}
\end{equation*}
\caption{0-marked 1-ball and 0-marked 2-ball}
\label{feb21a}
\end{figure}

0-marked balls can be cut into smaller balls in various ways.
These smaller balls could be 0-marked or plain.
We can also take the boundary of a 0-marked ball, which is 0-marked sphere.

Fix $n$-categories $\cA$ and $\cB$.
These will label the two halves of a 0-marked $k$-ball.
The 0-sphere module we define next will depend on $\cA$ and $\cB$ 
(it's an $\cA$-$\cB$ bimodule), but we will suppress that from the notation.

An $n$-category 0-sphere module $\cM$ is a collection of functors $\cM_k$ from the category
of 0-marked $k$-balls, $1\le k \le n$,
(with the two halves labeled by $\cA$ and $\cB$) to the category of sets.
If $k=n$ these sets should be enriched to the extent $\cA$ and $\cB$ are.
Given a decomposition of a 0-marked $k$-ball $X$ into smaller balls $X_i$, we have
morphism sets $\cA_k(X_i)$ (if $X_i$ lies on the $\cA$-labeled side)
or $\cB_k(X_i)$ (if $X_i$ lies on the $\cB$-labeled side)
or $\cM_k(X_i)$ (if $X_i$ intersects the marking and is therefore a smaller 0-marked ball).
Corresponding to this decomposition we have an action and/or composition map
from the product of these various sets into $\cM(X)$.

\medskip

Part of the structure of an $n$-category 0-sphere module is captured by saying it is
a collection $\cD^{ab}$ of $n{-}1$-categories, indexed by pairs $(a, b)$ of objects (0-morphisms)
of $\cA$ and $\cB$.
Let $J$ be some standard 0-marked 1-ball (i.e.\ an interval with a marked point in its interior).
Given a $j$-ball $X$, $0\le j\le n-1$, we define
\[
	\cD(X) \deq \cM(X\times J) .
\]
The product is pinched over the boundary of $J$.
$\cD$ breaks into ``blocks" according to the restrictions to the pinched points of $X\times J$
(see Figure \ref{feb21b}).
These restrictions are 0-morphisms $(a, b)$ of $\cA$ and $\cB$.

\begin{figure}[!ht]
\begin{equation*}
\mathfig{1}{tempkw/feb21b}
\end{equation*}
\caption{The pinched product $X\times J$}
\label{feb21b}
\end{figure}

More generally, consider an interval with interior marked points, and with the complements
of these points labeled by $n$-categories $\cA_i$ ($0\le i\le l$) and the marked points labeled
by $\cA_i$-$\cA_{i+1}$ bimodules $\cM_i$.
(See Figure \ref{feb21c}.)
To this data we can apply to coend construction as in Subsection \ref{moddecss} above
to obtain an $\cA_0$-$\cA_l$ bimodule and, forgetfully, an $n{-}1$-category.
This amounts to a definition of taking tensor products of bimodules over $n$-categories.

\begin{figure}[!ht]
\begin{equation*}
\mathfig{1}{tempkw/feb21c}
\end{equation*}
\caption{Marked and labeled 1-manifolds}
\label{feb21c}
\end{figure}

We could also similarly mark and label a circle, obtaining an $n{-}1$-category
associated to the marked and labeled circle.
(See Figure \ref{feb21c}.)
If the circle is divided into two intervals, we can think of this $n{-}1$-category
as the 2-ended tensor product of the two bimodules associated to the two intervals.

\medskip

Next we define $n$-category 1-sphere modules.
These are just representations of (modules for) $n{-}1$-categories associated to marked and labeled 
circles (1-spheres) which we just introduced.

Equivalently, we can define 1-sphere modules in terms of 1-marked $k$-balls, $2\le k\le n$.
Fix a marked (and labeled) circle $S$.
Let $C(S)$ denote the cone of $S$, a marked 2-ball (Figure \ref{feb21d}).
\nn{I need to make up my mind whether marked things are always labeled too.
For the time being, let's say they are.}
A 1-marked $k$-ball is anything homeomorphic to $B^j \times C(S)$, $0\le j\le n-2$, 
where $B^j$ is the standard $j$-ball.
1-marked $k$-balls can be decomposed in various ways into smaller balls, which are either 
smaller 1-marked $k$-balls or the product of an unmarked ball with a marked interval.
We now proceed as in the above module definitions.

\begin{figure}[!ht]
\begin{equation*}
\mathfig{.4}{tempkw/feb21d}
\end{equation*}
\caption{Cone on a marked circle}
\label{feb21d}
\end{figure}

A $n$-category 1-sphere module is, among other things, an $n{-}2$-category $\cD$ with
\[
	\cD(X) \deq \cM(X\times C(S)) .
\]
The product is pinched over the boundary of $C(S)$.
$\cD$ breaks into ``blocks" according to the restriction to the 
image of $\bd C(S) = S$ in $X\times C(S)$.

More generally, consider a 2-manifold $Y$ 
(e.g.\ 2-ball or 2-sphere) marked by an embedded 1-complex $K$.
The components of $Y\setminus K$ are labeled by $n$-categories, 
the edges of $K$ are labeled by 0-sphere modules, 
and the 0-cells of $K$ are labeled by 1-sphere modules.
We can now apply the coend construction and obtain an $n{-}2$-category.
If $Y$ has boundary then this $n{-}2$-category is a module for the $n{-}1$-manifold
associated to the (marked, labeled) boundary of $Y$.
In particular, if $\bd Y$ is a 1-sphere then we get a 1-sphere module as defined above.

\medskip

It should now be clear how to define $n$-category $m$-sphere modules for $0\le m \le n-1$.
For example, there is an $n{-}2$-category associated to a marked, labeled 2-sphere,
and a 2-sphere module is a representation of such an $n{-}2$-category.

\medskip

We can now define the $n$- or less dimensional part of our $n{+}1$-category $\cS$.
Choose some collection of $n$-categories, then choose some collections of bimodules for
these $n$-categories, then choose some collection of 1-sphere modules for the various
possible marked 1-spheres labeled by the $n$-categories and bimodules, and so on.
Let $L_i$ denote the collection of $i{-}1$-sphere modules we have chosen.
(For convenience, we declare a $(-1)$-sphere module to be an $n$-category.)
There is a wide range of possibilities.
$L_0$ could contain infinitely many $n$-categories or just one.
For each pair of $n$-categories in $L_0$, $L_1$ could contain no bimodules at all or 
it could contain several.
The only requirement is that each $k$-sphere module be a module for a $k$-sphere $n{-}k$-category
constructed out of labels taken from $L_j$ for $j<k$.

We now define $\cS(X)$, for $X$ of dimension at most $n$, to be the set of all 
cell-complexes $K$ embedded in $X$, with the codimension-$j$ parts of $(X, K)$ labeled
by elements of $L_j$.
As described above, we can think of each decorated $k$-ball as defining a $k{-}1$-sphere module
for the $n{-}k{+}1$-category associated to its decorated boundary.
Thus the $k$-morphisms of $\cS$ (for $k\le n$) can be thought 
of as $n$-category $k{-}1$-sphere modules 
(generalizations of bimodules).
On the other hand, we can equally think of the $k$-morphisms as decorations on $k$-balls, 
and from this (official) point of view it is clear that they satisfy all of the axioms of an
$n{+}1$-category.
(All of the axioms for the less-than-$n{+}1$-dimensional part of an $n{+}1$-category, that is.)

\medskip

Next we define the $n{+}1$-morphisms of $\cS$.







\nn{...}

\medskip
\hrule
\medskip

\nn{to be continued...}
\medskip






Stuff that remains to be done (either below or in an appendix or in a separate section or in
a separate paper):
\begin{itemize}
\item spell out what difference (if any) Top vs PL vs Smooth makes
\item discuss Morita equivalence
\item morphisms of modules; show that it's adjoint to tensor product
(need to define dual module for this)
\item functors
\end{itemize}

\bigskip

\hrule
\nn{Some salvaged paragraphs that we might want to work back in:}
\bigskip

Appendix \ref{sec:comparing-A-infty} explains the translation between this definition of an $A_\infty$ $1$-category and the usual one expressed in terms of `associativity up to higher homotopy', as in \cite{MR1854636}. (In this version of the paper, that appendix is incomplete, however.)

The motivating example is `chains of maps to $M$' for some fixed target space $M$. This is a topological $A_\infty$ category $\Xi_M$ with $\Xi_M(J) = C_*(\Maps(J \to M))$. The gluing maps $\Xi_M(J) \tensor \Xi_M(J') \to \Xi_M(J \cup J')$  takes the product of singular chains, then glues maps to $M$ together; the associativity condition is automatically satisfied. The evaluation map $\ev_{J,J'} : \CD{J \to J'} \tensor \Xi_M(J) \to \Xi_M(J')$ is the composition
\begin{align*}
\CD{J \to J'} \tensor C_*(\Maps(J \to M)) & \to C_*(\Diff(J \to J') \times \Maps(J \to M)) \\ & \to C_*(\Maps(J' \to M)),
\end{align*}
where the first map is the product of singular chains, and the second is precomposition by the inverse of a diffeomorphism.

We now give two motivating examples, as theorems constructing other homological systems of fields,


\begin{thm}
For a fixed target space $X$, `chains of maps to $X$' is a homological system of fields $\Xi$, defined as
\begin{equation*}
\Xi(M) = \CM{M}{X}.
\end{equation*}
\end{thm}

\begin{thm}
Given an $n$-dimensional system of fields $\cF$, and a $k$-manifold $F$, there is an $n-k$ dimensional homological system of fields $\cF^{\times F}$ defined by
\begin{equation*}
\cF^{\times F}(M) = \cB_*(M \times F, \cF).
\end{equation*}
\end{thm}
We might suggestively write $\cF^{\times F}$ as  $\cB_*(F \times [0,1]^b, \cF)$, interpreting this as an (undefined!) $A_\infty$ $b$-category, and then as the resulting homological system of fields, following a recipe analogous to that given above for $A_\infty$ $1$-categories.


In later sections, we'll prove the following two unsurprising theorems, about the (as-yet-undefined) blob homology of these homological systems of fields.


\begin{thm}
\begin{equation*}
\cB_*(M, \Xi) \iso \Xi(M)
\end{equation*}
\end{thm}

\begin{thm}[Product formula]
Given a $b$-manifold $B$, an $f$-manifold $F$ and a $b+f$ dimensional system of fields,
there is a quasi-isomorphism
\begin{align*}
\cB_*(B \times F, \cF) & \quismto \cB_*(B, \cF^{\times F})
\end{align*}
\end{thm}

\begin{question}
Is it possible to compute the blob homology of a non-trivial bundle in terms of the blob homology of its fiber?
\end{question}

\hrule
