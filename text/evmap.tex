%!TEX root = ../blob1.tex

\section{Action of \texorpdfstring{$\CH{X}$}{C*(Homeo(M))}}
\label{sec:evaluation}

In this section we extend the action of homeomorphisms on $\bc_*(X)$
to an action of {\it families} of homeomorphisms.
That is, for each pair of homeomorphic manifolds $X$ and $Y$
we define a chain map
\[
    e_{XY} : CH_*(X, Y) \otimes \bc_*(X) \to \bc_*(Y) ,
\]
where $CH_*(X, Y) = C_*(\Homeo(X, Y))$, the singular chains on the space
of homeomorphisms from $X$ to $Y$.
(If $X$ and $Y$ have non-empty boundary, these families of homeomorphisms
are required to restrict to a fixed homeomorphism on the boundaries.)
These actions (for various $X$ and $Y$) are compatible with gluing.
See \S \ref{ss:emap-def} for a more precise statement.

The most convenient way to prove that maps $e_{XY}$ with the desired properties exist is to 
introduce a homotopy equivalent alternate version of the blob complex, $\btc_*(X)$,
which is more amenable to this sort of action.
Recall from Remark \ref{blobsset-remark} that blob diagrams
have the structure of a sort-of-simplicial set.
Blob diagrams can also be equipped with a natural topology, which converts this
sort-of-simplicial set into a sort-of-simplicial space.
Taking singular chains of this space we get $\btc_*(X)$.
The details are in \S \ref{ss:alt-def}.
We also prove a useful lemma (\ref{small-blobs-b}) which says that we can assume that
blobs are small with respect to any fixed open cover.



%Since $\bc_*(X)$ and $\btc_*(X)$ are homotopy equivalent one could try to construct
%the $CH_*$ actions directly in terms of $\bc_*(X)$.
%This was our original approach, but working out the details created a nearly unreadable mess.
%We have salvaged a sketch of that approach in \S \ref{ss:old-evmap-remnants}.
%
%\nn{should revisit above intro after this section is done}


\subsection{Alternative definitions of the blob complex}
\label{ss:alt-def}

\newcommand\sbc{\bc^{\cU}}

In this subsection we define a subcomplex (small blobs) and supercomplex (families of blobs)
of the blob complex, and show that they are both homotopy equivalent to $\bc_*(X)$.

\medskip

If $b$ is a blob diagram in $\bc_*(X)$, define the {\it support} of $b$, denoted
$\supp(b)$ or $|b|$, to be the union of the blobs of $b$.
%For a general $k$-chain $a\in \bc_k(X)$, define the support of $a$ to be the union
%of the supports of the blob diagrams which appear in it.
More generally, we say that a chain $a\in \bc_k(X)$ is supported on $S$ if
$a = a'\bullet r$, where $a'\in \bc_k(S)$ and $r\in \bc_0(X\setmin S)$.

Similarly, if $f: P\times X\to X$ is a family of homeomorphisms and $Y\sub X$, we say that $f$ is 
{\it supported on $Y$} if $f(p, x) = f(p', x)$ for all $x\in X\setmin Y$ and all $p,p'\in P$.
%Equivalently, $f = f'\bullet r$, where $f'\in CH_k(Y)$ and $r\in CH_0(X\setmin Y)$.
We will sometimes abuse language and talk about ``the" support of $f$,
again denoted $\supp(f)$ or $|f|$, to mean some particular choice of $Y$ such that
$f$ is supported on $Y$.

If $f: M \cup (Y\times I) \to M$ is a collaring homeomorphism
(cf. end of \S \ref{ss:syst-o-fields}),
we say that $f$ is supported on $S\sub M$ if $f(x) = x$ for all $x\in M\setmin S$.

\medskip

Fix $\cU$, an open cover of $X$.
Define the ``small blob complex" $\bc^{\cU}_*(M)$ to be the subcomplex of $\bc_*(X)$ 
of all blob diagrams in which every blob is contained in some open set of $\cU$, 
and moreover each field labeling a region cut out by the blobs is splittable 
into fields on smaller regions, each of which is contained in some open set of $\cU$.

\begin{lemma}[Small blobs] \label{small-blobs-b}  \label{thm:small-blobs}
The inclusion $i: \bc^{\cU}_*(M) \into \bc_*(M)$ is a homotopy equivalence.
\end{lemma}

\begin{proof}
It suffices to show that for any finitely generated pair of subcomplexes 
\[
	(C_*, D_*) \sub (\bc_*(X), \sbc_*(X))
\]
we can find a homotopy $h:C_*\to \bc_*(X)$ such that $h(D_*) \sub \sbc_*(X)$
and
\[
	h\bd(x) + \bd h(x) + x \in \sbc_*(X)
\]
for all $x\in C_*$.

For simplicity we will assume that all fields are splittable into small pieces, so that
$\sbc_0(X) = \bc_0$.
(This is true for all of the examples presented in this paper.)
Accordingly, we define $h_0 = 0$.

Next we define $h_1$.
Let $b\in C_1$ be a 1-blob diagram.
Let $B$ be the blob of $b$.
We will construct a 1-chain $s(b)\in \sbc_1$ such that $\bd(s(b)) = \bd b$
and the support of $s(b)$ is contained in $B$.
(If $B$ is not embedded in $X$, then we implicitly work in some term of a decomposition
of $X$ where $B$ is embedded.
See \ref{defn:configuration} and preceding discussion.)
It then follows from \ref{disj-union-contract} that we can choose
$h_1(b) \in \bc_1(X)$ such that $\bd(h_1(b)) = s(b) - b$.

Roughly speaking, $s(b)$ consists of a series of 1-blob diagrams implementing a series
of small collar maps, plus a shrunken version of $b$.
The composition of all the collar maps shrinks $B$ to a ball which is small with respect to $\cU$.

Let $\cV_1$ be an auxiliary open cover of $X$, subordinate to $\cU$ and 
also satisfying conditions specified below.
Let $b = (B, u, r)$, $u = \sum a_i$ be the label of $B$, $a_i\in \bc_0(B)$.
Choose a sequence of collar maps $\bar{f}_j:B\cup\text{collar}\to B$ satisfying conditions which we cannot express
until introducing more notation.
Let $f_j:B\to B$ be the restriction of $\bar{f}_j$ to $B$; $f_j$ maps $B$ homeomorphically to 
a slightly smaller submanifold of $B$.
Let $g_j = f_1\circ f_2\circ\cdots\circ f_j$.
Let $g$ be the last of the $g_j$'s.
Choose the sequence $\bar{f}_j$ so that 
$g(B)$ is contained is an open set of $\cV_1$ and
$g_{j-1}(|f_j|)$ is also contained is an open set of $\cV_1$.

There are 1-blob diagrams $c_{ij} \in \bc_1(B)$ such that $c_{ij}$ is compatible with $\cV_1$
(more specifically, $|c_{ij}| = g_{j-1}(|f_j|)$)
and $\bd c_{ij} = g_{j-1}(a_i) - g_{j}(a_i)$.
Define
\[
	s(b) = \sum_{i,j} c_{ij} + g(b)
\]
and choose $h_1(b) \in \bc_1(X)$ such that 
\[
	\bd(h_1(b)) = s(b) - b .
\]

Next we define $h_2$.
Let $b\in C_2$ be a 2-blob diagram.
Let $B = |b|$, either a ball or a union of two balls.
By possibly working in a decomposition of $X$, we may assume that the ball(s)
of $B$ are disjointly embedded.
We will construct a 2-chain $s(b)\in \sbc_2$ such that
\[
	\bd(s(b)) = \bd(h_1(\bd b) + b) = s(\bd b)
\]
and the support of $s(b)$ is contained in $B$.
It then follows from \ref{disj-union-contract} that we can choose
$h_2(b) \in \bc_2(X)$ such that $\bd(h_2(b)) = s(b) - b - h_1(\bd b)$.

Similarly to the construction of $h_1$ above, 
$s(b)$ consists of a series of 2-blob diagrams implementing a series
of small collar maps, plus a shrunken version of $b$.
The composition of all the collar maps shrinks $B$ to a sufficiently small 
disjoint union of balls.

Let $\cV_2$ be an auxiliary open cover of $X$, subordinate to $\cU$ and
also satisfying conditions specified below.
As before, choose a sequence of collar maps $f_j$ 
such that each has support
contained in an open set of $\cV_1$ and the composition of the corresponding collar homeomorphisms
yields an embedding $g:B\to B$ such that $g(B)$ is contained in an open set of $\cV_1$.
Let $g_j:B\to B$ be the embedding at the $j$-th stage.

Fix $j$.
We will construct a 2-chain $d_j$ such that $\bd d_j = g_{j-1}(s(\bd b)) - g_{j}(s(\bd b))$.
Let $s(\bd b) = \sum e_k$, and let $\{p_m\}$ be the 0-blob diagrams
appearing in the boundaries of the $e_k$.
As in the construction of $h_1$, we can choose 1-blob diagrams $q_m$ such that
$\bd q_m = g_{j-1}(p_m) - g_j(p_m)$ and $\supp(q_m)$ is contained in an open set of $\cV_1$.
If $x$ is a sum of $p_m$'s, we denote the corresponding sum of $q_m$'s by $q(x)$.

Now consider, for each $k$, $g_{j-1}(e_k) - q(\bd e_k)$.
This is a 1-chain whose boundary is $g_j(\bd e_k)$.
The support of $e_k$ is $g_{j-1}(V)$ for some $V\in \cV_1$, and
the support of $q(\bd e_k)$ is contained in a union $V'$ of finitely many open sets
of $\cV_1$, all of which contain the support of $f_j$.
We now reveal the mysterious condition (mentioned above) which $\cV_1$ satisfies:
the union of $g_{j-1}(V)$ and $V'$, for all of the finitely many instances
arising in the construction of $h_2$, lies inside a disjoint union of balls $U$
such that each individual ball lies in an open set of $\cV_2$.
(In this case there are either one or two balls in the disjoint union.)
For any fixed open cover $\cV_2$ this condition can be satisfied by choosing $\cV_1$ 
to be a sufficiently fine cover.
It follows from \ref{disj-union-contract} that we can choose 
$x_k \in \bc_2(X)$ with $\bd x_k = g_{j-1}(e_k) - g_j(e_k) - q(\bd e_k)$
and with $\supp(x_k) = U$.
We can now take $d_j \deq \sum x_k$.
It is clear that $\bd d_j = \sum (g_{j-1}(e_k) - g_j(e_k)) = g_{j-1}(s(\bd b)) - g_{j}(s(\bd b))$, as desired.
\nn{should maybe have figure}

We now define 
\[
	s(b) = \sum d_j + g(b),
\]
where $g$ is the composition of all the $f_j$'s.
It is easy to verify that $s(b) \in \sbc_2$, $\supp(s(b)) = \supp(b)$, and 
$\bd(s(b)) = s(\bd b)$.
If follows that we can choose $h_2(b)\in \bc_2(X)$ such that $\bd(h_2(b)) = s(b) - b - h_1(\bd b)$.
This completes the definition of $h_2$.

The general case $h_l$ is similar.
When constructing the analogue of $x_k$ above, we will need to find a disjoint union of balls $U$
which contains finitely many open sets from $\cV_{l-1}$
such that each ball is contained in some open set of $\cV_l$.
For sufficiently fine $\cV_{l-1}$ this will be possible.
Since $C_*$ is finite, the process terminates after finitely many, say $r$, steps.
We take $\cV_r = \cU$.

\nn{should probably be more specific at the end}
\end{proof}


\medskip

Next we define the sort-of-simplicial space version of the blob complex, $\btc_*(X)$.
First we must specify a topology on the set of $k$-blob diagrams, $\BD_k$.
We give $\BD_k$ the finest topology such that
\begin{itemize}
\item For any $b\in \BD_k$ the action map $\Homeo(X) \to \BD_k$, $f \mapsto f(b)$ is continuous.
\item The gluing maps $\BD_k(M)\to \BD_k(M\sgl)$ are continuous.
\item For balls $B$, the map $U(B) \to \BD_1(B)$, $u\mapsto (B, u, \emptyset)$, is continuous,
where $U(B) \sub \bc_0(B)$ inherits its topology from $\bc_0(B)$ and the topology on
$\bc_0(B)$ comes from the generating set $\BD_0(B)$.
\end{itemize}

We can summarize the above by saying that in the typical continuous family
$P\to \BD_k(M)$, $p\mapsto (B_i(p), u_i(p), r(p)$, $B_i(p)$ and $r(p)$ are induced by a map
$P\to \Homeo(M)$, with the twig blob labels $u_i(p)$ varying independently.
We note that while have no need to allow the blobs $B_i(p)$ to vary independently of the field $r(p)$,
if we did allow this it would not affect the truth of the claims we make below.
In particular, we would get a homotopy equivalent complex $\btc_*(M)$.

Next we define $\btc_*(X)$ to be the total complex of the double complex (denoted $\btc_{**}$) 
whose $(i,j)$ entry is $C_j(\BD_i)$, the singular $j$-chains on the space of $i$-blob diagrams.
The vertical boundary of the double complex,
denoted $\bd_t$, is the singular boundary, and the horizontal boundary, denoted $\bd_b$, is
the blob boundary.

We will regard $\bc_*(X)$ as the subcomplex $\btc_{*0}(X) \sub \btc_{**}(X)$.
The main result of this subsection is

\begin{lemma} \label{lem:bc-btc}
The inclusion $\bc_*(X) \sub \btc_*(X)$ is a homotopy equivalence
\end{lemma}

Before giving the proof we need a few preliminary results.

\begin{lemma} \label{bt-contract}
$\btc_*(B^n)$ is contractible (acyclic in positive degrees).
\end{lemma}
\begin{proof}
We will construct a contracting homotopy $h: \btc_*(B^n)\to \btc_*(B^n)$.

We will assume a splitting $s:H_0(\btc_*(B^n))\to \btc_0(B^n)$
of the quotient map $q:\btc_0(B^n)\to H_0(\btc_*(B^n))$.
Let $r = s\circ q$.

For $x\in \btc_{ij}$ with $i\ge 1$ define
\[
	h(x) = e(x) ,
\]
where
\[
	e: \btc_{ij}\to\btc_{i+1,j}
\]
adds an outermost blob, equal to all of $B^n$, to the $j$-parameter family of blob diagrams.

A generator $y\in \btc_{0j}$ is a map $y:P\to \BD_0$, where $P$ is some $j$-dimensional polyhedron.
We define $r(y)\in \btc_{0j}$ to be the constant function $r\circ y : P\to \BD_0$.
Let $c(r(y))\in \btc_{0,j+1}$ be the constant map from the cone of $P$ to $\BD_0$ taking
the same value (namely $r(y(p))$, for any $p\in P$).
Let $e(y - r(y)) \in \btc_{1j}$ denote the $j$-parameter family of 1-blob diagrams
whose value at $p\in P$ is the blob $B^n$ with label $y(p) - r(y(p))$.
Now define, for $y\in \btc_{0j}$,
\[
	h(y) = e(y - r(y)) + c(r(y)) .
\]
\nn{up to sign, at least}

We must now verify that $h$ does the job it was intended to do.
For $x\in \btc_{ij}$ with $i\ge 2$ we have
\nn{ignoring signs}
\begin{align*}
	\bd h(x) + h(\bd x) &= \bd(e(x)) + e(\bd x) \\
			&= \bd_b(e(x)) + \bd_t(e(x)) + e(\bd_b x) + e(\bd_t x) \\
			&= \bd_b(e(x)) + e(\bd_b x) \quad\quad\text{(since $\bd_t(e(x)) = e(\bd_t x)$)} \\
			&= x .
\end{align*}
For $x\in \btc_{1j}$ we have
\nn{ignoring signs}
\begin{align*}
	\bd h(x) + h(\bd x) &= \bd_b(e(x)) + \bd_t(e(x)) + e(\bd_b x - r(\bd_b x)) + c(r(\bd_b x)) + e(\bd_t x) \\
			&= \bd_b(e(x)) + e(\bd_b x) \quad\quad\text{(since $r(\bd_b x) = 0$)} \\
			&= x .
\end{align*}
For $x\in \btc_{0j}$ with $j\ge 1$ we have
\nn{ignoring signs}
\begin{align*}
	\bd h(x) + h(\bd x) &= \bd_b(e(x - r(x))) + \bd_t(e(x - r(x))) + \bd_t(c(r(x))) + 
											e(\bd_t x - r(\bd_t x)) + c(r(\bd_t x)) \\
			&= x - r(x) + \bd_t(c(r(x))) + c(r(\bd_t x)) \\
			&= x - r(x) + r(x) \\
			&= x.
\end{align*}
For $x\in \btc_{00}$ we have
\nn{ignoring signs}
\begin{align*}
	\bd h(x) + h(\bd x) &= \bd_b(e(x - r(x))) + \bd_t(c(r(x))) \\
			&= x - r(x) + r(x) - r(x)\\
			&= x - r(x).
\end{align*}
\end{proof}

\begin{lemma} \label{btc-prod}
For manifolds $X$ and $Y$, we have $\btc_*(X\du Y) \simeq \btc_*(X)\otimes\btc_*(Y)$.
\end{lemma}
\begin{proof}
This follows from the Eilenber-Zilber theorem and the fact that
\[
	\BD_k(X\du Y) \cong \coprod_{i+j=k} \BD_i(X)\times\BD_j(Y) .
\]
\end{proof}

For $S\sub X$, we say that $a\in \btc_k(X)$ is {\it supported on $S$}
if there exists $a'\in \btc_k(S)$
and $r\in \btc_0(X\setmin S)$ such that $a = a'\bullet r$.

\newcommand\sbtc{\btc^{\cU}}
Let $\cU$ be an open cover of $X$.
Let $\sbtc_*(X)\sub\btc_*(X)$ be the subcomplex generated by
$a\in \btc_*(X)$ such that there is a decomposition $X = \cup_i D_i$
such that each $D_i$ is a ball contained in some open set of $\cU$ and
$a$ is splittable along this decomposition.
In other words, $a$ can be obtained by gluing together pieces, each of which
is small with respect to $\cU$.

\begin{lemma} \label{small-top-blobs}
For any open cover $\cU$ of $X$, the inclusion $\sbtc_*(X)\sub\btc_*(X)$
is a homotopy equivalence.
\end{lemma}
\begin{proof}
This follows from a combination of Lemma \ref{extension_lemma_c} and the techniques of
the proof of Lemma \ref{small-blobs-b}.

It suffices to show that we can deform a finite subcomplex $C_*$ of $\btc_*(X)$ into $\sbtc_*(X)$
(relative to any designated subcomplex of $C_*$ already in $\sbtc_*(X)$).
The first step is to replace families of general blob diagrams with families that are 
small with respect to $\cU$.
This is done as in the proof of Lemma \ref{small-blobs-b}; the technique of the proof works in families.
Each such family is homotopic to a sum families which can be a ``lifted" to $\Homeo(X)$.
That is, $f:P \to \BD_k$ has the form $f(p) = g(p)(b)$ for some $g:P\to \Homeo(X)$ and $b\in \BD_k$.
(We are ignoring a complication related to twig blob labels, which might vary
independently of $g$, but this complication does not affect the conclusion we draw here.)
We now apply Lemma \ref{extension_lemma_c} to get families which are supported 
on balls $D_i$ contained in open sets of $\cU$.
\end{proof}


\begin{proof}[Proof of \ref{lem:bc-btc}]
Armed with the above lemmas, we can now proceed similarly to the proof of \ref{small-blobs-b}.

It suffices to show that for any finitely generated pair of subcomplexes 
$(C_*, D_*) \sub (\btc_*(X), \bc_*(X))$
we can find a homotopy $h:C_*\to \btc_*(X)$ such that $h(D_*) \sub \bc_*(X)$
and $x + h\bd(x) + \bd h(X) \in \bc_*(X)$ for all $x\in C_*$.

By Lemma \ref{small-top-blobs}, we may assume that $C_* \sub \btc_*^\cU(X)$ for some
cover $\cU$ of our choosing.
We choose $\cU$ fine enough so that each generator of $C_*$ is supported on a disjoint union of balls.
(This is possible since the original $C_*$ was finite and therefore had bounded dimension.)

Since $\bc_0(X) = \btc_0(X)$, we can take $h_0 = 0$.

Let $b \in C_1$ be a generator.
Since $b$ is supported in a disjoint union of balls,
we can find $s(b)\in \bc_1$ with $\bd (s(b)) = \bd b$
(by \ref{disj-union-contract}), and also $h_1(b) \in \btc_2$
such that $\bd (h_1(b)) = s(b) - b$
(by \ref{bt-contract} and \ref{btc-prod}).

Now let $b$ be a generator of $C_2$.
If $\cU$ is fine enough, there is a disjoint union of balls $V$
on which $b + h_1(\bd b)$ is supported.
Since $\bd(b + h_1(\bd b)) = s(\bd b) \in \bc_2$, we can find
$s(b)\in \bc_2$ with $\bd(s(b)) = \bd(b + h_1(\bd b))$ (by \ref{disj-union-contract}).
By \ref{bt-contract} and \ref{btc-prod}, we can now find
$h_2(b) \in \btc_3$, also supported on $V$, such that $\bd(h_2(b)) = s(b) - b - h_1(\bd b)$

The general case, $h_k$, is similar.
\end{proof}

The proof of \ref{lem:bc-btc} constructs a homotopy inverse to the inclusion
$\bc_*(X)\sub \btc_*(X)$.
One might ask for more: a contractible set of possible homotopy inverses, or at least an
$m$-connected set for arbitrarily large $m$.
The latter can be achieved with finer control over the various
choices of disjoint unions of balls in the above proofs, but we will not pursue this here.




\subsection{Action of \texorpdfstring{$\CH{X}$}{C*(Homeo(M))}}
\label{ss:emap-def}

Let $CH_*(X, Y)$ denote $C_*(\Homeo(X \to Y))$, the singular chain complex of
the space of homeomorphisms
between the $n$-manifolds $X$ and $Y$ 
(any given singular chain extends a fixed homeomorphism $\bd X \to \bd Y$).
We also will use the abbreviated notation $CH_*(X) \deq CH_*(X, X)$.
(For convenience, we will permit the singular cells generating $CH_*(X, Y)$ to be more general
than simplices --- they can be based on any linear polyhedron.)
\nn{be more restrictive here? (probably yes)  does more need to be said?}
\nn{this note about our non-standard should probably go earlier in the paper, maybe intro}

\begin{thm}  \label{thm:CH}
For $n$-manifolds $X$ and $Y$ there is a chain map
\eq{
    e_{XY} : CH_*(X, Y) \otimes \bc_*(X) \to \bc_*(Y) ,
}
well-defined up to homotopy,
such that
\begin{enumerate}
\item on $CH_0(X, Y) \otimes \bc_*(X)$ it agrees with the obvious action of 
$\Homeo(X, Y)$ on $\bc_*(X)$  described in Property (\ref{property:functoriality}), and
\item for any compatible splittings $X\to X\sgl$ and $Y\to Y\sgl$, 
the following diagram commutes up to homotopy
\begin{equation*}
\xymatrix@C+2cm{
      CH_*(X, Y) \otimes \bc_*(X)
        \ar[r]_(.6){e_{XY}}  \ar[d]^{\gl \otimes \gl}   &
            \bc_*(Y)\ar[d]^{\gl} \\
     CH_*(X\sgl, Y\sgl) \otimes \bc_*(X\sgl) \ar[r]_(.6){e_{X\sgl Y\sgl}}   & 	\bc_*(Y\sgl)  
}
\end{equation*}
\end{enumerate}
\end{thm}

\begin{proof}
In light of Lemma \ref{lem:bc-btc}, it suffices to prove the theorem with 
$\bc_*$ replaced by $\btc_*$.
And in fact for $\btc_*$ we get a sharper result: we can omit
the ``up to homotopy" qualifiers.

Let $f\in CH_k(X, Y)$, $f:P^k\to \Homeo(X \to Y)$ and $a\in \btc_{ij}(X)$, 
$a:Q^j \to \BD_i(X)$.
Define $e_{XY}(f\ot a)\in \btc_{i,j+k}(Y)$ by
\begin{align*}
	e_{XY}(f\ot a) : P\times Q &\to \BD_i(Y) \\
	(p,q) &\mapsto f(p)(a(q))  .
\end{align*}
It is clear that this agrees with the previously defined $CH_0(X, Y)$ action on $\btc_*$,
and it is also easy to see that the diagram in item 2 of the statement of the theorem
commutes on the nose.
\end{proof}


\begin{thm}
\label{thm:CH-associativity}
The $CH_*(X, Y)$ actions defined above are associative.
That is, the following diagram commutes up to homotopy:
\[ \xymatrix{
& CH_*(Y, Z) \ot \bc_*(Y) \ar[dr]^{e_{YZ}} & \\
CH_*(X, Y) \ot CH_*(Y, Z) \ot \bc_*(X) \ar[ur]^{e_{XY}\ot\id} \ar[dr]_{\mu\ot\id} & & \bc_*(Z) \\
& CH_*(X, Z) \ot \bc_*(X) \ar[ur]_{e_{XZ}} &
} \]
Here $\mu:CH_*(X, Y) \ot CH_*(Y, Z)\to CH_*(X, Z)$ is the map induced by composition
of homeomorphisms.
\end{thm}
\begin{proof}
The corresponding diagram for $\btc_*$ commutes on the nose.
\end{proof}







\noop{


\subsection{[older version still hanging around]}
\label{ss:old-evmap-remnants}

\nn{should comment at the start about any assumptions about smooth, PL etc.}

\nn{should maybe mention alternate def of blob complex (sort-of-simplicial space instead of
sort-of-simplicial set) where this action would be easy}

Let $CH_*(X, Y)$ denote $C_*(\Homeo(X \to Y))$, the singular chain complex of
the space of homeomorphisms
between the $n$-manifolds $X$ and $Y$ (any given singular chain extends a fixed homeomorphism $\bd X \to \bd Y$).
We also will use the abbreviated notation $CH_*(X) \deq CH_*(X, X)$.
(For convenience, we will permit the singular cells generating $CH_*(X, Y)$ to be more general
than simplices --- they can be based on any linear polyhedron.
\nn{be more restrictive here?  does more need to be said?})

\begin{thm}  \label{thm:CH}
For $n$-manifolds $X$ and $Y$ there is a chain map
\eq{
    e_{XY} : CH_*(X, Y) \otimes \bc_*(X) \to \bc_*(Y)
}
such that
\begin{enumerate}
\item on $CH_0(X, Y) \otimes \bc_*(X)$ it agrees with the obvious action of 
$\Homeo(X, Y)$ on $\bc_*(X)$  described in Property (\ref{property:functoriality}), and
\item for any compatible splittings $X\to X\sgl$ and $Y\to Y\sgl$, 
the following diagram commutes up to homotopy
\begin{equation*}
\xymatrix@C+2cm{
      CH_*(X, Y) \otimes \bc_*(X)
        \ar[r]_(.6){e_{XY}}  \ar[d]^{\gl \otimes \gl}   &
            \bc_*(Y)\ar[d]^{\gl} \\
     CH_*(X\sgl, Y\sgl) \otimes \bc_*(X\sgl) \ar[r]_(.6){e_{X\sgl Y\sgl}}   & 	\bc_*(Y\sgl)  
}
\end{equation*}
\end{enumerate}
Moreover, for any $m \geq 0$, we can find a family of chain maps $\{e_{XY}\}$ 
satisfying the above two conditions which is $m$-connected. In particular, this means that the choice of chain map above is unique up to homotopy.
\end{thm}
\begin{rem}
Note that the statement doesn't quite give uniqueness up to iterated homotopy. We fully expect that this should actually be the case, but haven't been able to prove this.
\end{rem}


Before giving the proof, we state the essential technical tool of Lemma \ref{extension_lemma}, 
and then give an outline of the method of proof.

Without loss of generality, we will assume $X = Y$.

\medskip

Let $f: P \times X \to X$ be a family of homeomorphisms (e.g. a generator of $CH_*(X)$)
and let $S \sub X$.
We say that {\it $f$ is supported on $S$} if $f(p, x) = f(q, x)$ for all
$x \notin S$ and $p, q \in P$. Equivalently, $f$ is supported on $S$ if 
there is a family of homeomorphisms $f' : P \times S \to S$ and a ``background"
homeomorphism $f_0 : X \to X$ so that
\begin{align*}
	f(p,s) & = f_0(f'(p,s)) \;\;\;\; \mbox{for}\; (p, s) \in P\times S \\
\intertext{and}
	f(p,x) & = f_0(x) \;\;\;\; \mbox{for}\; (p, x) \in {P \times (X \setmin S)}.
\end{align*}
Note that if $f$ is supported on $S$ then it is also supported on any $R \sup S$.
(So when we talk about ``the" support of a family, there is some ambiguity,
but this ambiguity will not matter to us.)

Let $\cU = \{U_\alpha\}$ be an open cover of $X$.
A $k$-parameter family of homeomorphisms $f: P \times X \to X$ is
{\it adapted to $\cU$} 
if the support of $f$ is contained in the union
of at most $k$ of the $U_\alpha$'s.

\begin{lemma}  \label{extension_lemma}
Let $x \in CH_k(X)$ be a singular chain such that $\bd x$ is adapted to $\cU$.
Then $x$ is homotopic (rel boundary) to some $x' \in CH_k(X)$ which is adapted to $\cU$.
Furthermore, one can choose the homotopy so that its support is equal to the support of $x$.
\end{lemma}

The proof will be given in \S\ref{sec:localising}.

\medskip

Before diving into the details, we outline our strategy for the proof of Theorem \ref{thm:CH}.
Let $p$ be a singular cell in $CH_k(X)$ and $b$ be a blob diagram in $\bc_*(X)$.
We say that $p\ot b$ is {\it localizable} if there exists $V \sub X$ such that
\begin{itemize}
\item $V$ is homeomorphic to a disjoint union of balls, and
\item $\supp(p) \cup \supp(b) \sub V$.
\end{itemize}
(Recall that $\supp(b)$ is defined to be the union of the blobs of the diagram $b$.)

Assuming that $p\ot b$ is localizable as above, 
let $W = X \setmin V$, $W' = p(W)$ and $V' = X\setmin W'$.
We then have a factorization 
\[
	p = \gl(q, r),
\]
where $q \in CH_k(V, V')$ and $r \in CH_0(W, W')$.
We can also factorize $b = \gl(b_V, b_W)$, where $b_V\in \bc_*(V)$ and $b_W\in\bc_0(W)$.
According to the commutative diagram of the proposition, we must have
\[
	e_X(p\otimes b) = e_X(\gl(q\otimes b_V, r\otimes b_W)) = 
				gl(e_{VV'}(q\otimes b_V), e_{WW'}(r\otimes b_W)) .
\]
Since $r$ is a  0-parameter family of homeomorphisms, we must have
\[
	e_{WW'}(r\otimes b_W) = r(b_W),
\]
where $r(b_W)$ denotes the obvious action of homeomorphisms on blob diagrams (in
this case a 0-blob diagram).
Since $V'$ is a disjoint union of balls, $\bc_*(V')$ is acyclic in degrees $>0$ 
(by Properties \ref{property:disjoint-union} and \ref{property:contractibility}).
Assuming inductively that we have already defined $e_{VV'}(\bd(q\otimes b_V))$,
there is, up to (iterated) homotopy, a unique choice for $e_{VV'}(q\otimes b_V)$
such that 
\[
	\bd(e_{VV'}(q\otimes b_V)) = e_{VV'}(\bd(q\otimes b_V)) .
\]

Thus the conditions of the proposition determine (up to homotopy) the evaluation
map for localizable generators $p\otimes b$.
On the other hand, Lemma \ref{extension_lemma} allows us to homotope 
arbitrary generators to sums of localizable generators.
This (roughly) establishes the uniqueness part of the proposition.
To show existence, we must show that the various choices involved in constructing
evaluation maps in this way affect the final answer only by a homotopy.

Now for a little more detail.
(But we're still just motivating the full, gory details, which will follow.)
Choose a metric on $X$, and let $\cU_\gamma$ be the open cover of $X$ by balls of radius $\gamma$.
By Lemma \ref{extension_lemma} we can restrict our attention to $k$-parameter families 
$p$ of homeomorphisms such that $\supp(p)$ is contained in the union of $k$ $\gamma$-balls.
For fixed blob diagram $b$ and fixed $k$, it's not hard to show that for $\gamma$ small enough
$p\ot b$ must be localizable.
On the other hand, for fixed $k$ and $\gamma$ there exist $p$ and $b$ such that $p\ot b$ is not localizable,
and for fixed $\gamma$ and $b$ there exist non-localizable $p\ot b$ for sufficiently large $k$.
Thus we will need to take an appropriate limit as $\gamma$ approaches zero.

The construction of $e_X$, as outlined above, depends on various choices, one of which 
is the choice, for each localizable generator $p\ot b$, 
of disjoint balls $V$ containing $\supp(p)\cup\supp(b)$.
Let $V'$ be another disjoint union of balls containing $\supp(p)\cup\supp(b)$,
and assume that there exists yet another disjoint union of balls $W$ containing 
$V\cup V'$.
Then we can use $W$ to construct a homotopy between the two versions of $e_X$ 
associated to $V$ and $V'$.
If we impose no constraints on $V$ and $V'$ then such a $W$ need not exist.
Thus we will insist below that $V$ (and $V'$) be contained in small metric neighborhoods
of $\supp(p)\cup\supp(b)$.
Because we want not mere homotopy uniqueness but iterated homotopy uniqueness,
we will similarly require that $W$ be contained in a slightly larger metric neighborhood of 
$\supp(p)\cup\supp(b)$, and so on.


\begin{proof}[Proof of Theorem \ref{thm:CH}.]
We'll use the notation $|b| = \supp(b)$ and $|p| = \supp(p)$.

Choose a metric on $X$.
Choose a monotone decreasing sequence of positive real numbers $\ep_i$ converging to zero
(e.g.\ $\ep_i = 2^{-i}$).
Choose another sequence of positive real numbers $\delta_i$ such that $\delta_i/\ep_i$
converges monotonically to zero (e.g.\ $\delta_i = \ep_i^2$).
Let $\phi_l$ be an increasing sequence of positive numbers
satisfying the inequalities of Lemma \ref{xx2phi} below.
Given a generator $p\otimes b$ of $CH_*(X)\otimes \bc_*(X)$ and non-negative integers $i$ and $l$
define
\[
	N_{i,l}(p\ot b) \deq \Nbd_{l\ep_i}(|b|) \cup \Nbd_{\phi_l\delta_i}(|p|).
\]
In other words, for each $i$
we use the metric to choose nested neighborhoods of $|b|\cup |p|$ (parameterized
by $l$), with $\ep_i$ controlling the size of the buffers around $|b|$ and $\delta_i$ controlling
the size of the buffers around $|p|$.

Next we define subcomplexes $G_*^{i,m} \sub CH_*(X)\otimes \bc_*(X)$.
Let $p\ot b$ be a generator of $CH_*(X)\otimes \bc_*(X)$ and let $k = \deg(p\ot b)
= \deg(p) + \deg(b)$.
We say $p\ot b$ is in $G_*^{i,m}$ exactly when either (a) $\deg(p) = 0$ or (b)
there exist codimension-zero submanifolds $V_0,\ldots,V_m \sub X$ such that each $V_j$
is homeomorphic to a disjoint union of balls and
\[
	N_{i,k}(p\ot b) \subeq V_0 \subeq N_{i,k+1}(p\ot b)
			\subeq V_1 \subeq \cdots \subeq V_m \subeq N_{i,k+m+1}(p\ot b) ,
\]
and further $\bd(p\ot b) \in G_*^{i,m}$.
We also require that $b$ is splitable (transverse) along the boundary of each $V_l$.

Note that $G_*^{i,m+1} \subeq G_*^{i,m}$.

As sketched above and explained in detail below, 
$G_*^{i,m}$ is a subcomplex where it is easy to define
the evaluation map.
The parameter $m$ controls the number of iterated homotopies we are able to construct
(see Lemma \ref{m_order_hty}).
The larger $i$ is (i.e.\ the smaller $\ep_i$ is), the better $G_*^{i,m}$ approximates all of
$CH_*(X)\ot \bc_*(X)$ (see Lemma \ref{Gim_approx}).

Next we define a chain map (dependent on some choices) $e_{i,m}: G_*^{i,m} \to \bc_*(X)$.
(When the domain is clear from context we will drop the subscripts and write
simply  $e: G_*^{i,m} \to \bc_*(X)$).
Let $p\ot b \in G_*^{i,m}$.
If $\deg(p) = 0$, define
\[
	e(p\ot b) = p(b) ,
\]
where $p(b)$ denotes the obvious action of the homeomorphism(s) $p$ on the blob diagram $b$.
For general $p\ot b$ ($\deg(p) \ge 1$) assume inductively that we have already defined
$e(p'\ot b')$ when $\deg(p') + \deg(b') < k = \deg(p) + \deg(b)$.
Choose $V = V_0$ as above so that 
\[
	N_{i,k}(p\ot b) \subeq V \subeq N_{i,k+1}(p\ot b) .
\]
Let $\bd(p\ot b) = \sum_j p_j\ot b_j$, and let $V^j$ be the choice of neighborhood
of $|p_j|\cup |b_j|$ made at the preceding stage of the induction.
For all $j$, 
\[
	V^j \subeq N_{i,k}(p_j\ot b_j) \subeq N_{i,k}(p\ot b) \subeq V .
\]
(The second inclusion uses the facts that $|p_j| \subeq |p|$ and $|b_j| \subeq |b|$.)
We therefore have splittings
\[
	p = p'\bullet p'' , \;\; b = b'\bullet b'' , \;\; e(\bd(p\ot b)) = f'\bullet f'' ,
\]
where $p' \in CH_*(V)$, $p'' \in CH_*(X\setmin V)$, 
$b' \in \bc_*(V)$, $b'' \in \bc_*(X\setmin V)$, 
$f' \in \bc_*(p(V))$, and $f'' \in \bc_*(p(X\setmin V))$.
(Note that since the family of homeomorphisms $p$ is constant (independent of parameters)
near $\bd V$, the expressions $p(V) \sub X$ and $p(X\setmin V) \sub X$ are
unambiguous.)
We have $\deg(p'') = 0$ and, inductively, $f'' = p''(b'')$.
%We also have that $\deg(b'') = 0 = \deg(p'')$.
Choose $x' \in \bc_*(p(V))$ such that $\bd x' = f'$.
This is possible by Properties \ref{property:disjoint-union} and \ref{property:contractibility}  and the fact that isotopic fields
differ by a local relation.
Finally, define
\[
	e(p\ot b) \deq x' \bullet p''(b'') .
\]

Note that above we are essentially using the method of acyclic models \nn{\S \ref{sec:moam}}.
For each generator $p\ot b$ we specify the acyclic (in positive degrees) 
target complex $\bc_*(p(V)) \bullet p''(b'')$.

The definition of $e: G_*^{i,m} \to \bc_*(X)$ depends on two sets of choices:
The choice of neighborhoods $V$ and the choice of inverse boundaries $x'$.
The next lemma shows that up to (iterated) homotopy $e$ is independent
of these choices.
(Note that independence of choices of $x'$ (for fixed choices of $V$)
is a standard result in the method of acyclic models.)

%\begin{lemma}
%Let $\tilde{e} :  G_*^{i,m} \to \bc_*(X)$ be a chain map constructed like $e$ above, but with
%different choices of $x'$ at each step.
%(Same choice of $V$ at each step.)
%Then $e$ and $\tilde{e}$ are homotopic via a homotopy in $\bc_*(p(V)) \bullet p''(b'')$.
%Any two choices of such a first-order homotopy are second-order homotopic, and so on, 
%to arbitrary order.
%\end{lemma}

%\begin{proof}
%This is a standard result in the method of acyclic models.
%\nn{should we say more here?}
%\nn{maybe this lemma should be subsumed into the next lemma.  probably it should.}
%\end{proof}

\begin{lemma} \label{m_order_hty}
Let $\tilde{e} :  G_*^{i,m} \to \bc_*(X)$ be a chain map constructed like $e$ above, but with
different choices of $V$ (and hence also different choices of $x'$) at each step.
If $m \ge 1$ then $e$ and $\tilde{e}$ are homotopic.
If $m \ge 2$ then any two choices of this first-order homotopy are second-order homotopic.
Continuing, $e :  G_*^{i,m} \to \bc_*(X)$ is well-defined up to $m$-th order homotopy.
\end{lemma}

\begin{proof}
We construct $h: G_*^{i,m} \to \bc_*(X)$ such that $\bd h + h\bd = e - \tilde{e}$.
The chain maps $e$ and $\tilde{e}$ coincide on bidegrees $(0, j)$, so define $h$
to be zero there.
Assume inductively that $h$ has been defined for degrees less than $k$.
Let $p\ot b$ be a generator of degree $k$.
Choose $V_1$ as in the definition of $G_*^{i,m}$ so that
\[
	N_{i,k+1}(p\ot b) \subeq V_1 \subeq N_{i,k+2}(p\ot b) .
\]
There are splittings
\[
	p = p'_1\bullet p''_1 , \;\; b = b'_1\bullet b''_1 , 
			\;\; e(p\ot b) - \tilde{e}(p\ot b) - h(\bd(p\ot b)) = f'_1\bullet f''_1 ,
\]
where $p'_1 \in CH_*(V_1)$, $p''_1 \in CH_*(X\setmin V_1)$, 
$b'_1 \in \bc_*(V_1)$, $b''_1 \in \bc_*(X\setmin V_1)$, 
$f'_1 \in \bc_*(p(V_1))$, and $f''_1 \in \bc_*(p(X\setmin V_1))$.
Inductively, $\bd f'_1 = 0$ and $f_1'' = p_1''(b_1'')$.
Choose $x'_1 \in \bc_*(p(V_1))$ so that $\bd x'_1 = f'_1$.
Define 
\[
	h(p\ot b) \deq x'_1 \bullet p''_1(b''_1) .
\]
This completes the construction of the first-order homotopy when $m \ge 1$.

The $j$-th order homotopy is constructed similarly, with $V_j$ replacing $V_1$ above.
\end{proof}

Note that on $G_*^{i,m+1} \subeq G_*^{i,m}$, we have defined two maps,
$e_{i,m}$ and $e_{i,m+1}$.
An easy variation on the above lemma shows that 
the restrictions of $e_{i,m}$ and $e_{i,m+1}$ to $G_*^{i,m+1}$ are $m$-th 
order homotopic.

Next we show how to homotope chains in $CH_*(X)\ot \bc_*(X)$ to one of the 
$G_*^{i,m}$.
Choose a monotone decreasing sequence of real numbers $\gamma_j$ converging to zero.
Let $\cU_j$ denote the open cover of $X$ by balls of radius $\gamma_j$.
Let $h_j: CH_*(X)\to CH_*(X)$ be a chain map homotopic to the identity whose image is 
spanned by families of homeomorphisms with support compatible with $\cU_j$, 
as described in Lemma \ref{extension_lemma}.
Recall that $h_j$ and also the homotopy connecting it to the identity do not increase
supports.
Define
\[
	g_j \deq h_j\circ h_{j-1} \circ \cdots \circ h_1 .
\]
The next lemma says that for all generators $p\ot b$ we can choose $j$ large enough so that
$g_j(p)\ot b$ lies in $G_*^{i,m}$, for arbitrary $m$ and sufficiently large $i$ 
(depending on $b$, $\deg(p)$ and $m$).
%(Note: Don't confuse this $n$ with the top dimension $n$ used elsewhere in this paper.)

\begin{lemma} \label{Gim_approx}
Fix a blob diagram $b$, a homotopy order $m$ and a degree $n$ for $CH_*(X)$.
Then there exists a constant $k_{bmn}$ such that for all $i \ge k_{bmn}$
there exists another constant $j_{ibmn}$ such that for all $j \ge j_{ibmn}$ and all $p\in CH_n(X)$ 
we have $g_j(p)\ot b \in G_*^{i,m}$.
\end{lemma}

For convenience we also define $k_{bmp} = k_{bmn}$
and $j_{ibmp} = j_{ibmn}$ where $n=\deg(p)$.
Note that we may assume that
\[
	k_{bmp} \ge k_{alq}
\]
for all $l\ge m$ and all $q\ot a$ which appear in the boundary of $p\ot b$.
Additionally, we may assume that
\[
	j_{ibmp} \ge j_{ialq}
\]
for all $l\ge m$ and all $q\ot a$ which appear in the boundary of $p\ot b$.


\begin{proof}

There exists $\lambda > 0$ such that for every  subset $c$ of the blobs of $b$ the set $\Nbd_u(c)$ is homeomorphic to $|c|$ for all $u < \lambda$ .
(Here we are using the fact that the blobs are 
piecewise smooth or piecewise-linear and that $\bd c$ is collared.)
We need to consider all such $c$ because all generators appearing in
iterated boundaries of $p\ot b$ must be in $G_*^{i,m}$.)

Let $r = \deg(b)$ and 
\[
	t = r+n+m+1 = \deg(p\ot b) + m + 1.
\]

Choose $k = k_{bmn}$ such that
\[
	t\ep_k < \lambda
\]
and
\[
	n\cdot (2 (\phi_t + 1) \delta_k) < \ep_k .
\]
Let $i \ge k_{bmn}$.
Choose $j = j_i$ so that
\[
	\gamma_j < \delta_i
\]
and also so that $\phi_t \gamma_j$ is less than the constant $\rho(M)$ of Lemma \ref{xxzz11}.

Let $j \ge j_i$ and $p\in CH_n(X)$.
Let $q$ be a generator appearing in $g_j(p)$.
Note that $|q|$ is contained in a union of $n$ elements of the cover $\cU_j$,
which implies that $|q|$ is contained in a union of $n$ metric balls of radius $\delta_i$.
We must show that $q\ot b \in G_*^{i,m}$, which means finding neighborhoods
$V_0,\ldots,V_m \sub X$ of $|q|\cup |b|$ such that each $V_j$
is homeomorphic to a disjoint union of balls and
\[
	N_{i,n}(q\ot b) \subeq V_0 \subeq N_{i,n+1}(q\ot b)
			\subeq V_1 \subeq \cdots \subeq V_m \subeq N_{i,t}(q\ot b) .
\]
Recall that
\[
	N_{i,a}(q\ot b) \deq \Nbd_{a\ep_i}(|b|) \cup \Nbd_{\phi_a\delta_i}(|q|).
\]
By repeated applications of Lemma \ref{xx2phi} we can find neighborhoods $U_0,\ldots,U_m$
of $|q|$, each homeomorphic to a disjoint union of balls, with
\[
	\Nbd_{\phi_{n+l} \delta_i}(|q|) \subeq U_l \subeq \Nbd_{\phi_{n+l+1} \delta_i}(|q|) .
\]
The inequalities above guarantee that 
for each $0\le l\le m$ we can find $u_l$ with 
\[
	(n+l)\ep_i \le u_l \le (n+l+1)\ep_i
\]
such that each component of $U_l$ is either disjoint from $\Nbd_{u_l}(|b|)$ or contained in 
$\Nbd_{u_l}(|b|)$.
This is because there are at most $n$ components of $U_l$, and each component
has radius $\le (\phi_t + 1) \delta_i$.
It follows that
\[
	V_l \deq \Nbd_{u_l}(|b|) \cup U_l
\]
is homeomorphic to a disjoint union of balls and satisfies
\[
	N_{i,n+l}(q\ot b) \subeq V_l \subeq N_{i,n+l+1}(q\ot b) .
\]

The same argument shows that each generator involved in iterated boundaries of $q\ot b$
is in $G_*^{i,m}$.
\end{proof}

In the next three lemmas, which provide the estimates needed above, we have made no effort to optimize the various bounds.
(The bounds are, however, optimal in the sense of minimizing the amount of work
we do.  Equivalently, they are the first bounds we thought of.)

We say that a subset $S$ of a metric space has radius $\le r$ if $S$ is contained in
some metric ball of radius $r$.

\begin{lemma}
Let $S \sub \ebb^n$ (Euclidean $n$-space) have radius $\le r$.  
Then $\Nbd_a(S)$ is homeomorphic to a ball for $a \ge 2r$.
\end{lemma}

\begin{proof} \label{xxyy2}
Let $S$ be contained in $B_r(y)$, $y \in \ebb^n$.
Note that if $a \ge 2r$ then $\Nbd_a(S) \sup B_r(y)$.
Let $z\in \Nbd_a(S) \setmin B_r(y)$.
Consider the triangle
with vertices $z$, $y$ and $s$ with $s\in S$ such that $z \in B_a(s)$.
The length of the edge $yz$ is greater than $r$ which is greater
than the length of the edge $ys$.
It follows that the angle at $z$ is less than $\pi/2$ (less than $\pi/3$, in fact),
which means that points on the edge $yz$ near $z$ are closer to $s$ than $z$ is,
which implies that these points are also in $\Nbd_a(S)$.
Hence $\Nbd_a(S)$ is star-shaped with respect to $y$.
\end{proof}

If we replace $\ebb^n$ above with an arbitrary compact Riemannian manifold $M$,
the same result holds, so long as $a$ is not too large:
\nn{replace this with a PL version}

\begin{lemma} \label{xxzz11}
Let $M$ be a compact Riemannian manifold.
Then there is a constant $\rho(M)$ such that for all
subsets $S\sub M$ of radius $\le r$ and all $a$ such that $2r \le a \le \rho(M)$,
$\Nbd_a(S)$ is homeomorphic to a ball.
\end{lemma}

\begin{proof}
Choose $\rho = \rho(M)$ such that $3\rho/2$ is less than the radius of injectivity of $M$,
and also so that for any point $y\in M$ the geodesic coordinates of radius $3\rho/2$ around
$y$ distort angles by only a small amount.
Now the argument of the previous lemma works.
\end{proof}



\begin{lemma} \label{xx2phi}
Let $S \sub M$ be contained in a union (not necessarily disjoint)
of $k$ metric balls of radius $r$.
Let $\phi_1, \phi_2, \ldots$ be an increasing sequence of real numbers satisfying
$\phi_1 \ge 2$ and $\phi_{i+1} \ge \phi_i(2\phi_i + 2) + \phi_i$.
For convenience, let $\phi_0 = 0$.
Assume also that $\phi_k r \le \rho(M)$,
where $\rho(M)$ is as in Lemma \ref{xxzz11}.
Then there exists a neighborhood $U$ of $S$,
homeomorphic to a disjoint union of balls, such that
\[
	\Nbd_{\phi_{k-1} r}(S) \subeq U \subeq \Nbd_{\phi_k r}(S) .
\]
\end{lemma}

\begin{proof}
For $k=1$ this follows from Lemma \ref{xxzz11}.
Assume inductively that it holds for $k-1$.
Partition $S$ into $k$ disjoint subsets $S_1,\ldots,S_k$, each of radius $\le r$.
By Lemma \ref{xxzz11}, each $\Nbd_{\phi_{k-1} r}(S_i)$ is homeomorphic to a ball.
If these balls are disjoint, let $U$ be their union.
Otherwise, assume WLOG that $S_{k-1}$ and $S_k$ are distance less than $2\phi_{k-1}r$ apart.
Let $R_i = \Nbd_{\phi_{k-1} r}(S_i)$ for $i = 1,\ldots,k-2$ 
and $R_{k-1} = \Nbd_{\phi_{k-1} r}(S_{k-1})\cup \Nbd_{\phi_{k-1} r}(S_k)$.
Each $R_i$ is contained in a metric ball of radius $r' \deq (2\phi_{k-1}+2)r$.
Note that the defining inequality of the $\phi_i$ guarantees that
\[
	\phi_{k-1}r' = \phi_{k-1}(2\phi_{k-1}+2)r \le \phi_k r \le \rho(M) .
\]
By induction, there is a neighborhood $U$ of $R \deq \bigcup_i R_i$, 
homeomorphic to a disjoint union
of balls, and such that
\[
	U \subeq \Nbd_{\phi_{k-1}r'}(R) = \Nbd_{t}(S) \subeq \Nbd_{\phi_k r}(S) ,
\]
where $t = \phi_{k-1}(2\phi_{k-1}+2)r + \phi_{k-1} r$.
\end{proof}


We now return to defining the chain maps $e_X$.


Let $R_*$ be the chain complex with a generating 0-chain for each non-negative
integer and a generating 1-chain connecting each adjacent pair $(j, j+1)$.
(So $R_*$ is a simplicial version of the non-negative reals.)
Denote the 0-chains by $j$ (for $j$ a non-negative integer) and the 1-chain connecting $j$ and $j+1$
by $\iota_j$.
Define a map (homotopy equivalence)
\[
	\sigma: R_*\ot CH_*(X, X) \otimes \bc_*(X) \to CH_*(X, X)\ot \bc_*(X)
\]
as follows.
On $R_0\ot CH_*(X, X) \otimes \bc_*(X)$ we define
\[
	\sigma(j\ot p\ot b) = g_j(p)\ot b .
\]
On $R_1\ot CH_*(X, X) \otimes \bc_*(X)$ we define
\[
	\sigma(\iota_j\ot p\ot b) = f_j(p)\ot b ,
\]
where $f_j$ is the homotopy from $g_j$ to $g_{j+1}$.

Next we specify subcomplexes $G^m_* \sub R_*\ot CH_*(X, X) \otimes \bc_*(X)$ on which we will eventually
define a version of the action map $e_X$.
A generator $j\ot p\ot b$ is defined to be in $G^m_*$ if $j\ge j_{kbmp}$, where
$k = k_{bmp}$ is the constant from Lemma \ref{Gim_approx}.
Similarly $\iota_j\ot p\ot b$ is in $G^m_*$ if $j\ge j_{kbmp}$.
The inequality following Lemma \ref{Gim_approx} guarantees that $G^m_*$ is indeed a subcomplex
and that $G^m_* \sup G^{m+1}_*$.

It is easy to see that each $G^m_*$ is homotopy equivalent (via the inclusion map) 
to $R_*\ot CH_*(X, X) \otimes \bc_*(X)$
and hence to $CH_*(X, X) \otimes \bc_*(X)$, and furthermore that the homotopies are well-defined
up to a contractible set of choices.

Next we define a map
\[
	e_m : G^m_* \to \bc_*(X) .
\]
Let $p\ot b$ be a generator of $G^m_*$.
Each $g_j(p)\ot b$ or $f_j(p)\ot b$ is a linear combination of generators $q\ot c$,
where $\supp(q)\cup\supp(c)$ is contained in a disjoint union of balls satisfying 
various conditions specified above.
As in the construction of the maps $e_{i,m}$ above,
it suffices to specify for each such $q\ot c$ a disjoint union of balls
$V_{qc} \sup \supp(q)\cup\supp(c)$, such that $V_{qc} \sup V_{q'c'}$
whenever $q'\ot c'$ appears in the boundary of $q\ot c$.

Let $q\ot c$ be a summand of $g_j(p)\ot b$, as above.
Let $i$ be maximal such that $j\ge j_{ibmp}$
(notation as in Lemma \ref{Gim_approx}).
Then $q\ot c \in G^{i,m}_*$ and we choose $V_{qc} \sup \supp(q)\cup\supp(c)$
such that 
\[
	N_{i,d}(q\ot c) \subeq V_{qc} \subeq N_{i,d+1}(q\ot c) ,
\]
where $d = \deg(q\ot c)$.
Let $\tilde q = f_j(q)$.
The summands of $f_j(p)\ot b$ have the form $\tilde q \ot c$, 
where $q\ot c$ is a summand of $g_j(p)\ot b$.
Since the homotopy $f_j$ does not increase supports, we also have that
\[
	V_{qc} \sup \supp(\tilde q) \cup \supp(c) .
\]
So we define $V_{\tilde qc} = V_{qc}$.

It is now easy to check that we have $V_{qc} \sup V_{q'c'}$
whenever $q'\ot c'$ appears in the boundary of $q\ot c$.
As in the construction of the maps $e_{i,m}$ above,
this allows us to construct a map
\[
	e_m : G^m_* \to \bc_*(X) 
\]
which is well-defined up to homotopy.
As in the proof of Lemma \ref{m_order_hty}, we can show that the map is well-defined up
to $m$-th order homotopy.
Put another way, we have specified an $m$-connected subcomplex of the complex of
all maps $G^m_* \to \bc_*(X)$.
On $G^{m+1}_* \sub G^m_*$ we have defined two maps, $e_m$ and $e_{m+1}$.
One can similarly (to the proof of Lemma \ref{m_order_hty}) show that 
these two maps agree up to $m$-th order homotopy.
More precisely, one can show that the subcomplex of maps containing the various
$e_{m+1}$ candidates is contained in the corresponding subcomplex for $e_m$.

\medskip

Next we show that the action maps are compatible with gluing.
Let $G^m_*$ and $\ol{G}^m_*$ be the complexes, as above, used for defining
the action maps $e_{X\sgl}$ and $e_X$.
The gluing map $X\sgl\to X$ induces a map
\[
	\gl:  R_*\ot CH_*(X, X) \otimes \bc_*(X)  \to R_*\ot CH_*(X\sgl, X \sgl) \otimes \bc_*(X \sgl) ,
\]
and it is easy to see that $\gl(G^m_*)\sub \ol{G}^m_*$.
From this it follows that the diagram in the statement of Theorem \ref{thm:CH} commutes.

\todo{this paragraph isn't very convincing, or at least I don't see what's going on}
Finally we show that the action maps defined above are independent of
the choice of metric (up to iterated homotopy).
The arguments are very similar to ones given above, so we only sketch them.
Let $g$ and $g'$ be two metrics on $X$, and let $e$ and $e'$ be the corresponding
actions $CH_*(X, X) \ot \bc_*(X)\to\bc_*(X)$.
We must show that $e$ and $e'$ are homotopic.
As outlined in the discussion preceding this proof,
this follows from the facts that both $e$ and $e'$ are compatible
with gluing and that $\bc_*(B^n)$ is contractible.
As above, we define a subcomplex $F_*\sub  CH_*(X, X) \ot \bc_*(X)$ generated
by $p\ot b$ such that $|p|\cup|b|$ is contained in a disjoint union of balls.
Using acyclic models, we can construct a homotopy from $e$ to $e'$ on $F_*$.
We now observe that $CH_*(X, X) \ot \bc_*(X)$ retracts to $F_*$.
Similar arguments show that this homotopy from $e$ to $e'$ is well-defined
up to second order homotopy, and so on.

This completes the proof of Theorem \ref{thm:CH}.
\end{proof}


\begin{rem*}
\label{rem:for-small-blobs}
For the proof of Lemma \ref{lem:CH-small-blobs} below we will need the following observation on the action constructed above.
Let $b$ be a blob diagram and $p:P\times X\to X$ be a family of homeomorphisms.
Then we may choose $e$ such that $e(p\ot b)$ is a sum of generators, each
of which has support close to $p(t,|b|)$ for some $t\in P$.
More precisely, the support of the generators is contained in the union of a small neighborhood
of $p(t,|b|)$ with some small balls.
(Here ``small" is in terms of the metric on $X$ that we chose to construct $e$.)
\end{rem*}


\begin{thm}
\label{thm:CH-associativity}
The $CH_*(X, Y)$ actions defined above are associative.
That is, the following diagram commutes up to homotopy:
\[ \xymatrix{
& CH_*(Y, Z) \ot \bc_*(Y) \ar[dr]^{e_{YZ}} & \\
CH_*(X, Y) \ot CH_*(Y, Z) \ot \bc_*(X) \ar[ur]^{e_{XY}\ot\id} \ar[dr]_{\mu\ot\id} & & \bc_*(Z) \\
& CH_*(X, Z) \ot \bc_*(X) \ar[ur]_{e_{XZ}} &
} \]
Here $\mu:CH_*(X, Y) \ot CH_*(Y, Z)\to CH_*(X, Z)$ is the map induced by composition
of homeomorphisms.
\end{thm}

\begin{proof}
The strategy of the proof is similar to that of Theorem \ref{thm:CH}.
We will identify a subcomplex 
\[
	G_* \sub CH_*(X, Y) \ot CH_*(Y, Z) \ot \bc_*(X)
\]
where it is easy to see that the two sides of the diagram are homotopic, then 
show that there is a deformation retraction of $CH_*(X, Y) \ot CH_*(Y, Z) \ot \bc_*(X)$ into $G_*$.

Let $p\ot q\ot b$ be a generator of $CH_*(X, Y) \ot CH_*(Y, Z) \ot \bc_*(X)$.
By definition, $p\ot q\ot b\in G_*$ if there is a disjoint union of balls in $X$ which
contains $|p| \cup p\inv(|q|) \cup |b|$.
(If $p:P\times X\to Y$, then $p\inv(|q|)$ means the union over all $x\in P$ of 
$p(x, \cdot)\inv(|q|)$.)

As in the proof of Theorem \ref{thm:CH}, we can construct a homotopy 
between the upper and lower maps restricted to $G_*$.
This uses the facts that the maps agree on $CH_0(X, Y) \ot CH_0(Y, Z) \ot \bc_*(X)$,
that they are compatible with gluing, and the contractibility of $\bc_*(X)$.

We can now apply Lemma \ref{extension_lemma_c}, using a series of increasingly fine covers, 
to construct a deformation retraction of $CH_*(X, Y) \ot CH_*(Y, Z) \ot \bc_*(X)$ into $G_*$.
\end{proof}

} % end \noop
