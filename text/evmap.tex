%!TEX root = ../blob1.tex

\section{Action of \texorpdfstring{$\CH{X}$}{$C_*(Homeo(M))$}}
\label{sec:evaluation}

\nn{should comment at the start about any assumptions about smooth, PL etc.}

\nn{should maybe mention alternate def of blob complex (sort-of-simplicial space instead of
sort-of-simplicial set) where this action would be easy}

Let $CH_*(X, Y)$ denote $C_*(\Homeo(X \to Y))$, the singular chain complex of
the space of homeomorphisms
between the $n$-manifolds $X$ and $Y$ (any given singular chain extends a fixed homeomorphism $\bd X \to \bd Y$).
We also will use the abbreviated notation $CH_*(X) \deq CH_*(X, X)$.
(For convenience, we will permit the singular cells generating $CH_*(X, Y)$ to be more general
than simplices --- they can be based on any linear polyhedron.
\nn{be more restrictive here?  does more need to be said?})

\begin{thm}  \label{thm:CH}
For $n$-manifolds $X$ and $Y$ there is a chain map
\eq{
    e_{XY} : CH_*(X, Y) \otimes \bc_*(X) \to \bc_*(Y)
}
such that
\begin{enumerate}
\item on $CH_0(X, Y) \otimes \bc_*(X)$ it agrees with the obvious action of 
$\Homeo(X, Y)$ on $\bc_*(X)$  described in Property (\ref{property:functoriality}), and
\item for any compatible splittings $X\to X\sgl$ and $Y\to Y\sgl$, 
the following diagram commutes up to homotopy
\begin{equation*}
\xymatrix@C+2cm{
      CH_*(X, Y) \otimes \bc_*(X)
        \ar[r]_(.6){e_{XY}}  \ar[d]^{\gl \otimes \gl}   &
            \bc_*(Y)\ar[d]^{\gl} \\
     CH_*(X\sgl, Y\sgl) \otimes \bc_*(X\sgl) \ar[r]_(.6){e_{X\sgl Y\sgl}}   & 	\bc_*(Y\sgl)  
}
\end{equation*}
\end{enumerate}
Moreover, for any $m \geq 0$, we can find a family of chain maps $\{e_{XY}\}$ 
satisfying the above two conditions which is $m$-connected. In particular, this means that the choice of chain map above is unique up to homotopy.
\end{thm}
\begin{rem}
Note that the statement doesn't quite give uniqueness up to iterated homotopy. We fully expect that this should actually be the case, but haven't been able to prove this.
\end{rem}


Before giving the proof, we state the essential technical tool of Lemma \ref{extension_lemma}, 
and then give an outline of the method of proof.

Without loss of generality, we will assume $X = Y$.

\medskip

Let $f: P \times X \to X$ be a family of homeomorphisms (e.g. a generator of $CH_*(X)$)
and let $S \sub X$.
We say that {\it $f$ is supported on $S$} if $f(p, x) = f(q, x)$ for all
$x \notin S$ and $p, q \in P$. Equivalently, $f$ is supported on $S$ if 
there is a family of homeomorphisms $f' : P \times S \to S$ and a ``background"
homeomorphism $f_0 : X \to X$ so that
\begin{align*}
	f(p,s) & = f_0(f'(p,s)) \;\;\;\; \mbox{for}\; (p, s) \in P\times S \\
\intertext{and}
	f(p,x) & = f_0(x) \;\;\;\; \mbox{for}\; (p, x) \in {P \times (X \setmin S)}.
\end{align*}
Note that if $f$ is supported on $S$ then it is also supported on any $R \sup S$.
(So when we talk about ``the" support of a family, there is some ambiguity,
but this ambiguity will not matter to us.)

Let $\cU = \{U_\alpha\}$ be an open cover of $X$.
A $k$-parameter family of homeomorphisms $f: P \times X \to X$ is
{\it adapted to $\cU$} 
if the support of $f$ is contained in the union
of at most $k$ of the $U_\alpha$'s.

\begin{lemma}  \label{extension_lemma}
Let $x \in CH_k(X)$ be a singular chain such that $\bd x$ is adapted to $\cU$.
Then $x$ is homotopic (rel boundary) to some $x' \in CH_k(X)$ which is adapted to $\cU$.
Furthermore, one can choose the homotopy so that its support is equal to the support of $x$.
\end{lemma}

The proof will be given in \S\ref{sec:localising}.

\medskip

Before diving into the details, we outline our strategy for the proof of Theorem \ref{thm:CH}.
Let $p$ be a singular cell in $CH_k(X)$ and $b$ be a blob diagram in $\bc_*(X)$.
We say that $p\ot b$ is {\it localizable} if there exists $V \sub X$ such that
\begin{itemize}
\item $V$ is homeomorphic to a disjoint union of balls, and
\item $\supp(p) \cup \supp(b) \sub V$.
\end{itemize}
(Recall that $\supp(b)$ is defined to be the union of the blobs of the diagram $b$.)

Assuming that $p\ot b$ is localizable as above, 
let $W = X \setmin V$, $W' = p(W)$ and $V' = X\setmin W'$.
We then have a factorization 
\[
	p = \gl(q, r),
\]
where $q \in CH_k(V, V')$ and $r \in CH_0(W, W')$.
We can also factorize $b = \gl(b_V, b_W)$, where $b_V\in \bc_*(V)$ and $b_W\in\bc_0(W)$.
According to the commutative diagram of the proposition, we must have
\[
	e_X(p\otimes b) = e_X(\gl(q\otimes b_V, r\otimes b_W)) = 
				gl(e_{VV'}(q\otimes b_V), e_{WW'}(r\otimes b_W)) .
\]
Since $r$ is a  0-parameter family of homeomorphisms, we must have
\[
	e_{WW'}(r\otimes b_W) = r(b_W),
\]
where $r(b_W)$ denotes the obvious action of homeomorphisms on blob diagrams (in
this case a 0-blob diagram).
Since $V'$ is a disjoint union of balls, $\bc_*(V')$ is acyclic in degrees $>0$ 
(by Properties \ref{property:disjoint-union} and \ref{property:contractibility}).
Assuming inductively that we have already defined $e_{VV'}(\bd(q\otimes b_V))$,
there is, up to (iterated) homotopy, a unique choice for $e_{VV'}(q\otimes b_V)$
such that 
\[
	\bd(e_{VV'}(q\otimes b_V)) = e_{VV'}(\bd(q\otimes b_V)) .
\]

Thus the conditions of the proposition determine (up to homotopy) the evaluation
map for localizable generators $p\otimes b$.
On the other hand, Lemma \ref{extension_lemma} allows us to homotope 
arbitrary generators to sums of localizable generators.
This (roughly) establishes the uniqueness part of the proposition.
To show existence, we must show that the various choices involved in constructing
evaluation maps in this way affect the final answer only by a homotopy.

Now for a little more detail.
(But we're still just motivating the full, gory details, which will follow.)
Choose a metric on $X$, and let $\cU_\gamma$ be the open cover of $X$ by balls of radius $\gamma$.
By Lemma \ref{extension_lemma} we can restrict our attention to $k$-parameter families 
$p$ of homeomorphisms such that $\supp(p)$ is contained in the union of $k$ $\gamma$-balls.
For fixed blob diagram $b$ and fixed $k$, it's not hard to show that for $\gamma$ small enough
$p\ot b$ must be localizable.
On the other hand, for fixed $k$ and $\gamma$ there exist $p$ and $b$ such that $p\ot b$ is not localizable,
and for fixed $\gamma$ and $b$ there exist non-localizable $p\ot b$ for sufficiently large $k$.
Thus we will need to take an appropriate limit as $\gamma$ approaches zero.

The construction of $e_X$, as outlined above, depends on various choices, one of which 
is the choice, for each localizable generator $p\ot b$, 
of disjoint balls $V$ containing $\supp(p)\cup\supp(b)$.
Let $V'$ be another disjoint union of balls containing $\supp(p)\cup\supp(b)$,
and assume that there exists yet another disjoint union of balls $W$ containing 
$V\cup V'$.
Then we can use $W$ to construct a homotopy between the two versions of $e_X$ 
associated to $V$ and $V'$.
If we impose no constraints on $V$ and $V'$ then such a $W$ need not exist.
Thus we will insist below that $V$ (and $V'$) be contained in small metric neighborhoods
of $\supp(p)\cup\supp(b)$.
Because we want not mere homotopy uniqueness but iterated homotopy uniqueness,
we will similarly require that $W$ be contained in a slightly larger metric neighborhood of 
$\supp(p)\cup\supp(b)$, and so on.


\begin{proof}[Proof of Theorem \ref{thm:CH}.]
We'll use the notation $|b| = \supp(b)$ and $|p| = \supp(p)$.

Choose a metric on $X$.
Choose a monotone decreasing sequence of positive real numbers $\ep_i$ converging to zero
(e.g.\ $\ep_i = 2^{-i}$).
Choose another sequence of positive real numbers $\delta_i$ such that $\delta_i/\ep_i$
converges monotonically to zero (e.g.\ $\delta_i = \ep_i^2$).
Let $\phi_l$ be an increasing sequence of positive numbers
satisfying the inequalities of Lemma \ref{xx2phi} below.
Given a generator $p\otimes b$ of $CH_*(X)\otimes \bc_*(X)$ and non-negative integers $i$ and $l$
define
\[
	N_{i,l}(p\ot b) \deq \Nbd_{l\ep_i}(|b|) \cup \Nbd_{\phi_l\delta_i}(|p|).
\]
In other words, for each $i$
we use the metric to choose nested neighborhoods of $|b|\cup |p|$ (parameterized
by $l$), with $\ep_i$ controlling the size of the buffers around $|b|$ and $\delta_i$ controlling
the size of the buffers around $|p|$.

Next we define subcomplexes $G_*^{i,m} \sub CH_*(X)\otimes \bc_*(X)$.
Let $p\ot b$ be a generator of $CH_*(X)\otimes \bc_*(X)$ and let $k = \deg(p\ot b)
= \deg(p) + \deg(b)$.
We say $p\ot b$ is in $G_*^{i,m}$ exactly when either (a) $\deg(p) = 0$ or (b)
there exist codimension-zero submanifolds $V_0,\ldots,V_m \sub X$ such that each $V_j$
is homeomorphic to a disjoint union of balls and
\[
	N_{i,k}(p\ot b) \subeq V_0 \subeq N_{i,k+1}(p\ot b)
			\subeq V_1 \subeq \cdots \subeq V_m \subeq N_{i,k+m+1}(p\ot b) ,
\]
and further $\bd(p\ot b) \in G_*^{i,m}$.
We also require that $b$ is splitable (transverse) along the boundary of each $V_l$.

Note that $G_*^{i,m+1} \subeq G_*^{i,m}$.

As sketched above and explained in detail below, 
$G_*^{i,m}$ is a subcomplex where it is easy to define
the evaluation map.
The parameter $m$ controls the number of iterated homotopies we are able to construct
(see Lemma \ref{m_order_hty}).
The larger $i$ is (i.e.\ the smaller $\ep_i$ is), the better $G_*^{i,m}$ approximates all of
$CH_*(X)\ot \bc_*(X)$ (see Lemma \ref{Gim_approx}).

Next we define a chain map (dependent on some choices) $e_{i,m}: G_*^{i,m} \to \bc_*(X)$.
(When the domain is clear from context we will drop the subscripts and write
simply  $e: G_*^{i,m} \to \bc_*(X)$).
Let $p\ot b \in G_*^{i,m}$.
If $\deg(p) = 0$, define
\[
	e(p\ot b) = p(b) ,
\]
where $p(b)$ denotes the obvious action of the homeomorphism(s) $p$ on the blob diagram $b$.
For general $p\ot b$ ($\deg(p) \ge 1$) assume inductively that we have already defined
$e(p'\ot b')$ when $\deg(p') + \deg(b') < k = \deg(p) + \deg(b)$.
Choose $V = V_0$ as above so that 
\[
	N_{i,k}(p\ot b) \subeq V \subeq N_{i,k+1}(p\ot b) .
\]
Let $\bd(p\ot b) = \sum_j p_j\ot b_j$, and let $V^j$ be the choice of neighborhood
of $|p_j|\cup |b_j|$ made at the preceding stage of the induction.
For all $j$, 
\[
	V^j \subeq N_{i,k}(p_j\ot b_j) \subeq N_{i,k}(p\ot b) \subeq V .
\]
(The second inclusion uses the facts that $|p_j| \subeq |p|$ and $|b_j| \subeq |b|$.)
We therefore have splittings
\[
	p = p'\bullet p'' , \;\; b = b'\bullet b'' , \;\; e(\bd(p\ot b)) = f'\bullet f'' ,
\]
where $p' \in CH_*(V)$, $p'' \in CH_*(X\setmin V)$, 
$b' \in \bc_*(V)$, $b'' \in \bc_*(X\setmin V)$, 
$f' \in \bc_*(p(V))$, and $f'' \in \bc_*(p(X\setmin V))$.
(Note that since the family of homeomorphisms $p$ is constant (independent of parameters)
near $\bd V$, the expressions $p(V) \sub X$ and $p(X\setmin V) \sub X$ are
unambiguous.)
We have $\deg(p'') = 0$ and, inductively, $f'' = p''(b'')$.
%We also have that $\deg(b'') = 0 = \deg(p'')$.
Choose $x' \in \bc_*(p(V))$ such that $\bd x' = f'$.
This is possible by Properties \ref{property:disjoint-union} and \ref{property:contractibility}  and the fact that isotopic fields
differ by a local relation.
Finally, define
\[
	e(p\ot b) \deq x' \bullet p''(b'') .
\]

Note that above we are essentially using the method of acyclic models \nn{\S \ref{sec:moam}}.
For each generator $p\ot b$ we specify the acyclic (in positive degrees) 
target complex $\bc_*(p(V)) \bullet p''(b'')$.

The definition of $e: G_*^{i,m} \to \bc_*(X)$ depends on two sets of choices:
The choice of neighborhoods $V$ and the choice of inverse boundaries $x'$.
The next lemma shows that up to (iterated) homotopy $e$ is independent
of these choices.
(Note that independence of choices of $x'$ (for fixed choices of $V$)
is a standard result in the method of acyclic models.)

%\begin{lemma}
%Let $\tilde{e} :  G_*^{i,m} \to \bc_*(X)$ be a chain map constructed like $e$ above, but with
%different choices of $x'$ at each step.
%(Same choice of $V$ at each step.)
%Then $e$ and $\tilde{e}$ are homotopic via a homotopy in $\bc_*(p(V)) \bullet p''(b'')$.
%Any two choices of such a first-order homotopy are second-order homotopic, and so on, 
%to arbitrary order.
%\end{lemma}

%\begin{proof}
%This is a standard result in the method of acyclic models.
%\nn{should we say more here?}
%\nn{maybe this lemma should be subsumed into the next lemma.  probably it should.}
%\end{proof}

\begin{lemma} \label{m_order_hty}
Let $\tilde{e} :  G_*^{i,m} \to \bc_*(X)$ be a chain map constructed like $e$ above, but with
different choices of $V$ (and hence also different choices of $x'$) at each step.
If $m \ge 1$ then $e$ and $\tilde{e}$ are homotopic.
If $m \ge 2$ then any two choices of this first-order homotopy are second-order homotopic.
Continuing, $e :  G_*^{i,m} \to \bc_*(X)$ is well-defined up to $m$-th order homotopy.
\end{lemma}

\begin{proof}
We construct $h: G_*^{i,m} \to \bc_*(X)$ such that $\bd h + h\bd = e - \tilde{e}$.
The chain maps $e$ and $\tilde{e}$ coincide on bidegrees $(0, j)$, so define $h$
to be zero there.
Assume inductively that $h$ has been defined for degrees less than $k$.
Let $p\ot b$ be a generator of degree $k$.
Choose $V_1$ as in the definition of $G_*^{i,m}$ so that
\[
	N_{i,k+1}(p\ot b) \subeq V_1 \subeq N_{i,k+2}(p\ot b) .
\]
There are splittings
\[
	p = p'_1\bullet p''_1 , \;\; b = b'_1\bullet b''_1 , 
			\;\; e(p\ot b) - \tilde{e}(p\ot b) - h(\bd(p\ot b)) = f'_1\bullet f''_1 ,
\]
where $p'_1 \in CH_*(V_1)$, $p''_1 \in CH_*(X\setmin V_1)$, 
$b'_1 \in \bc_*(V_1)$, $b''_1 \in \bc_*(X\setmin V_1)$, 
$f'_1 \in \bc_*(p(V_1))$, and $f''_1 \in \bc_*(p(X\setmin V_1))$.
Inductively, $\bd f'_1 = 0$ and $f_1'' = p_1''(b_1'')$.
Choose $x'_1 \in \bc_*(p(V_1))$ so that $\bd x'_1 = f'_1$.
Define 
\[
	h(p\ot b) \deq x'_1 \bullet p''_1(b''_1) .
\]
This completes the construction of the first-order homotopy when $m \ge 1$.

The $j$-th order homotopy is constructed similarly, with $V_j$ replacing $V_1$ above.
\end{proof}

Note that on $G_*^{i,m+1} \subeq G_*^{i,m}$, we have defined two maps,
$e_{i,m}$ and $e_{i,m+1}$.
An easy variation on the above lemma shows that 
the restrictions of $e_{i,m}$ and $e_{i,m+1}$ to $G_*^{i,m+1}$ are $m$-th 
order homotopic.

Next we show how to homotope chains in $CH_*(X)\ot \bc_*(X)$ to one of the 
$G_*^{i,m}$.
Choose a monotone decreasing sequence of real numbers $\gamma_j$ converging to zero.
Let $\cU_j$ denote the open cover of $X$ by balls of radius $\gamma_j$.
Let $h_j: CH_*(X)\to CH_*(X)$ be a chain map homotopic to the identity whose image is 
spanned by families of homeomorphisms with support compatible with $\cU_j$, 
as described in Lemma \ref{extension_lemma}.
Recall that $h_j$ and also the homotopy connecting it to the identity do not increase
supports.
Define
\[
	g_j \deq h_j\circ h_{j-1} \circ \cdots \circ h_1 .
\]
The next lemma says that for all generators $p\ot b$ we can choose $j$ large enough so that
$g_j(p)\ot b$ lies in $G_*^{i,m}$, for arbitrary $m$ and sufficiently large $i$ 
(depending on $b$, $\deg(p)$ and $m$).
%(Note: Don't confuse this $n$ with the top dimension $n$ used elsewhere in this paper.)

\begin{lemma} \label{Gim_approx}
Fix a blob diagram $b$, a homotopy order $m$ and a degree $n$ for $CH_*(X)$.
Then there exists a constant $k_{bmn}$ such that for all $i \ge k_{bmn}$
there exists another constant $j_{ibmn}$ such that for all $j \ge j_{ibmn}$ and all $p\in CH_n(X)$ 
we have $g_j(p)\ot b \in G_*^{i,m}$.
\end{lemma}

For convenience we also define $k_{bmp} = k_{bmn}$
and $j_{ibmp} = j_{ibmn}$ where $n=\deg(p)$.
Note that we may assume that
\[
	k_{bmp} \ge k_{alq}
\]
for all $l\ge m$ and all $q\ot a$ which appear in the boundary of $p\ot b$.
Additionally, we may assume that
\[
	j_{ibmp} \ge j_{ialq}
\]
for all $l\ge m$ and all $q\ot a$ which appear in the boundary of $p\ot b$.


\begin{proof}

There exists $\lambda > 0$ such that for every  subset $c$ of the blobs of $b$ the set $\Nbd_u(c)$ is homeomorphic to $|c|$ for all $u < \lambda$ .
(Here we are using the fact that the blobs are 
piecewise smooth or piecewise-linear and that $\bd c$ is collared.)
We need to consider all such $c$ because all generators appearing in
iterated boundaries of $p\ot b$ must be in $G_*^{i,m}$.)

Let $r = \deg(b)$ and 
\[
	t = r+n+m+1 = \deg(p\ot b) + m + 1.
\]

Choose $k = k_{bmn}$ such that
\[
	t\ep_k < \lambda
\]
and
\[
	n\cdot (2 (\phi_t + 1) \delta_k) < \ep_k .
\]
Let $i \ge k_{bmn}$.
Choose $j = j_i$ so that
\[
	\gamma_j < \delta_i
\]
and also so that $\phi_t \gamma_j$ is less than the constant $\rho(M)$ of Lemma \ref{xxzz11}.

Let $j \ge j_i$ and $p\in CH_n(X)$.
Let $q$ be a generator appearing in $g_j(p)$.
Note that $|q|$ is contained in a union of $n$ elements of the cover $\cU_j$,
which implies that $|q|$ is contained in a union of $n$ metric balls of radius $\delta_i$.
We must show that $q\ot b \in G_*^{i,m}$, which means finding neighborhoods
$V_0,\ldots,V_m \sub X$ of $|q|\cup |b|$ such that each $V_j$
is homeomorphic to a disjoint union of balls and
\[
	N_{i,n}(q\ot b) \subeq V_0 \subeq N_{i,n+1}(q\ot b)
			\subeq V_1 \subeq \cdots \subeq V_m \subeq N_{i,t}(q\ot b) .
\]
Recall that
\[
	N_{i,a}(q\ot b) \deq \Nbd_{a\ep_i}(|b|) \cup \Nbd_{\phi_a\delta_i}(|q|).
\]
By repeated applications of Lemma \ref{xx2phi} we can find neighborhoods $U_0,\ldots,U_m$
of $|q|$, each homeomorphic to a disjoint union of balls, with
\[
	\Nbd_{\phi_{n+l} \delta_i}(|q|) \subeq U_l \subeq \Nbd_{\phi_{n+l+1} \delta_i}(|q|) .
\]
The inequalities above guarantee that 
for each $0\le l\le m$ we can find $u_l$ with 
\[
	(n+l)\ep_i \le u_l \le (n+l+1)\ep_i
\]
such that each component of $U_l$ is either disjoint from $\Nbd_{u_l}(|b|)$ or contained in 
$\Nbd_{u_l}(|b|)$.
This is because there are at most $n$ components of $U_l$, and each component
has radius $\le (\phi_t + 1) \delta_i$.
It follows that
\[
	V_l \deq \Nbd_{u_l}(|b|) \cup U_l
\]
is homeomorphic to a disjoint union of balls and satisfies
\[
	N_{i,n+l}(q\ot b) \subeq V_l \subeq N_{i,n+l+1}(q\ot b) .
\]

The same argument shows that each generator involved in iterated boundaries of $q\ot b$
is in $G_*^{i,m}$.
\end{proof}

In the next three lemmas, which provide the estimates needed above, we have made no effort to optimize the various bounds.
(The bounds are, however, optimal in the sense of minimizing the amount of work
we do.  Equivalently, they are the first bounds we thought of.)

We say that a subset $S$ of a metric space has radius $\le r$ if $S$ is contained in
some metric ball of radius $r$.

\begin{lemma}
Let $S \sub \ebb^n$ (Euclidean $n$-space) have radius $\le r$.  
Then $\Nbd_a(S)$ is homeomorphic to a ball for $a \ge 2r$.
\end{lemma}

\begin{proof} \label{xxyy2}
Let $S$ be contained in $B_r(y)$, $y \in \ebb^n$.
Note that if $a \ge 2r$ then $\Nbd_a(S) \sup B_r(y)$.
Let $z\in \Nbd_a(S) \setmin B_r(y)$.
Consider the triangle
with vertices $z$, $y$ and $s$ with $s\in S$ such that $z \in B_a(s)$.
The length of the edge $yz$ is greater than $r$ which is greater
than the length of the edge $ys$.
It follows that the angle at $z$ is less than $\pi/2$ (less than $\pi/3$, in fact),
which means that points on the edge $yz$ near $z$ are closer to $s$ than $z$ is,
which implies that these points are also in $\Nbd_a(S)$.
Hence $\Nbd_a(S)$ is star-shaped with respect to $y$.
\end{proof}

If we replace $\ebb^n$ above with an arbitrary compact Riemannian manifold $M$,
the same result holds, so long as $a$ is not too large:
\nn{replace this with a PL version}

\begin{lemma} \label{xxzz11}
Let $M$ be a compact Riemannian manifold.
Then there is a constant $\rho(M)$ such that for all
subsets $S\sub M$ of radius $\le r$ and all $a$ such that $2r \le a \le \rho(M)$,
$\Nbd_a(S)$ is homeomorphic to a ball.
\end{lemma}

\begin{proof}
Choose $\rho = \rho(M)$ such that $3\rho/2$ is less than the radius of injectivity of $M$,
and also so that for any point $y\in M$ the geodesic coordinates of radius $3\rho/2$ around
$y$ distort angles by only a small amount.
Now the argument of the previous lemma works.
\end{proof}



\begin{lemma} \label{xx2phi}
Let $S \sub M$ be contained in a union (not necessarily disjoint)
of $k$ metric balls of radius $r$.
Let $\phi_1, \phi_2, \ldots$ be an increasing sequence of real numbers satisfying
$\phi_1 \ge 2$ and $\phi_{i+1} \ge \phi_i(2\phi_i + 2) + \phi_i$.
For convenience, let $\phi_0 = 0$.
Assume also that $\phi_k r \le \rho(M)$,
where $\rho(M)$ is as in Lemma \ref{xxzz11}.
Then there exists a neighborhood $U$ of $S$,
homeomorphic to a disjoint union of balls, such that
\[
	\Nbd_{\phi_{k-1} r}(S) \subeq U \subeq \Nbd_{\phi_k r}(S) .
\]
\end{lemma}

\begin{proof}
For $k=1$ this follows from Lemma \ref{xxzz11}.
Assume inductively that it holds for $k-1$.
Partition $S$ into $k$ disjoint subsets $S_1,\ldots,S_k$, each of radius $\le r$.
By Lemma \ref{xxzz11}, each $\Nbd_{\phi_{k-1} r}(S_i)$ is homeomorphic to a ball.
If these balls are disjoint, let $U$ be their union.
Otherwise, assume WLOG that $S_{k-1}$ and $S_k$ are distance less than $2\phi_{k-1}r$ apart.
Let $R_i = \Nbd_{\phi_{k-1} r}(S_i)$ for $i = 1,\ldots,k-2$ 
and $R_{k-1} = \Nbd_{\phi_{k-1} r}(S_{k-1})\cup \Nbd_{\phi_{k-1} r}(S_k)$.
Each $R_i$ is contained in a metric ball of radius $r' \deq (2\phi_{k-1}+2)r$.
Note that the defining inequality of the $\phi_i$ guarantees that
\[
	\phi_{k-1}r' = \phi_{k-1}(2\phi_{k-1}+2)r \le \phi_k r \le \rho(M) .
\]
By induction, there is a neighborhood $U$ of $R \deq \bigcup_i R_i$, 
homeomorphic to a disjoint union
of balls, and such that
\[
	U \subeq \Nbd_{\phi_{k-1}r'}(R) = \Nbd_{t}(S) \subeq \Nbd_{\phi_k r}(S) ,
\]
where $t = \phi_{k-1}(2\phi_{k-1}+2)r + \phi_{k-1} r$.
\end{proof}


We now return to defining the chain maps $e_X$.


Let $R_*$ be the chain complex with a generating 0-chain for each non-negative
integer and a generating 1-chain connecting each adjacent pair $(j, j+1)$.
(So $R_*$ is a simplicial version of the non-negative reals.)
Denote the 0-chains by $j$ (for $j$ a non-negative integer) and the 1-chain connecting $j$ and $j+1$
by $\iota_j$.
Define a map (homotopy equivalence)
\[
	\sigma: R_*\ot CH_*(X, X) \otimes \bc_*(X) \to CH_*(X, X)\ot \bc_*(X)
\]
as follows.
On $R_0\ot CH_*(X, X) \otimes \bc_*(X)$ we define
\[
	\sigma(j\ot p\ot b) = g_j(p)\ot b .
\]
On $R_1\ot CH_*(X, X) \otimes \bc_*(X)$ we define
\[
	\sigma(\iota_j\ot p\ot b) = f_j(p)\ot b ,
\]
where $f_j$ is the homotopy from $g_j$ to $g_{j+1}$.

Next we specify subcomplexes $G^m_* \sub R_*\ot CH_*(X, X) \otimes \bc_*(X)$ on which we will eventually
define a version of the action map $e_X$.
A generator $j\ot p\ot b$ is defined to be in $G^m_*$ if $j\ge j_{kbmp}$, where
$k = k_{bmp}$ is the constant from Lemma \ref{Gim_approx}.
Similarly $\iota_j\ot p\ot b$ is in $G^m_*$ if $j\ge j_{kbmp}$.
The inequality following Lemma \ref{Gim_approx} guarantees that $G^m_*$ is indeed a subcomplex
and that $G^m_* \sup G^{m+1}_*$.

It is easy to see that each $G^m_*$ is homotopy equivalent (via the inclusion map) 
to $R_*\ot CH_*(X, X) \otimes \bc_*(X)$
and hence to $CH_*(X, X) \otimes \bc_*(X)$, and furthermore that the homotopies are well-defined
up to a contractible set of choices.

Next we define a map
\[
	e_m : G^m_* \to \bc_*(X) .
\]
Let $p\ot b$ be a generator of $G^m_*$.
Each $g_j(p)\ot b$ or $f_j(p)\ot b$ is a linear combination of generators $q\ot c$,
where $\supp(q)\cup\supp(c)$ is contained in a disjoint union of balls satisfying 
various conditions specified above.
As in the construction of the maps $e_{i,m}$ above,
it suffices to specify for each such $q\ot c$ a disjoint union of balls
$V_{qc} \sup \supp(q)\cup\supp(c)$, such that $V_{qc} \sup V_{q'c'}$
whenever $q'\ot c'$ appears in the boundary of $q\ot c$.

Let $q\ot c$ be a summand of $g_j(p)\ot b$, as above.
Let $i$ be maximal such that $j\ge j_{ibmp}$
(notation as in Lemma \ref{Gim_approx}).
Then $q\ot c \in G^{i,m}_*$ and we choose $V_{qc} \sup \supp(q)\cup\supp(c)$
such that 
\[
	N_{i,d}(q\ot c) \subeq V_{qc} \subeq N_{i,d+1}(q\ot c) ,
\]
where $d = \deg(q\ot c)$.
Let $\tilde q = f_j(q)$.
The summands of $f_j(p)\ot b$ have the form $\tilde q \ot c$, 
where $q\ot c$ is a summand of $g_j(p)\ot b$.
Since the homotopy $f_j$ does not increase supports, we also have that
\[
	V_{qc} \sup \supp(\tilde q) \cup \supp(c) .
\]
So we define $V_{\tilde qc} = V_{qc}$.

It is now easy to check that we have $V_{qc} \sup V_{q'c'}$
whenever $q'\ot c'$ appears in the boundary of $q\ot c$.
As in the construction of the maps $e_{i,m}$ above,
this allows us to construct a map
\[
	e_m : G^m_* \to \bc_*(X) 
\]
which is well-defined up to homotopy.
As in the proof of Lemma \ref{m_order_hty}, we can show that the map is well-defined up
to $m$-th order homotopy.
Put another way, we have specified an $m$-connected subcomplex of the complex of
all maps $G^m_* \to \bc_*(X)$.
On $G^{m+1}_* \sub G^m_*$ we have defined two maps, $e_m$ and $e_{m+1}$.
One can similarly (to the proof of Lemma \ref{m_order_hty}) show that 
these two maps agree up to $m$-th order homotopy.
More precisely, one can show that the subcomplex of maps containing the various
$e_{m+1}$ candidates is contained in the corresponding subcomplex for $e_m$.

\medskip

Next we show that the action maps are compatible with gluing.
Let $G^m_*$ and $\ol{G}^m_*$ be the complexes, as above, used for defining
the action maps $e_{X\sgl}$ and $e_X$.
The gluing map $X\sgl\to X$ induces a map
\[
	\gl:  R_*\ot CH_*(X, X) \otimes \bc_*(X)  \to R_*\ot CH_*(X\sgl, X \sgl) \otimes \bc_*(X \sgl) ,
\]
and it is easy to see that $\gl(G^m_*)\sub \ol{G}^m_*$.
From this it follows that the diagram in the statement of Theorem \ref{thm:CH} commutes.

\todo{this paragraph isn't very convincing, or at least I don't see what's going on}
Finally we show that the action maps defined above are independent of
the choice of metric (up to iterated homotopy).
The arguments are very similar to ones given above, so we only sketch them.
Let $g$ and $g'$ be two metrics on $X$, and let $e$ and $e'$ be the corresponding
actions $CH_*(X, X) \ot \bc_*(X)\to\bc_*(X)$.
We must show that $e$ and $e'$ are homotopic.
As outlined in the discussion preceding this proof,
this follows from the facts that both $e$ and $e'$ are compatible
with gluing and that $\bc_*(B^n)$ is contractible.
As above, we define a subcomplex $F_*\sub  CH_*(X, X) \ot \bc_*(X)$ generated
by $p\ot b$ such that $|p|\cup|b|$ is contained in a disjoint union of balls.
Using acyclic models, we can construct a homotopy from $e$ to $e'$ on $F_*$.
We now observe that $CH_*(X, X) \ot \bc_*(X)$ retracts to $F_*$.
Similar arguments show that this homotopy from $e$ to $e'$ is well-defined
up to second order homotopy, and so on.

This completes the proof of Theorem \ref{thm:CH}.
\end{proof}


\begin{rem*}
\label{rem:for-small-blobs}
For the proof of Lemma \ref{lem:CH-small-blobs} below we will need the following observation on the action constructed above.
Let $b$ be a blob diagram and $p:P\times X\to X$ be a family of homeomorphisms.
Then we may choose $e$ such that $e(p\ot b)$ is a sum of generators, each
of which has support close to $p(t,|b|)$ for some $t\in P$.
More precisely, the support of the generators is contained in the union of a small neighborhood
of $p(t,|b|)$ with some small balls.
(Here ``small" is in terms of the metric on $X$ that we chose to construct $e$.)
\end{rem*}


\begin{thm}
\label{thm:CH-associativity}
The $CH_*(X, Y)$ actions defined above are associative.
That is, the following diagram commutes up to homotopy:
\[ \xymatrix{
& CH_*(Y, Z) \ot \bc_*(Y) \ar[dr]^{e_{YZ}} & \\
CH_*(X, Y) \ot CH_*(Y, Z) \ot \bc_*(X) \ar[ur]^{e_{XY}\ot\id} \ar[dr]_{\mu\ot\id} & & \bc_*(Z) \\
& CH_*(X, Z) \ot \bc_*(X) \ar[ur]_{e_{XZ}} &
} \]
Here $\mu:CH_*(X, Y) \ot CH_*(Y, Z)\to CH_*(X, Z)$ is the map induced by composition
of homeomorphisms.
\end{thm}

\begin{proof}
The strategy of the proof is similar to that of Theorem \ref{thm:CH}.
We will identify a subcomplex 
\[
	G_* \sub CH_*(X, Y) \ot CH_*(Y, Z) \ot \bc_*(X)
\]
where it is easy to see that the two sides of the diagram are homotopic, then 
show that there is a deformation retraction of $CH_*(X, Y) \ot CH_*(Y, Z) \ot \bc_*(X)$ into $G_*$.

Let $p\ot q\ot b$ be a generator of $CH_*(X, Y) \ot CH_*(Y, Z) \ot \bc_*(X)$.
By definition, $p\ot q\ot b\in G_*$ if there is a disjoint union of balls in $X$ which
contains $|p| \cup p\inv(|q|) \cup |b|$.
(If $p:P\times X\to Y$, then $p\inv(|q|)$ means the union over all $x\in P$ of 
$p(x, \cdot)\inv(|q|)$.)

As in the proof of Theorem \ref{thm:CH}, we can construct a homotopy 
between the upper and lower maps restricted to $G_*$.
This uses the facts that the maps agree on $CH_0(X, Y) \ot CH_0(Y, Z) \ot \bc_*(X)$,
that they are compatible with gluing, and the contractibility of $\bc_*(X)$.

We can now apply Lemma \ref{extension_lemma_c}, using a series of increasingly fine covers, 
to construct a deformation retraction of $CH_*(X, Y) \ot CH_*(Y, Z) \ot \bc_*(X)$ into $G_*$.
\end{proof}
