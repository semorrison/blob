%!TEX root = ../blob1.tex

\section{Gluing - needs to be rewritten/replaced}
\label{sec:gluing}%

We now turn to establishing the gluing formula for blob homology, restated from Property \ref{property:gluing} in the Introduction
\begin{itemize}
%\mbox{}% <-- gets the indenting right
\item For any $(n-1)$-manifold $Y$, the blob homology of $Y \times I$ is
naturally an $A_\infty$ category. % We'll write $\bc_*(Y)$ for $\bc_*(Y \times I)$ below.

\item For any $n$-manifold $X$, with $Y$ a codimension $0$-submanifold of its boundary, the blob homology of $X$ is naturally an
$A_\infty$ module for $\bc_*(Y \times I)$.

\item For any $n$-manifold $X$, with $Y \cup Y^{\text{op}}$ a codimension
$0$-submanifold of its boundary, the blob homology of $X'$, obtained from
$X$ by gluing along $Y$, is the $A_\infty$ self-tensor product of
$\bc_*(X)$ as an $\bc_*(Y \times I)$-bimodule.
\begin{equation*}
\bc_*(X') \iso \bc_*(X) \Tensor^{A_\infty}_{\mathclap{\bc_*(Y \times I)}} \!\!\!\!\!\!\xymatrix{ \ar@(ru,rd)@<-1ex>[]}
\end{equation*}
\end{itemize}

Although this gluing formula is stated in terms of $A_\infty$ categories and their (bi-)modules, it will be more natural for us to give alternative
definitions of `topological' $A_\infty$-categories and their bimodules, explain how to translate between the `algebraic' and `topological' definitions,
and then prove the gluing formula in the topological langauge. Section \ref{sec:topological-A-infty} below explains these definitions, and establishes
the desired equivalence. This is quite involved, and in particular requires us to generalise the definition of blob homology to allow $A_\infty$ algebras
as inputs, and to re-establish many of the properties of blob homology in this generality. Many readers may prefer to read the
Definitions \ref{defn:topological-algebra} and \ref{defn:topological-module} of `topological' $A_\infty$-categories, and Definition \ref{???} of the
self-tensor product of a `topological' $A_\infty$-bimodule, then skip to \S \ref{sec:boundary-action} and \S \ref{sec:gluing-formula} for the proofs
of the gluing formula in the topological context.

\subsection{`Topological' $A_\infty$ $n$-categories}
\label{sec:topological-A-infty}%

This section prepares the ground for establishing Property \ref{property:gluing} by defining the notion of a \emph{topological $A_\infty$-$n$-category}.
The main result of this section is

\begin{thm}
Topological $A_\infty$-$1$-categories are equivalent to the usual notion of
$A_\infty$-$1$-categories.
\end{thm}

Before proving this theorem, we embark upon a long string of definitions.
For expository purposes, we begin with the $n=1$ special cases,
and define
first topological $A_\infty$-algebras, then topological $A_\infty$-categories, and then topological $A_\infty$-modules over these. We then turn
to the general $n$ case, defining topological $A_\infty$-$n$-categories and their modules.
\nn{Something about duals?}
\todo{Explain that we're not making contact with any previous notions for the general $n$ case?}
\kevin{probably we should say something about the relation
to [framed] $E_\infty$ algebras
}

\todo{}
Various citations we might want to make:
\begin{itemize}
\item \cite{MR2061854} McClure and Smith's review article
\item \cite{MR0420610} May, (inter alia, definition of $E_\infty$ operad)
\item \cite{MR0236922,MR0420609} Boardman and Vogt
\item \cite{MR1256989} definition of framed little-discs operad
\end{itemize}

\begin{defn}
\label{defn:topological-algebra}%
A ``topological $A_\infty$-algebra'' $A$ consists of the following data.
\begin{enumerate}
\item For each $1$-manifold $J$ diffeomorphic to the standard interval
$I=\left[0,1\right]$, a complex of vector spaces $A(J)$.
% either roll functoriality into the evaluation map
\item For each pair of intervals $J,J'$ an `evaluation' chain map
$\ev_{J \to J'} : \CD{J \to J'} \tensor A(J) \to A(J')$.
\item For each decomposition of intervals $J = J'\cup J''$,
a gluing map $\gl_{J',J''} : A(J') \tensor A(J'') \to A(J)$.
% or do it as two separate pieces of data
%\item along with an `evaluation' chain map $\ev_J : \CD{J} \tensor A(J) \to A(J)$,
%\item for each diffeomorphism $\phi : J \to J'$, an isomorphism $A(\phi) : A(J) \isoto A(J')$,
%\item and for each pair of intervals $J,J'$ a gluing map $\gl_{J,J'} : A(J) \tensor A(J') \to A(J \cup J')$,
\end{enumerate}
This data is required to satisfy the following conditions.
\begin{itemize}
\item The evaluation chain map is associative, in that the diagram
\begin{equation*}
\xymatrix{
 & \quad \mathclap{\CD{J' \to J''} \tensor \CD{J \to J'} \tensor A(J)} \quad \ar[dr]^{\id \tensor \ev_{J \to J'}} \ar[dl]_{\compose \tensor \id} & \\
\CD{J' \to J''} \tensor A(J') \ar[dr]^{\ev_{J' \to J''}} & & \CD{J \to J''} \tensor A(J) \ar[dl]_{\ev_{J \to J''}} \\
 & A(J'') &
}
\end{equation*}
commutes up to homotopy.
Here the map $$\compose : \CD{J' \to J''} \tensor \CD{J \to J'} \to \CD{J \to J''}$$ is a composition: take products of singular chains first, then compose diffeomorphisms.
%% or the version for separate pieces of data:
%\item If $\phi$ is a diffeomorphism from $J$ to itself, the maps $\ev_J(\phi, -)$ and $A(\phi)$ are the same.
%\item The evaluation chain map is associative, in that the diagram
%\begin{equation*}
%\xymatrix{
%\CD{J} \tensor \CD{J} \tensor A(J) \ar[r]^{\id \tensor \ev_J} \ar[d]_{\compose \tensor \id} &
%\CD{J} \tensor A(J) \ar[d]^{\ev_J} \\
%\CD{J} \tensor A(J) \ar[r]_{\ev_J} &
%A(J)
%}
%\end{equation*}
%commutes. (Here the map $\compose : \CD{J} \tensor \CD{J} \to \CD{J}$ is a composition: take products of singular chains first, then use the group multiplication in $\Diff(J)$.)
\item The gluing maps are \emph{strictly} associative. That is, given $J$, $J'$ and $J''$, the diagram
\begin{equation*}
\xymatrix{
A(J) \tensor A(J') \tensor A(J'') \ar[rr]^{\gl_{J,J'} \tensor \id} \ar[d]_{\id \tensor \gl_{J',J''}} &&
A(J \cup J') \tensor A(J'') \ar[d]^{\gl_{J \cup J', J''}} \\
A(J) \tensor A(J' \cup J'') \ar[rr]_{\gl_{J, J' \cup J''}} &&
A(J \cup J' \cup J'')
}
\end{equation*}
commutes.
\item The gluing and evaluation maps are compatible.
\nn{give diagram, or just say ``in the obvious way", or refer to diagram in blob eval map section?}
\end{itemize}
\end{defn}

\begin{rem}
We can restrict the evaluation map to $0$-chains, and see that $J \mapsto A(J)$ and $(\phi:J \to J') \mapsto \ev_{J \to J'}(\phi, \bullet)$ together
constitute a functor from the category of intervals and diffeomorphisms between them to the category of complexes of vector spaces.
Further, once this functor has been specified, we only need to know how the evaluation map acts when $J = J'$.
\end{rem}

%% if we do things separately, we should say this:
%\begin{rem}
%Of course, the first and third pieces of data (the complexes, and the isomorphisms) together just constitute a functor from the category of
%intervals and diffeomorphisms between them to the category of complexes of vector spaces.
%Further, one can combine the second and third pieces of data, asking instead for a map
%\begin{equation*}
%\ev_{J,J'} : \CD{J \to J'} \tensor A(J) \to A(J').
%\end{equation*}
%(Any $k$-parameter family of diffeomorphisms in $C_k(\Diff(J \to J'))$ factors into a single diffeomorphism $J \to J'$ and a $k$-parameter family of
%diffeomorphisms in $\CD{J'}$.)
%\end{rem}

To generalise the definition to that of a category, we simply introduce a set of objects which we call $A(pt)$. Now we associate complexes to each
interval with boundary conditions $(J, c_-, c_+)$, with $c_-, c_+ \in A(pt)$, and only ask for gluing maps when the boundary conditions match up:
\begin{equation*}
\gl : A(J, c_-, c_0) \tensor A(J', c_0, c_+) \to A(J \cup J', c_-, c_+).
\end{equation*}
The action of diffeomorphisms (and of $k$-parameter families of diffeomorphisms) ignores the boundary conditions.
\todo{we presumably need to say something about $\id_c \in A(J, c, c)$.}

At this point we can give two motivating examples. The first is `chains of maps to $M$' for some fixed target space $M$.
\begin{defn}
Define the topological $A_\infty$ category $C_*(\Maps(\bullet \to M))$ by
\begin{enumerate}
\item $A(J) = C_*(\Maps(J \to M))$, singular chains on the space of smooth maps from $J$ to $M$,
\item $\ev_{J,J'} : \CD{J \to J'} \tensor A(J) \to A(J')$ is the composition
\begin{align*}
\CD{J \to J'} \tensor C_*(\Maps(J \to M)) & \to C_*(\Diff(J \to J') \times \Maps(J \to M)) \\ & \to C_*(\Maps(J' \to M)),
\end{align*}
where the first map is the product of singular chains, and the second is precomposition by the inverse of a diffeomorphism,
\item $\gl_{J,J'} : A(J) \tensor A(J')$ takes the product of singular chains, then glues maps to $M$ together.
\end{enumerate}
The associativity conditions are trivially satisfied.
\end{defn}

The second example is simply the blob complex of $Y \times J$, for any $n-1$ manifold $Y$. We define $A(J) = \bc_*(Y \times J)$.
Observe $\Diff(J \to J')$ embeds into $\Diff(Y \times J \to Y \times J')$. The evaluation and gluing maps then come directly from Properties
\ref{property:evaluation} and \ref{property:gluing-map} respectively. We'll often write $bc_*(Y)$ for this algebra.

The definition of a module follows closely the definition of an algebra or category.
\begin{defn}
\label{defn:topological-module}%
A topological $A_\infty$-(left-)module $M$ over a topological $A_\infty$ category $A$
consists of the following data.
\begin{enumerate}
\item A functor $K \mapsto M(K)$ from $1$-manifolds diffeomorphic to the standard interval, with the upper boundary point `marked', to complexes of vector spaces.
\item For each pair of such marked intervals,
an `evaluation' chain map $\ev_{K\to K'} : \CD{K \to K'} \tensor M(K) \to M(K')$.
\item For each decomposition $K = J\cup K'$ of the marked interval
$K$ into an unmarked interval $J$ and a marked interval $K'$, a gluing map
$\gl_{J,K'} : A(J) \tensor M(K') \to M(K)$.
\end{enumerate}
The above data is required to satisfy
conditions analogous to those in Definition \ref{defn:topological-algebra}.
\end{defn}

For any manifold $X$ with $\bdy X = Y$ (or indeed just with $Y$ a codimension $0$-submanifold of $\bdy X$) we can think of $\bc_*(X)$ as
a topological $A_\infty$ module over $\bc_*(Y)$, the topological $A_\infty$ category described above.
For each interval $K$, we have $M(K) = \bc_*((Y \times K) \cup_Y X)$.
(Here we glue $Y \times pt$ to $Y \subset \bdy X$, where $pt$ is the marked point of $K$.) Again, the evaluation and gluing maps come directly from Properties
\ref{property:evaluation} and \ref{property:gluing-map} respectively.

The definition of a bimodule is like the definition of a module,
except that we have two disjoint marked intervals $K$ and $L$, one with a marked point
on the upper boundary and the other with a marked point on the lower boundary.
There are evaluation maps corresponding to gluing unmarked intervals
to the unmarked ends of $K$ and $L$.

Let $X$ be an $n$-manifold with a copy of $Y \du -Y$ embedded as a
codimension-0 submanifold of $\bdy X$.
Then the the assignment $K,L \mapsto \bc_*(X \cup_Y (Y\times K) \cup_{-Y} (-Y\times L))$ has the
structure of a topological $A_\infty$ bimodule over $\bc_*(Y)$.

Next we define the coend
(or gluing or tensor product or self tensor product, depending on the context)
$\gl(M)$ of a topological $A_\infty$ bimodule $M$. This will be an `initial' or `universal' object satisfying various properties.
\begin{defn}
We define a category $\cG(M)$. Objects consist of the following data.
\begin{itemize}
\item For each interval $N$ with both endpoints marked, a complex of vector spaces C(N).
\item For each pair of intervals $N,N'$ an evaluation chain map
$\ev_{N \to N'} : \CD{N \to N'} \tensor C(N) \to C(N')$.
\item For each decomposition of intervals $N = K\cup L$,
a gluing map $\gl_{K,L} : M(K,L) \to C(N)$.
\end{itemize}
This data must satisfy the following conditions.
\begin{itemize}
\item The evaluation maps are associative.
\nn{up to homotopy?}
\item Gluing is strictly associative.
That is, given a decomposition $N = K\cup J\cup L$, the chain maps associated to
$K\du J\du L \to (K\cup J)\du L \to N$ and $K\du J\du L \to K\du (J\cup L) \to N$
agree.
\item the gluing and evaluation maps are compatible.
\end{itemize}

A morphism $f$ between such objects $C$ and $C'$ is a chain map $f_N : C(N) \to C'(N)$ for each interval $N$ with both endpoints marked,
satisfying the following conditions.
\begin{itemize}
\item For each pair of intervals $N,N'$, the diagram
\begin{equation*}
\xymatrix{
\CD{N \to N'} \tensor C(N) \ar[d]_{\ev} \ar[r]^{\id \tensor f_N} & \CD{N \to N'} \tensor C'(N) \ar[d]^{\ev} \\
C(N) \ar[r]_{f_N} & C'(N)
}
\end{equation*}
commutes.
\item For each decomposition of intervals $N = K \cup L$, the gluing map for $C'$, $\gl'_{K,L} : M(K,L) \to C'(N)$ is the composition
$$M(K,L) \xto{\gl_{K,L}} C(N) \xto{f_N} C'(N).$$
\end{itemize}
\end{defn}

We now define $\gl(M)$ to be an initial object in the category $\cG{M}$. This just says that for any other object $C'$ in $\cG{M}$,
there are chain maps $f_N: \gl(M)(N) \to C'(N)$, compatible with the action of families of diffeomorphisms, so that the gluing maps $M(K,L) \to C'(N)$
factor through the gluing maps for $\gl(M)$.

We return to our two favourite examples. First, the coend of the topological $A_\infty$ category $C_*(\Maps(\bullet \to M))$ as a bimodule over itself
is essentially $C_*(\Maps(S^1 \to M))$. \todo{}

For the second example, given $X$ and $Y\du -Y \sub \bdy X$, the assignment
$$N \mapsto \bc_*(X \cup_{Y\du -Y} (N\times Y))$$ clearly gives an object in $\cG{M}$.
Showing that it is an initial object is the content of the gluing theorem proved below.


\nn{Need to let the input $n$-category $C$ be a graded thing (e.g. DG
$n$-category or $A_\infty$ $n$-category). DG $n$-category case is pretty
easy, I think, so maybe it should be done earlier??}

\bigskip

Outline:
\begin{itemize}
\item recall defs of $A_\infty$ category (1-category only), modules, (self-) tensor product.
use graphical/tree point of view, rather than following Keller exactly
\item define blob complex in $A_\infty$ case; fat mapping cones?  tree decoration?
\item topological $A_\infty$ cat def (maybe this should go first); also modules gluing
\item motivating example: $C_*(\Maps(X, M))$
\item maybe incorporate dual point of view (for $n=1$), where points get
object labels and intervals get 1-morphism labels
\end{itemize}


\subsection{$A_\infty$ action on the boundary}
\label{sec:boundary-action}%
Let $Y$ be an $n{-}1$-manifold.
The collection of complexes $\{\bc_*(Y\times I; a, b)\}$, where $a, b \in \cC(Y)$ are boundary
conditions on $\bd(Y\times I) = Y\times \{0\} \cup Y\times\{1\}$, has the structure
of an $A_\infty$ category.

Composition of morphisms (multiplication) depends of a choice of homeomorphism
$I\cup I \cong I$.  Given this choice, gluing gives a map
\eq{
    \bc_*(Y\times I; a, b) \otimes \bc_*(Y\times I; b, c) \to \bc_*(Y\times (I\cup I); a, c)
            \cong \bc_*(Y\times I; a, c)
}
Using (\ref{CDprop}) and the inclusion $\Diff(I) \sub \Diff(Y\times I)$ gives the various
higher associators of the $A_\infty$ structure, more or less canonically.

\nn{is this obvious?  does more need to be said?}

Let $\cA(Y)$ denote the $A_\infty$ category $\bc_*(Y\times I; \cdot, \cdot)$.

Similarly, if $Y \sub \bd X$, a choice of collaring homeomorphism
$(Y\times I) \cup_Y X \cong X$ gives the collection of complexes $\bc_*(X; r, a)$
(variable $a \in \cC(Y)$; fixed $r \in \cC(\bd X \setmin Y)$) the structure of a representation of the
$A_\infty$ category $\{\bc_*(Y\times I; \cdot, \cdot)\}$.
Again the higher associators come from the action of $\Diff(I)$ on a collar neighborhood
of $Y$ in $X$.

In the next section we use the above $A_\infty$ actions to state and prove
a gluing theorem for the blob complexes of $n$-manifolds.


\subsection{The gluing formula}
\label{sec:gluing-formula}%
Let $Y$ be an $n{-}1$-manifold and let $X$ be an $n$-manifold with a copy
of $Y \du -Y$ contained in its boundary.
Gluing the two copies of $Y$ together we obtain a new $n$-manifold $X\sgl$.
We wish to describe the blob complex of $X\sgl$ in terms of the blob complex
of $X$.
More precisely, we want to describe $\bc_*(X\sgl; c\sgl)$,
where $c\sgl \in \cC(\bd X\sgl)$,
in terms of the collection $\{\bc_*(X; c, \cdot, \cdot)\}$, thought of as a representation
of the $A_\infty$ category $\cA(Y\du-Y) \cong \cA(Y)\times \cA(Y)\op$.

\begin{thm}
$\bc_*(X\sgl; c\sgl)$ is quasi-isomorphic to the the self tensor product
of $\{\bc_*(X; c, \cdot, \cdot)\}$ over $\cA(Y)$.
\end{thm}

The proof will occupy the remainder of this section.

\nn{...}

\bigskip

\nn{need to define/recall def of (self) tensor product over an $A_\infty$ category}

