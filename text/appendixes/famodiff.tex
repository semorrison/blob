%!TEX root = ../../blob1.tex

\section{Families of Diffeomorphisms}  \label{sec:localising}

In this appendix we provide the proof of
\nn{should change this to the more general \ref{extension_lemma_b}}

\begin{lem*}[Restatement of Lemma \ref{extension_lemma}]
Let $x \in CD_k(X)$ be a singular chain such that $\bd x$ is adapted to $\cU$.
Then $x$ is homotopic (rel boundary) to some $x' \in CD_k(X)$ which is adapted to $\cU$.
Furthermore, one can choose the homotopy so that its support is equal to the support of $x$.
\end{lem*}

\nn{for pedagogical reasons, should do $k=1,2$ cases first; probably do this in
later draft}

\nn{not sure what the best way to deal with boundary is; for now just give main argument, worry
about boundary later}

\begin{proof}

Recall that we are given
an open cover $\cU = \{U_\alpha\}$ and an
$x \in CD_k(X)$ such that $\bd x$ is adapted to $\cU$.
We must find a homotopy of $x$ (rel boundary) to some $x' \in CD_k(X)$ which is adapted to $\cU$.

Let $\{r_\alpha : X \to [0,1]\}$ be a partition of unity for $\cU$.

As a first approximation to the argument we will eventually make, let's replace $x$
with a single singular cell
\eq{
    f: P \times X \to X .
}
Also, we'll ignore for now issues around $\bd P$.

Our homotopy will have the form
\eqar{
    F: I \times P \times X &\to& X \\
    (t, p, x) &\mapsto& f(u(t, p, x), x)
}
for some function
\eq{
    u : I \times P \times X \to P .
}
First we describe $u$, then we argue that it does what we want it to do.

For each cover index $\alpha$ choose a cell decomposition $K_\alpha$ of $P$.
The various $K_\alpha$ should be in general position with respect to each other.
We will see below that the $K_\alpha$'s need to be sufficiently fine in order
to insure that $F$ above is a homotopy through diffeomorphisms of $X$ and not
merely a homotopy through maps $X\to X$.

Let $L$ be the union of all the $K_\alpha$'s.
$L$ is itself a cell decomposition of $P$.
\nn{next two sentences not needed?}
To each cell $a$ of $L$ we associate the tuple $(c_\alpha)$,
where $c_\alpha$ is the codimension of the cell of $K_\alpha$ which contains $c$.
Since the $K_\alpha$'s are in general position, we have $\sum c_\alpha \le k$.

Let $J$ denote the handle decomposition of $P$ corresponding to $L$.
Each $i$-handle $C$ of $J$ has an $i$-dimensional tangential coordinate and,
more importantly, a $k{-}i$-dimensional normal coordinate.

For each (top-dimensional) $k$-cell $c$ of each $K_\alpha$, choose a point $p_c \in c \sub P$.
Let $D$ be a $k$-handle of $J$, and let $D$ also denote the corresponding
$k$-cell of $L$.
To $D$ we associate the tuple $(c_\alpha)$ of $k$-cells of the $K_\alpha$'s
which contain $d$, and also the corresponding tuple $(p_{c_\alpha})$ of points in $P$.

For $p \in D$ we define
\eq{
    u(t, p, x) = (1-t)p + t \sum_\alpha r_\alpha(x) p_{c_\alpha} .
}
(Recall that $P$ is a single linear cell, so the weighted average of points of $P$
makes sense.)

So far we have defined $u(t, p, x)$ when $p$ lies in a $k$-handle of $J$.
For handles of $J$ of index less than $k$, we will define $u$ to
interpolate between the values on $k$-handles defined above.

If $p$ lies in a $k{-}1$-handle $E$, let $\eta : E \to [0,1]$ be the normal coordinate
of $E$.
In particular, $\eta$ is equal to 0 or 1 only at the intersection of $E$
with a $k$-handle.
Let $\beta$ be the index of the $K_\beta$ containing the $k{-}1$-cell
corresponding to $E$.
Let $q_0, q_1 \in P$ be the points associated to the two $k$-cells of $K_\beta$
adjacent to the $k{-}1$-cell corresponding to $E$.
For $p \in E$, define
\eq{
    u(t, p, x) = (1-t)p + t \left( \sum_{\alpha \ne \beta} r_\alpha(x) p_{c_\alpha}
            + r_\beta(x) (\eta(p) q_1 + (1-\eta(p)) q_0) \right) .
}

In general, for $E$ a $k{-}j$-handle, there is a normal coordinate
$\eta: E \to R$, where $R$ is some $j$-dimensional polyhedron.
The vertices of $R$ are associated to $k$-cells of the $K_\alpha$, and thence to points of $P$.
If we triangulate $R$ (without introducing new vertices), we can linearly extend
a map from the vertices of $R$ into $P$ to a map of all of $R$ into $P$.
Let $\cN$ be the set of all $\beta$ for which $K_\beta$ has a $k$-cell whose boundary meets
the $k{-}j$-cell corresponding to $E$.
For each $\beta \in \cN$, let $\{q_{\beta i}\}$ be the set of points in $P$ associated to the aforementioned $k$-cells.
Now define, for $p \in E$,
\begin{equation}
\label{eq:u}
    u(t, p, x) = (1-t)p + t \left(
            \sum_{\alpha \notin \cN} r_\alpha(x) p_{c_\alpha}
                + \sum_{\beta \in \cN} r_\beta(x) \left( \sum_i \eta_{\beta i}(p) \cdot q_{\beta i} \right)
             \right) .
\end{equation}
Here $\eta_{\beta i}(p)$ is the weight given to $q_{\beta i}$ by the linear extension
mentioned above.

This completes the definition of $u: I \times P \times X \to P$.

\medskip

Next we verify that $u$ has the desired properties.

Since $u(0, p, x) = p$ for all $p\in P$ and $x\in X$, $F(0, p, x) = f(p, x)$ for all $p$ and $x$.
Therefore $F$ is a homotopy from $f$ to something.

Next we show that if the $K_\alpha$'s are sufficiently fine cell decompositions,
then $F$ is a homotopy through diffeomorphisms.
We must show that the derivative $\pd{F}{x}(t, p, x)$ is non-singular for all $(t, p, x)$.
We have
\eq{
%   \pd{F}{x}(t, p, x) = \pd{f}{x}(u(t, p, x), x) + \pd{f}{p}(u(t, p, x), x) \pd{u}{x}(t, p, x) .
    \pd{F}{x} = \pd{f}{x} + \pd{f}{p} \pd{u}{x} .
}
Since $f$ is a family of diffeomorphisms, $\pd{f}{x}$ is non-singular and
\nn{bounded away from zero, or something like that}.
(Recall that $X$ and $P$ are compact.)
Also, $\pd{f}{p}$ is bounded.
So if we can insure that $\pd{u}{x}$ is sufficiently small, we are done.
It follows from Equation \eqref{eq:u} above that $\pd{u}{x}$ depends on $\pd{r_\alpha}{x}$
(which is bounded)
and the differences amongst the various $p_{c_\alpha}$'s and $q_{\beta i}$'s.
These differences are small if the cell decompositions $K_\alpha$ are sufficiently fine.
This completes the proof that $F$ is a homotopy through diffeomorphisms.

\medskip

Next we show that for each handle $D \sub P$, $F(1, \cdot, \cdot) : D\times X \to X$
is a singular cell adapted to $\cU$.
This will complete the proof of the lemma.
\nn{except for boundary issues and the `$P$ is a cell' assumption}

Let $j$ be the codimension of $D$.
(Or rather, the codimension of its corresponding cell.  From now on we will not make a distinction
between handle and corresponding cell.)
Then $j = j_1 + \cdots + j_m$, $0 \le m \le k$,
where the $j_i$'s are the codimensions of the $K_\alpha$
cells of codimension greater than 0 which intersect to form $D$.
We will show that
if the relevant $U_\alpha$'s are disjoint, then
$F(1, \cdot, \cdot) : D\times X \to X$
is a product of singular cells of dimensions $j_1, \ldots, j_m$.
If some of the relevant $U_\alpha$'s intersect, then we will get a product of singular
cells whose dimensions correspond to a partition of the $j_i$'s.
We will consider some simple special cases first, then do the general case.

First consider the case $j=0$ (and $m=0$).
A quick look at Equation xxxx above shows that $u(1, p, x)$, and hence $F(1, p, x)$,
is independent of $p \in P$.
So the corresponding map $D \to \Diff(X)$ is constant.

Next consider the case $j = 1$ (and $m=1$, $j_1=1$).
Now Equation yyyy applies.
We can write $D = D'\times I$, where the normal coordinate $\eta$ is constant on $D'$.
It follows that the singular cell $D \to \Diff(X)$ can be written as a product
of a constant map $D' \to \Diff(X)$ and a singular 1-cell $I \to \Diff(X)$.
The singular 1-cell is supported on $U_\beta$, since $r_\beta = 0$ outside of this set.

Next case: $j=2$, $m=1$, $j_1 = 2$.
This is similar to the previous case, except that the normal bundle is 2-dimensional instead of
1-dimensional.
We have that $D \to \Diff(X)$ is a product of a constant singular $k{-}2$-cell
and a 2-cell with support $U_\beta$.

Next case: $j=2$, $m=2$, $j_1 = j_2 = 1$.
In this case the codimension 2 cell $D$ is the intersection of two
codimension 1 cells, from $K_\beta$ and $K_\gamma$.
We can write $D = D' \times I \times I$, where the normal coordinates are constant
on $D'$, and the two $I$ factors correspond to $\beta$ and $\gamma$.
If $U_\beta$ and $U_\gamma$ are disjoint, then we can factor $D$ into a constant $k{-}2$-cell and
two 1-cells, supported on $U_\beta$ and $U_\gamma$ respectively.
If $U_\beta$ and $U_\gamma$ intersect, then we can factor $D$ into a constant $k{-}2$-cell and
a 2-cell supported on $U_\beta \cup U_\gamma$.
\nn{need to check that this is true}

\nn{finally, general case...}

\nn{this completes proof}

\end{proof}

\input{text/appendixes/explicit.tex}

