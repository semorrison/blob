%!TEX root = ../../blob1.tex

\section{Adapting families of maps to open covers}  \label{sec:localising}


Let $X$ and $T$ be topological spaces, with $X$ compact.
Let $\cU = \{U_\alpha\}$ be an open cover of $X$ which affords a partition of
unity $\{r_\alpha\}$.
(That is, $r_\alpha : X \to [0,1]$; $r_\alpha(x) = 0$ if $x\notin U_\alpha$;
for fixed $x$, $r_\alpha(x) \ne 0$ for only finitely many $\alpha$; and $\sum_\alpha r_\alpha = 1$.)
Since $X$ is compact, we will further assume that $r_\alpha = 0$ (globally) 
for all but finitely many $\alpha$.

Consider  $C_*(\Maps(X\to T))$, the singular chains on the space of continuous maps from $X$ to $T$.
$C_k(\Maps(X \to T))$ is generated by continuous maps
\[
	f: P\times X \to T ,
\]
where $P$ is some convex linear polyhedron in $\r^k$.
Recall that $f$ is {\it supported} on $S\sub X$ if $f(p, x)$ does not depend on $p$ when
$x \notin S$, and that $f$ is {\it adapted} to $\cU$ if 
$f$ is supported on the union of at most $k$ of the $U_\alpha$'s.
A chain $c \in C_*(\Maps(X \to T))$ is adapted to $\cU$ if it is a linear combination of 
generators which are adapted.

\begin{lemma} \label{basic_adaptation_lemma}
Let $f: P\times X \to T$, as above.
Then there exists
\[
	F: I \times P\times X \to T
\]
such that
\begin{enumerate}
\item $F(0, \cdot, \cdot) = f$ .
\item We can decompose $P = \cup_i D_i$ so that
the restrictions $F(1, \cdot, \cdot) : D_i\times X\to T$ are all adapted to $\cU$.
\item If $f$ has support $S\sub X$, then
$F: (I\times P)\times X\to T$ (a $k{+}1$-parameter family of maps) also has support $S$.
Furthermore, if $Q$ is a convex linear subpolyhedron of $\bd P$ and $f$ restricted to $Q$
has support $S' \subset X$, then
$F: (I\times Q)\times X\to T$ also has support $S'$.
\item Suppose both $X$ and $T$ are smooth manifolds, metric spaces, or PL manifolds, and 
let $\cX$ denote the subspace of $\Maps(X \to T)$ consisting of immersions or of diffeomorphisms (in the smooth case), 
bi-Lipschitz homeomorphisms (in the metric case), or PL homeomorphisms (in the PL case).
 If $f$ is smooth, Lipschitz or PL, as appropriate, and $f(p, \cdot):X\to T$ is in $\cX$ for all $p \in P$
then $F(t, p, \cdot)$ is also in $\cX$ for all $t\in I$ and $p\in P$.
\end{enumerate}
\end{lemma}

\begin{proof}
Our homotopy will have the form
\eqar{
    F: I \times P \times X &\to& X \\
    (t, p, x) &\mapsto& f(u(t, p, x), x)
}
for some function
\eq{
    u : I \times P \times X \to P .
}

First we describe $u$, then we argue that it makes the conclusions of the lemma true.

For each cover index $\alpha$ choose a cell decomposition $K_\alpha$ of $P$
such that the various $K_\alpha$ are in general position with respect to each other.
If we are in one of the cases of item 4 of the lemma, also choose $K_\alpha$
sufficiently fine as described below.

\def\jj{\tilde{L}}
Let $L$ be a common refinement of all the $K_\alpha$'s.
Let $\jj$ denote the handle decomposition of $P$ corresponding to $L$.
Each $i$-handle $C$ of $\jj$ has an $i$-dimensional tangential coordinate and,
more importantly for our purposes, a $k{-}i$-dimensional normal coordinate.
We will typically use the same notation for $i$-cells of $L$ and the 
corresponding $i$-handles of $\jj$.

For each (top-dimensional) $k$-cell $C$ of each $K_\alpha$, choose a point $p(C) \in C \sub P$.
If $C$ meets a subpolyhedron $Q$ of $\bd P$, we require that $p(C)\in Q$.
(It follows that if $C$ meets both $Q$ and $Q'$, then $p(C)\in Q\cap Q'$.
Ensuring this is possible corresponds to some mild constraints on the choice of the $K_\alpha$.)

Let $D$ be a $k$-handle of $\jj$.
For each $\alpha$ let $C(D, \alpha)$ be the $k$-cell of $K_\alpha$ which contains $D$
and let $p(D, \alpha) = p(C(D, \alpha))$.

For $p \in D$ we define
\eq{
    u(t, p, x) = (1-t)p + t \sum_\alpha r_\alpha(x) p(D, \alpha) .
}
(Recall that $P$ is a convex linear polyhedron, so the weighted average of points of $P$
makes sense.)

Thus far we have defined $u(t, p, x)$ when $p$ lies in a $k$-handle of $\jj$.
We will now extend $u$ inductively to handles of index less than $k$.

Let $E$ be a $k{-}1$-handle.
$E$ is homeomorphic to $B^{k-1}\times [0,1]$, and meets
the $k$-handles at $B^{k-1}\times\{0\}$ and $B^{k-1}\times\{1\}$.
Let $\eta : E \to [0,1]$, $\eta(x, s) = s$ be the normal coordinate
of $E$.
Let $D_0$ and $D_1$ be the two $k$-handles of $\jj$ adjacent to $E$.
There is at most one index $\beta$ such that $C(D_0, \beta) \ne C(D_1, \beta)$.
(If there is no such index, choose $\beta$
arbitrarily.)
For $p \in E$, define
\eq{
    u(t, p, x) = (1-t)p + t \left( \sum_{\alpha \ne \beta} r_\alpha(x) p(D_0, \alpha)
            + r_\beta(x) (\eta(p) p(D_0, \beta) + (1-\eta(p)) p(D_1, \beta)) \right) .
}


Now for the general case.
Let $E$ be a $k{-}j$-handle.
Let $D_0,\ldots,D_a$ be the $k$-handles adjacent to $E$.
There is a subset of cover indices $\cN$, of cardinality $j$, 
such that if $\alpha\notin\cN$ then
$p(D_u, \alpha) = p(D_v, \alpha)$ for all $0\le u,v \le a$.
For fixed $\beta\in\cN$ let $\{q_{\beta i}\}$ be the set of values of 
$p(D_u, \beta)$ for $0\le u \le a$.
Recall the product structure $E = B^{k-j}\times B^j$.
Inductively, we have defined functions $\eta_{\beta i}:\bd B^j \to [0,1]$ such that
$\sum_i \eta_{\beta i} = 1$ for all $\beta\in \cN$.
Choose extensions of $\eta_{\beta i}$ to all of $B^j$.
Via the projection $E\to B^j$, regard $\eta_{\beta i}$ as a function on $E$.
Now define, for $p \in E$,
\begin{equation}
\label{eq:u}
    u(t, p, x) = (1-t)p + t \left(
            \sum_{\alpha \notin \cN} r_\alpha(x) p(D_0, \alpha)
                + \sum_{\beta \in \cN} r_\beta(x) \left( \sum_i \eta_{\beta i}(p) \cdot q_{\beta i} \right)
             \right) .
\end{equation}

This completes the definition of $u: I \times P \times X \to P$. 
The formulas above are consistent: for $p$ at the boundary between a $k-j$-handle and 
a $k-(j+1)$-handle the corresponding expressions in Equation \eqref{eq:u} agree, 
since one of the normal coordinates becomes $0$ or $1$. 
Note that if $Q\sub \bd P$ is a convex linear subpolyhedron, then $u(I\times Q\times X) \sub Q$.

\medskip

Next we verify that $u$ affords $F$ the properties claimed in the statement of the lemma.

Since $u(0, p, x) = p$ for all $p\in P$ and $x\in X$, $F(0, p, x) = f(p, x)$ for all $p$ and $x$.
Therefore $F$ is a homotopy from $f$ to something.


\medskip

Next we show that for each handle $D$ of $J$, $F(1, \cdot, \cdot) : D\times X \to X$
is a singular cell adapted to $\cU$.
Let $k-j$ be the index of $D$.
Referring to Equation \eqref{eq:u}, we see that $F(1, p, x)$ depends on $p$ only if 
$r_\beta(x) \ne 0$ for some $\beta\in\cN$, i.e.\ only if
$x\in \bigcup_{\beta\in\cN} U_\beta$.
Since the cardinality of $\cN$ is $j$ which is less than or equal to $k$,
this shows that $F(1, \cdot, \cdot) : D\times X \to X$ is adapted to $\cU$.

\medskip

Next we show that $F$ does not increase supports.
If $f(p,x) = f(p',x)$ for all $p,p'\in P$,
then 
\[
	F(t, p, x) = f(u(t,p,x),x) = f(u(t',p',x),x) = F(t',p',x)
\]
for all $(t,p)$ and $(t',p')$ in $I\times P$.
Similarly, if $f(q,x) = f(q',x)$ for all $q,q'\in Q\sub \bd P$,
then 
\[
	F(t, q, x) = f(u(t,q,x),x) = f(u(t',q',x),x) = F(t',q',x)
\]
for all $(t,q)$ and $(t',q')$ in $I\times Q$.
(Recall that we arranged above that $u(I\times Q\times X) \sub Q$.)

\medskip

Now for claim 4 of the lemma.
Assume that $X$ and $T$ are smooth manifolds and that $f$ is a smooth family of diffeomorphisms.
We must show that we can choose the $K_\alpha$'s and $u$ so that $F(t, p, \cdot)$ is a 
diffeomorphism for all $t$ and $p$.
It suffices to 
show that the derivative $\pd{F}{x}(t, p, x)$ is non-singular for all $(t, p, x)$.
We have
\eq{
%   \pd{F}{x}(t, p, x) = \pd{f}{x}(u(t, p, x), x) + \pd{f}{p}(u(t, p, x), x) \pd{u}{x}(t, p, x) .
    \pd{F}{x} = \pd{f}{x} + \pd{f}{p} \pd{u}{x} .
}
Since $f$ is a family of diffeomorphisms and $X$ and $P$ are compact, 
$\pd{f}{x}$ is non-singular and bounded away from zero.
Also, since $f$ is smooth $\pd{f}{p}$ is bounded.
Thus if we can insure that $\pd{u}{x}$ is sufficiently small, we are done.
It follows from Equation \eqref{eq:u} above that $\pd{u}{x}$ depends on $\pd{r_\alpha}{x}$
(which is bounded)
and the differences amongst the various $p(D_0,\alpha)$'s and $q_{\beta i}$'s.
These differences are small if the cell decompositions $K_\alpha$ are sufficiently fine.
This completes the proof that $F$ is a homotopy through diffeomorphisms.

If we replace ``diffeomorphism" with ``immersion" in the above paragraph, the argument goes
through essentially unchanged.

Next we consider the case where $f$ is a family of bi-Lipschitz homeomorphisms.
Recall that we assume that $f$ is Lipschitz in the $P$ direction as well.
The argument in this case is similar to the one above for diffeomorphisms, with
bounded partial derivatives replaced by Lipschitz constants.
Since $X$ and $P$ are compact, there is a universal bi-Lipschitz constant that works for 
$f(p, \cdot)$ for all $p$.
By choosing the cell decompositions $K_\alpha$ sufficiently fine,
we can insure that $u$ has a small Lipschitz constant in the $X$ direction.
This allows us to show that $F(t, p, \cdot)$ has a bi-Lipschitz constant
close to the universal bi-Lipschitz constant for $f$.

Since PL homeomorphisms are bi-Lipschitz, we have established this last remaining case of claim 4 of the lemma as well.
\end{proof}

\begin{lemma} \label{extension_lemma_c}
Let $\cX_*$ be any of $C_*(\Maps(X \to T))$ or singular chains on the 
subspace of $\Maps(X\to T)$ consisting of immersions, diffeomorphisms, 
bi-Lipschitz homeomorphisms or PL homeomorphisms.
Let $G_* \subset \cX_*$ denote the chains adapted to an open cover $\cU$
of $X$.
Then $G_*$ is a strong deformation retract of $\cX_*$.
\end{lemma}
\begin{proof}
It suffices to show that given a generator $f:P\times X\to T$ of $\cX_k$ with
$\bd f \in G_{k-1}$ there exists $h\in \cX_{k+1}$ with $\bd h = f + g$ and $g \in G_k$.
This is exactly what Lemma \ref{basic_adaptation_lemma}
gives us.
More specifically, let $\bd P = \sum Q_i$, with each $Q_i\in G_{k-1}$.
Let $F: I\times P\times X\to T$ be the homotopy constructed in Lemma \ref{basic_adaptation_lemma}.
Then $\bd F$ is equal to $f$ plus $F(1, \cdot, \cdot)$ plus the restrictions of $F$ to $I\times Q_i$.
Part 2 of Lemma \ref{basic_adaptation_lemma} says that $F(1, \cdot, \cdot)\in G_k$,
while part 3 of Lemma \ref{basic_adaptation_lemma} says that the restrictions to $I\times Q_i$ are in $G_k$.
\end{proof}

\medskip

\nn{need to clean up references from the main text to the lemmas of this section}

%%%%%% Lo, \noop{...}
\noop{

\medskip

\nn{do we want to keep the following?}

\nn{ack! not easy to adapt (pun) this old text to continuous maps (instead of homeos, as
in the old version); just delete (\\noop) it all for now}

The above lemmas remain true if we replace ``adapted" with ``strongly adapted", as defined below.
The proof of Lemma \ref{basic_adaptation_lemma} is modified by
choosing the common refinement $L$ and interpolating maps $\eta$
slightly more carefully.
Since we don't need the stronger result, we omit the details.

Let $X$, $T$ and $\cU$ be as above.
A $k$-parameter family of maps $f: P \times X \to T$ is
{\it strongly adapted to $\cU$} if there is a factorization
\eq{
    P = P_1 \times \cdots \times P_m
}
(for some $m \le k$)
and families of homeomorphisms
\eq{
    f_i :  P_i \times X \to T
}
such that
\begin{itemize}
\item each $f_i$ is supported on some connected $V_i \sub X$;
\item the sets $V_i$ are mutually disjoint;
\item each $V_i$ is the union of at most $k_i$ of the $U_\alpha$'s,
where $k_i = \dim(P_i)$; and
\item $f(p, \cdot) = g \circ f_1(p_1, \cdot) \circ \cdots \circ f_m(p_m, \cdot)$
for all $p = (p_1, \ldots, p_m)$, for some fixed $g:X\to T$.
\end{itemize}

}
% end \noop

