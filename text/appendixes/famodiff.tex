%!TEX root = ../../blob1.tex

\section{Adapting families of maps to open covers}  \label{sec:localising}

In this appendix we prove some results about adapting families of maps to open covers.
These results are used in Lemma \ref{small-top-blobs} and Theorem \ref{thm:map-recon}.

Let $X$ and $T$ be topological spaces, with $X$ compact.
Let $\cU = \{U_\alpha\}$ be an open cover of $X$ which affords a partition of
unity $\{r_\alpha\}$.
(That is, $r_\alpha : X \to [0,1]$; $r_\alpha(x) = 0$ if $x\notin U_\alpha$;
for fixed $x$, $r_\alpha(x) \ne 0$ for only finitely many $\alpha$; and $\sum_\alpha r_\alpha = 1$.)
Since $X$ is compact, we will further assume that $r_\alpha = 0$ (globally) 
for all but finitely many $\alpha$.

Consider  $C_*(\Maps(X\to T))$, the singular chains on the space of continuous maps from $X$ to $T$.
$C_k(\Maps(X \to T))$ is generated by continuous maps
\[
	f: P\times X \to T ,
\]
where $P$ is some convex linear polyhedron in $\r^k$.
Recall that $f$ is {\it supported} on $S\sub X$ if $f(p, x)$ does not depend on $p$ when
$x \notin S$, and that $f$ is {\it adapted} to $\cU$ if 
$f$ is supported on the union of at most $k$ of the $U_\alpha$'s.
A chain $c \in C_*(\Maps(X \to T))$ is adapted to $\cU$ if it is a linear combination of 
generators which are adapted.

\begin{lemma} \label{basic_adaptation_lemma}
Let $f: P\times X \to T$, as above.
Then there exists
\[
	F: I \times P\times X \to T
\]
such that the following conditions hold.
\begin{enumerate}
\item $F(0, \cdot, \cdot) = f$.
\item We can decompose $P = \cup_i D_i$ so that
the restrictions $F(1, \cdot, \cdot) : D_i\times X\to T$ are all adapted to $\cU$.
\item If $f$ has support $S\sub X$, then
$F: (I\times P)\times X\to T$ (a $k{+}1$-parameter family of maps) also has support $S$.
Furthermore, if $Q$ is a convex linear subpolyhedron of $\bd P$ and $f$ restricted to $Q$
has support $S' \subset X$, then
$F: (I\times Q)\times X\to T$ also has support $S'$.
\item Suppose both $X$ and $T$ are smooth manifolds, metric spaces, or PL manifolds, and 
let $\cX$ denote the subspace of $\Maps(X \to T)$ consisting of immersions or of diffeomorphisms (in the smooth case), 
bi-Lipschitz homeomorphisms (in the metric case), or PL homeomorphisms (in the PL case).
 If $f$ is smooth, Lipschitz or PL, as appropriate, and $f(p, \cdot):X\to T$ is in $\cX$ for all $p \in P$
then $F(t, p, \cdot)$ is also in $\cX$ for all $t\in I$ and $p\in P$.
\end{enumerate}
\end{lemma}

%Note: We will prove a version of item 4 of Lemma \ref{basic_adaptation_lemma} for topological
%homeomorphisms in Lemma \ref{basic_adaptation_lemma_2} below.
%Since the proof is rather different we segregate it to a separate lemma.

\begin{proof}
Our homotopy will have the form
\eqar{
    F: I \times P \times X &\to& X \\
    (t, p, x) &\mapsto& f(u(t, p, x), x)
}
for some function
\eq{
    u : I \times P \times X \to P .
}

First we describe $u$, then we argue that it makes the conclusions of the lemma true.

For each cover index $\alpha$ choose a cell decomposition $K_\alpha$ of $P$
such that the various $K_\alpha$ are in general position with respect to each other.
If we are in one of the cases of item 4 of the lemma, also choose $K_\alpha$
sufficiently fine as described below.

\def\jj{\tilde{L}}
Let $L$ be a common refinement of all the $K_\alpha$'s.
Let $\jj$ denote the handle decomposition of $P$ corresponding to $L$.
Each $i$-handle $C$ of $\jj$ has an $i$-dimensional tangential coordinate and,
more importantly for our purposes, a $k{-}i$-dimensional normal coordinate.
We will typically use the same notation for $i$-cells of $L$ and the 
corresponding $i$-handles of $\jj$.

For each (top-dimensional) $k$-cell $C$ of each $K_\alpha$, choose a point $p(C) \in C \sub P$.
If $C$ meets a subpolyhedron $Q$ of $\bd P$, we require that $p(C)\in Q$.
(It follows that if $C$ meets both $Q$ and $Q'$, then $p(C)\in Q\cap Q'$.
Ensuring this is possible corresponds to some mild constraints on the choice of the $K_\alpha$.)

Let $D$ be a $k$-handle of $\jj$.
For each $\alpha$ let $C(D, \alpha)$ be the $k$-cell of $K_\alpha$ which contains $D$
and let $p(D, \alpha) = p(C(D, \alpha))$.

For $p \in D$ we define
\eq{
    u(t, p, x) = (1-t)p + t \sum_\alpha r_\alpha(x) p(D, \alpha) .
}
(Recall that $P$ is a convex linear polyhedron, so the weighted average of points of $P$
makes sense.)

Thus far we have defined $u(t, p, x)$ when $p$ lies in a $k$-handle of $\jj$.
We will now extend $u$ inductively to handles of index less than $k$.

Let $E$ be a $k{-}1$-handle.
$E$ is homeomorphic to $B^{k-1}\times [0,1]$, and meets
the $k$-handles at $B^{k-1}\times\{0\}$ and $B^{k-1}\times\{1\}$.
Let $\eta : E \to [0,1]$, $\eta(x, s) = s$ be the normal coordinate
of $E$.
Let $D_0$ and $D_1$ be the two $k$-handles of $\jj$ adjacent to $E$.
There is at most one index $\beta$ such that $C(D_0, \beta) \ne C(D_1, \beta)$.
(If there is no such index, choose $\beta$
arbitrarily.)
For $p \in E$, define
\eq{
    u(t, p, x) = (1-t)p + t \left( \sum_{\alpha \ne \beta} r_\alpha(x) p(D_0, \alpha)
            + r_\beta(x) (\eta(p) p(D_0, \beta) + (1-\eta(p)) p(D_1, \beta)) \right) .
}


Now for the general case.
Let $E$ be a $k{-}j$-handle.
Let $D_0,\ldots,D_a$ be the $k$-handles adjacent to $E$.
There is a subset of cover indices $\cN$, of cardinality $j$, 
such that if $\alpha\notin\cN$ then
$p(D_u, \alpha) = p(D_v, \alpha)$ for all $0\le u,v \le a$.
For fixed $\beta\in\cN$ let $\{q_{\beta i}\}$ be the set of values of 
$p(D_u, \beta)$ for $0\le u \le a$.
Recall the product structure $E = B^{k-j}\times B^j$.
Inductively, we have defined functions $\eta_{\beta i}:\bd B^j \to [0,1]$ such that
$\sum_i \eta_{\beta i} = 1$ for all $\beta\in \cN$.
Choose extensions of $\eta_{\beta i}$ to all of $B^j$.
Via the projection $E\to B^j$, regard $\eta_{\beta i}$ as a function on $E$.
Now define, for $p \in E$,
\begin{equation}
\label{eq:u}
    u(t, p, x) = (1-t)p + t \left(
            \sum_{\alpha \notin \cN} r_\alpha(x) p(D_0, \alpha)
                + \sum_{\beta \in \cN} r_\beta(x) \left( \sum_i \eta_{\beta i}(p) \cdot q_{\beta i} \right)
             \right) .
\end{equation}

This completes the definition of $u: I \times P \times X \to P$. 
The formulas above are consistent: for $p$ at the boundary between a $k-j$-handle and 
a $k-(j+1)$-handle the corresponding expressions in Equation \eqref{eq:u} agree, 
since one of the normal coordinates becomes $0$ or $1$. 
Note that if $Q\sub \bd P$ is a convex linear subpolyhedron, then $u(I\times Q\times X) \sub Q$.

\medskip

Next we verify that $u$ affords $F$ the properties claimed in the statement of the lemma.

Since $u(0, p, x) = p$ for all $p\in P$ and $x\in X$, $F(0, p, x) = f(p, x)$ for all $p$ and $x$.
Therefore $F$ is a homotopy from $f$ to something.


\medskip

Next we show that for each handle $D$ of $J$, $F(1, \cdot, \cdot) : D\times X \to X$
is a singular cell adapted to $\cU$.
Let $k-j$ be the index of $D$.
Referring to Equation \eqref{eq:u}, we see that $F(1, p, x)$ depends on $p$ only if 
$r_\beta(x) \ne 0$ for some $\beta\in\cN$, i.e.\ only if
$x\in \bigcup_{\beta\in\cN} U_\beta$.
Since the cardinality of $\cN$ is $j$ which is less than or equal to $k$,
this shows that $F(1, \cdot, \cdot) : D\times X \to X$ is adapted to $\cU$.

\medskip

Next we show that $F$ does not increase supports.
If $f(p,x) = f(p',x)$ for all $p,p'\in P$,
then 
\[
	F(t, p, x) = f(u(t,p,x),x) = f(u(t',p',x),x) = F(t',p',x)
\]
for all $(t,p)$ and $(t',p')$ in $I\times P$.
Similarly, if $f(q,x) = f(q',x)$ for all $q,q'\in Q\sub \bd P$,
then 
\[
	F(t, q, x) = f(u(t,q,x),x) = f(u(t',q',x),x) = F(t',q',x)
\]
for all $(t,q)$ and $(t',q')$ in $I\times Q$.
(Recall that we arranged above that $u(I\times Q\times X) \sub Q$.)

\medskip

Now for claim 4 of the lemma.
Assume that $X$ and $T$ are smooth manifolds and that $f$ is a smooth family of diffeomorphisms.
We must show that we can choose the $K_\alpha$'s and $u$ so that $F(t, p, \cdot)$ is a 
diffeomorphism for all $t$ and $p$.
It suffices to 
show that the derivative $\pd{F}{x}(t, p, x)$ is non-singular for all $(t, p, x)$.
We have
\eq{
%   \pd{F}{x}(t, p, x) = \pd{f}{x}(u(t, p, x), x) + \pd{f}{p}(u(t, p, x), x) \pd{u}{x}(t, p, x) .
    \pd{F}{x} = \pd{f}{x} + \pd{f}{p} \pd{u}{x} .
}
Since $f$ is a family of diffeomorphisms and $X$ and $P$ are compact, 
$\pd{f}{x}$ is non-singular and bounded away from zero.
Also, since $f$ is smooth $\pd{f}{p}$ is bounded.
Thus if we can insure that $\pd{u}{x}$ is sufficiently small, we are done.
It follows from Equation \eqref{eq:u} above that $\pd{u}{x}$ depends on $\pd{r_\alpha}{x}$
(which is bounded)
and the differences amongst the various $p(D_0,\alpha)$'s and $q_{\beta i}$'s.
These differences are small if the cell decompositions $K_\alpha$ are sufficiently fine.
This completes the proof that $F$ is a homotopy through diffeomorphisms.

If we replace ``diffeomorphism" with ``immersion" in the above paragraph, the argument goes
through essentially unchanged.

Next we consider the case where $f$ is a family of bi-Lipschitz homeomorphisms.
Recall that we assume that $f$ is Lipschitz in the $P$ direction as well.
The argument in this case is similar to the one above for diffeomorphisms, with
bounded partial derivatives replaced by Lipschitz constants.
Since $X$ and $P$ are compact, there is a universal bi-Lipschitz constant that works for 
$f(p, \cdot)$ for all $p$.
By choosing the cell decompositions $K_\alpha$ sufficiently fine,
we can insure that $u$ has a small Lipschitz constant in the $X$ direction.
This allows us to show that $F(t, p, \cdot)$ has a bi-Lipschitz constant
close to the universal bi-Lipschitz constant for $f$.

Since PL homeomorphisms are bi-Lipschitz, we have established this last remaining case of claim 4 of the lemma as well.
\end{proof}


% Edwards-Kirby: MR0283802

\noop { %%%%%% begin \noop %%%%%%%%%%%%%%%%%%%%%%%

The above proof doesn't work for homeomorphisms which are merely continuous.
The $k=1$ case for plain, continuous homeomorphisms 
is more or less equivalent to Corollary 1.3 of \cite{MR0283802}.
The proof found in \cite{MR0283802} of that corollary can be adapted to many-parameter families of
homeomorphisms:

\begin{lemma} \label{basic_adaptation_lemma_2}
Lemma \ref{basic_adaptation_lemma} holds for continuous homeomorphisms
in item 4.
\end{lemma}

\begin{proof}
The proof is similar to the proof of Corollary 1.3 of \cite{MR0283802}.

Since $X$ is compact, we may assume without loss of generality that the cover $\cU$ is finite.
Let $\cU = \{U_\alpha\}$, $1\le \alpha\le N$.

We will need some wiggle room, so for each $\alpha$ choose $2N$ additional open sets
\[
	U_\alpha = U_\alpha^0 \supset U_\alpha^\frac12 \supset U_\alpha^1 \supset U_\alpha^\frac32 \supset \cdots \supset U_\alpha^N
\]
so that for each fixed $i$ the set $\cU^i = \{U_\alpha^i\}$ is an open cover of $X$, and also so that
the closure $\ol{U_\alpha^i}$ is compact and $U_\alpha^{i-\frac12} \supset \ol{U_\alpha^i}$.
%\nn{say specifically how many we need?}

Let $P$ be some $k$-dimensional polyhedron and $f:P\to \Homeo(X)$.
After subdividing $P$, we may assume that there exists $g\in \Homeo(X)$
such that $g^{-1}\circ f(P)$ is contained in a small neighborhood of the 
identity in $\Homeo(X)$.
The sense of ``small" we mean will be explained below.
It depends only on $\cU$ and the choice of $U_\alpha^i$'s.

Our goal is to homotope $P$, rel boundary, so that it is adapted to $\cU$.
By the local contractibility of $\Homeo(X)$ (Corollary 1.1 of \cite{MR0283802}), 
it suffices to find $f':P\to \Homeo(X)$ such that $f' = f$ on $\bd P$ and $f'$ is adapted to $\cU$.

We may assume, inductively, that the restriction of $f$ to $\bd P$ is adapted to $\cU^N$.
So $\bd P = \sum Q_\beta$, and the support of $f$ restricted to $Q_\beta$ is $V_\beta^N$, the union of $k-1$ of
the $U_\alpha^N$'s.  Define $V_\beta^i \sup V_\beta^N$ to be the corresponding union of $k-1$
of the $U_\alpha^i$'s.

Define
\[
	W_j^i = U_1^i \cup U_2^i \cup \cdots \cup U_j^i .
\]

By the local contractibility of $\Homeo(X)$ (Corollary 1.1 of \cite{MR0283802}), 

We will construct a sequence of maps $f_i : \bd P\to \Homeo(X)$, for $i = 0, 1, \ldots, N$, with the following properties:
\begin{itemize}
\item[(A)] $f_0 = f|_{\bd P}$;
\item[(B)] $f_i = g$ on $W_i^i$;
\item[(C)] $f_i$ restricted to $Q_\beta$ has support contained in $V_\beta^{N-i}$; and
\item[(D)] there is a homotopy $F_i : \bd P\times I \to \Homeo(X)$ from $f_{i-1}$ to $f_i$ such that the 
support of $F_i$ restricted to $Q_\beta\times I$ is contained in $U_i^i\cup V_\beta^{N-i}$.
\nn{check this when done writing}
\end{itemize}

Once we have the $F_i$'s as in (D), we can finish the argument as follows.
Assemble the $F_i$'s into a map $F: \bd P\times [0,N] \to \Homeo(X)$.
$F$ is adapted to $\cU$ by (D).
$F$ restricted to $\bd P\times\{N\}$ is constant on $W_N^N = X$ by (B).
We can therefore view $F$ as a map $f'$ from $\Cone(\bd P) \cong P$ to $\Homeo(X)$
which is adapted to $\cU$.

The homotopies $F_i$ will be composed of three types of pieces, $A_\beta$, $B_\beta$ and $C$, % NOT C_\beta
as illustrated in Figure \nn{xxxx}.
($A_\beta$, $B_\beta$ and $C$ also depend on $i$, but we are suppressing that from the notation.)
The homotopy $A_\beta : Q_\beta \times I \to \Homeo(X)$ will arrange that $f_i$ agrees with $g$
on $U_i^i \setmin V_\beta^{N-i+1}$.
The homotopy $B_\beta : Q_\beta \times I \to \Homeo(X)$ will extend the agreement with $g$ to all of $U_i^i$.
The homotopies $C$ match things up between $\bd Q_\beta \times I$ and $\bd Q_{\beta'} \times I$ when
$Q_\beta$ and $Q_{\beta'}$ are adjacent.

Assume inductively that we have defined $f_{i-1}$.

Now we define $A_\beta$.
Choose $q_0\in Q_\beta$.
Theorem 5.1 of \cite{MR0283802} implies that we can choose a homotopy $h:I \to \Homeo(X)$, with $h(0)$ the identity, such that
\begin{itemize}
\item[(E)] the support of $h$ is contained in $U_i^{i-1} \setmin W_{i-1}^{i-\frac12}$; and
\item[(F)] $h(1) \circ f_{i-1}(q_0) = g$ on $U_i^i$.
\end{itemize}
Define $A_\beta$ by
\[
	A_\beta(q, t) = h(t) \circ f_{i-1}(q) .
\]
It follows that
\begin{itemize}
\item[(G)] $A_\beta(q,1) = A(q',1)$, for all $q,q' \in Q_\beta$, on $X \setmin V_\beta^{N-i+1}$;
\item[(H)] $A_\beta(q, 1) = g$ on $(U_i^i \cup W_{i-1}^{i-\frac12})\setmin V_\beta^{N-i+1}$; and
\item[(I)] the support of $A_\beta$ is contained in $U_i^{i-1} \cup V_\beta^{N-i+1}$.
\end{itemize}

Next we define $B_\beta$.
Theorem 5.1 of \cite{MR0283802} implies that we can choose a homotopy $B_\beta:Q_\beta\times I\to \Homeo(X)$
such that
\begin{itemize}
\item[(J)] $B_\beta(\cdot, 0) = A_\beta(\cdot, 1)$;
\item[(K)] $B_\beta(q,1) = g$ on $W_i^i$;
\item[(L)] the support of $B_\beta(\cdot,1)$ is contained in $V_\beta^{N-i}$; and
\item[(M)] the support of $B_\beta$ is contained in $U_i^i \cup V_\beta^{N-i}$.
\end{itemize}

All that remains is to define the ``glue" $C$ which interpolates between adjacent $Q_\beta$ and $Q_{\beta'}$.
First consider the $k=2$ case.
(In this case Figure \nn{xxxx} is literal rather than merely schematic.)
Let $q = Q_\beta \cap Q_{\beta'}$ be a point on the boundaries of both $Q_\beta$ and $Q_{\beta'}$.
We have an arc of Homeomorphisms, composed of $B_\beta(q, \cdot)$, $A_\beta(q, \cdot)$, 
$A_{\beta'}(q, \cdot)$ and $B_{\beta'}(q, \cdot)$, which connects $B_\beta(q, 1)$ to $B_{\beta'}(q, 1)$.

\nn{Hmmmm..... I think there's a problem here}



\nn{resume revising here}


\nn{scraps:}

To apply Theorem 5.1 of \cite{MR0283802}, the family $f(P)$ must be sufficiently small,
and the subdivision mentioned above is chosen fine enough to insure this.

\end{proof}

} %%%%%% end \noop %%%%%%%%%%%%%%%%%%%

\begin{lemma} \label{extension_lemma_c}
Let $\cX_*$ be any of $C_*(\Maps(X \to T))$ or singular chains on the 
subspace of $\Maps(X\to T)$ consisting of immersions, diffeomorphisms, 
bi-Lipschitz homeomorphisms, or PL homeomorphisms.
Let $G_* \subset \cX_*$ denote the chains adapted to an open cover $\cU$
of $X$.
Then $G_*$ is a strong deformation retract of $\cX_*$.
\end{lemma}
\begin{proof}
It suffices to show that given a generator $f:P\times X\to T$ of $\cX_k$ with
$\bd f \in G_{k-1}$ there exists $h\in \cX_{k+1}$ with $\bd h = f + g$ and $g \in G_k$.
This is exactly what Lemma \ref{basic_adaptation_lemma}
gives us.
More specifically, let $\bd P = \sum Q_i$, with each $Q_i\in G_{k-1}$.
Let $F: I\times P\times X\to T$ be the homotopy constructed in Lemma \ref{basic_adaptation_lemma}.
Then $\bd F$ is equal to $f$ plus $F(1, \cdot, \cdot)$ plus the restrictions of $F$ to $I\times Q_i$.
Part 2 of Lemma \ref{basic_adaptation_lemma} says that $F(1, \cdot, \cdot)\in G_k$,
while part 3 of Lemma \ref{basic_adaptation_lemma} says that the restrictions to $I\times Q_i$ are in $G_k$.
\end{proof}

\medskip


%%%%%% Lo, \noop{...}
\noop{

\medskip

\nn{do we want to keep the following?}

\nn{ack! not easy to adapt (pun) this old text to continuous maps (instead of homeos, as
in the old version); just delete (\\noop) it all for now}

The above lemmas remain true if we replace ``adapted" with ``strongly adapted", as defined below.
The proof of Lemma \ref{basic_adaptation_lemma} is modified by
choosing the common refinement $L$ and interpolating maps $\eta$
slightly more carefully.
Since we don't need the stronger result, we omit the details.

Let $X$, $T$ and $\cU$ be as above.
A $k$-parameter family of maps $f: P \times X \to T$ is
{\it strongly adapted to $\cU$} if there is a factorization
\eq{
    P = P_1 \times \cdots \times P_m
}
(for some $m \le k$)
and families of homeomorphisms
\eq{
    f_i :  P_i \times X \to T
}
such that
\begin{itemize}
\item each $f_i$ is supported on some connected $V_i \sub X$;
\item the sets $V_i$ are mutually disjoint;
\item each $V_i$ is the union of at most $k_i$ of the $U_\alpha$'s,
where $k_i = \dim(P_i)$; and
\item $f(p, \cdot) = g \circ f_1(p_1, \cdot) \circ \cdots \circ f_m(p_m, \cdot)$
for all $p = (p_1, \ldots, p_m)$, for some fixed $g:X\to T$.
\end{itemize}

}
% end \noop

