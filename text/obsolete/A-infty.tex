%!TEX root = ../blob1.tex

\section{Homological systems of fields}
\label{sec:homological-fields}

\nn{*** If we keep Section \ref{sec:ncats}, then this section becomes obsolete.
Retain it for now.}

In this section, we extend the definition of blob homology to allow \emph{homological systems of fields}.

We begin with a definition of a \emph{topological $A_\infty$ category}, and then introduce the notion of a homological system of fields. A topological $A_\infty$ category gives a $1$-dimensional homological system of fields. We'll suggest that any good definition of a topological $A_\infty$ $n$-category with duals should allow construction of an $n$-dimensional homological system of fields, but we won't propose any such definition here. Later, we extend the definition of blob homology to allow homological fields as input. These definitions allow us to state and prove a theorem about the blob homology of a product manifold, and an intermediate theorem about gluing, in preparation for the proof of Property \ref{property:gluing}.

\subsection{Topological $A_\infty$ categories}
In this section we define a notion of `topological $A_\infty$ category' and sketch an equivalence with the usual definition of $A_\infty$ category. We then define `topological $A_\infty$ modules', and their morphisms and tensor products.

\nn{And then we generalize all of this to $A_\infty$ $n$-categories [is this the
best name for them?]}

\begin{defn}
\label{defn:topological-Ainfty-category}%
A \emph{topological $A_\infty$ category} $\cC$ has a set of objects $\Obj(\cC)$, and for each interval $J$ and objects $a,b \in \Obj(\cC)$, a chain complex $\cC(J;a,b)$, along with
\begin{itemize}
\item for each pair of intervals $J_1$, $J_2$ so that $J_1 \cup_{\text{pt}} J_2$ is also an interval, `gluing' chain maps
$$gl: \cC(J_1;a,b) \tensor \cC(J_2;b,c) \to \cC(J_1 \cup J_2;a,c),$$
\item and `evaluation' chain maps $\CD{J \to J'} \tensor \cC(J;a,b) \to \cC(J';a,b)$
\end{itemize}
such that 
\begin{itemize}
\item the gluing maps compose strictly associatively,
\item the evaluation maps compose, up to a weakly unique homotopy,
\item and the evaluation maps are compatible with the gluing maps, up to a weakly unique homotopy.
\end{itemize}
\end{defn}

Appendix \ref{sec:comparing-A-infty} explains the translation between this definition and the usual one expressed in terms of `associativity up to higher homotopy', as in \cite{MR1854636}. (In this version of the paper, that appendix is incomplete, however.)

\nn{should say something about objects and restrictions of maps to boundaries of intervals 
in next paragraph.}

The motivating example is `chains of maps to $M$' for some fixed target space $M$. This is a topological $A_\infty$ category $\Xi_M$ with $\Xi_M(J) = C_*(\Maps(J \to M))$. The gluing maps $\Xi_M(J) \tensor \Xi_M(J') \to \Xi_M(J \cup J')$  takes the product of singular chains, then glues maps to $M$ together; the associativity condition is automatically satisfied. The evaluation map $\ev_{J,J'} : \CD{J \to J'} \tensor \Xi_M(J) \to \Xi_M(J')$ is the composition
\begin{align*}
\CD{J \to J'} \tensor C_*(\Maps(J \to M)) & \to C_*(\Diff(J \to J') \times \Maps(J \to M)) \\ & \to C_*(\Maps(J' \to M)),
\end{align*}
where the first map is the product of singular chains, and the second is precomposition by the inverse of a diffeomorphism.

We now define left-modules, right-modules and bimodules over a topological $A_\infty$ category. We'll say that a right-marked interval is a pair $(J,p)$, diffeomorphic to the pair $([0,1],1)$, and similarly for a left-marked interval. Recall in what follows that when we write a union of interval $J \cup J'$, we're implicitly assuming that both intervals are oriented, and that the union glues together the `highest' point of $J$ with the `lowest' point of $J'$.

\begin{defn}
\label{defn:topological-Ainfty-module}%
A \emph{topological $A_\infty$ left-module} $\cM$ over a topological $A_\infty$ category $\cC$ has for each right-marked interval $(J,p)$ and object $a \in \Obj(\cM)$ a chain complex $\cM(J,p; a)$, along with
\begin{itemize}
\item for each right-marked interval $(J,p)$, and interval $J'$ so that $J' \cup J$ is also right-marked interval, `gluing' chain maps
$$gl: \cC(J';a,b) \tensor \cM(J,p;b) \to \cM(J' \cup J,p;a),$$
\item and `evaluation' chain maps $\CD{(J,p) \to (J',p')} \tensor \cM(J,p;a) \to \cM(J',p';a)$
\end{itemize}
satisfying the same axioms given for a topological $A_\infty$ category in Definition \ref{defn:topological-Ainfty-category}.
\end{defn}

A right module is the same, replacing right-marked intervals with left-marked intervals, and changing the order of the factors in the gluing maps.

\begin{defn}
\label{defn:topological-Ainfty-bimodule}%
A \emph{topological $A_\infty$ bimodule} $\cM$ over a topological $A_\infty$ category $\cC$ has for each pair of a right-marked interval $(J,p)$ and a left-marked interval $(K,q)$ and object $a,b \in \Obj(\cM)$ a chain complex $\cM(J,p,K,q; a,b)$, along with
\begin{itemize}
\item for each pair of marked intervals $(J,p)$ and $(K,q)$, for each interval $J'$ so that $J' \cup J$ is also right-marked interval, a `gluing' chain maps
$$gl: \cC(J';a',a) \tensor \cM(J,p,K,q;a,b) \to \cM(J' \cup J,p,K,q;a',b),$$
and for each interval $K'$ so that $K \cup K'$ is also a left-marked interval, maps
$$gl: \cM(J,p,K,q;a,b) \tensor \cC(K';b,b') \to \cM(J,p,K \cup K',q;a,b'),$$
\item and `evaluation' chain maps $\CD{(J,p) \to (J',p')} \tensor \cM(J,p,K,q;a,b) \to \cM(J',p',K,q;a,b)$ and 
\end{itemize}
satisfying the same axioms given for a topological $A_\infty$ category in Definition \ref{defn:topological-Ainfty-category}.
\end{defn}

We now define the tensor product of a left module with a right module. The notion of the self-tensor product of a bimodule is a minor variation which we'll leave to the reader.
Our definition requires choosing a `fixed' interval, and for simplicity we'll use $[0,1]$, but you should note that the definition is equivariant with respect to diffeomorphisms of this interval.

\nn{maybe should do a general interval instead of $[0,1]$.}

\begin{defn}
The tensor product of a left module $\cM$ and a right module $\cN$ over a topological $A_\infty$ category $\cC$, denoted $\cM \tensor_{\cC} \cN$, is a vector space, which we'll specify as the limit of a certain commutative diagram. This (infinite) diagram has vertices indexed by partitions $$[0,1] = [0,x_1] \cup \cdots \cup [x_k,1]$$ and boundary conditions $$a_1, \ldots, a_k \in \Obj(\cC),$$ and arrows labeled by refinements. At each vertex put the vector space $$\cM([0,x_1],0; a_1) \tensor \cC([x_1,x_2];a_1,a_2]) \tensor \cdots \tensor \cC([x_{k-1},x_k];a_{k-1},a_k) \tensor \cN([x_k,1],1;a_k),$$ and on each arrow the corresponding gluing map. Faces of this diagram commute because the gluing maps compose associatively.
\end{defn}

For completeness, we still need to define morphisms between modules and duals of modules, and explain how the functors $\hom_{\lmod{\cC}}\left(\cM \to -\right)$ and $\cM^* \tensor_{\cC} -$ from $\lmod{\cC}$ to $\Vect$ are naturally isomorphic. We don't actually need this for the present version of the paper, so the half-written discussion has been banished to Appendix \ref{sec:A-infty-hom-and-duals}.

\subsection{Homological systems of fields}
A homological system of fields $\cF$ is nothing more than a system of fields in the category $\Kom$ of complexes of vector spaces; that is, the set of top level fields with given boundary conditions is always a complex.



A topological $A_\infty$ category $\cC$ gives rise to a one dimensional homological system of fields. The functor $\cF_0$ simply assigns the set of objects of $\cC$ to a point. 
For a $1$-manifold $X$, define a \emph{decomposition of $X$} with labels in $\cL$ as a (possibly empty) set of disjoint closed intervals $\{J\}$ in $X$, and a labeling of the complementary regions by elements of $\cL$.

The functor $\cF_1$ assigns to a $1$-manifold $X$ the vector space
\begin{equation*}
\cF_1(X) = \DirectSum_{\substack{\cJ \\ \text{a decomposition of $X$}}} \Tensor_{J \in \cJ} \cC_{l(J),r(J)}
\end{equation*}
where $l(J)$ and $r(J)$ denote the labels on the complementary regions on either side of the interval $J$. If $X$ has boundary, and we specify a boundary condition $c$ consisting of a label from $\Obj(\cC)$ at each boundary point, $\cF_1(X;c)$ is just the direct sum over decompositions agreeing with these boundary conditions. For any interval $I$, we define the local relations $\cU(I)$ to be the subcomplex of $\cF_1(I)$
\begin{equation*}
\cU(I) = \DirectSum_{\cJ} \ker\left(f_\cJ : \Tensor_{J \in \cJ} \cC_{l(J),r(J)} \to \cC_{l(I),r(I)} \right),
\end{equation*}
that is, the kernel of the composition map for $\cC$.

\todo{explain why this satisfies the axioms}

We now give two motivating examples, as theorems constructing other homological systems of fields,


\begin{thm}
For a fixed target space $X$, `chains of maps to $X$' is a homological system of fields $\Xi$, defined as
\begin{equation*}
\Xi(M) = \CM{M}{X}.
\end{equation*}
\end{thm}

\begin{thm}
Given an $n$-dimensional system of fields $\cF$, and a $k$-manifold $F$, there is an $n-k$ dimensional homological system of fields $\cF^{\times F}$ defined by
\begin{equation*}
\cF^{\times F}(M) = \cB_*(M \times F, \cF).
\end{equation*}
\end{thm}
We might suggestively write $\cF^{\times F}$ as  $\cB_*(F \times [0,1]^b, \cF)$, interpreting this as an (undefined!) $A_\infty$ $b$-category, and then as the resulting homological system of fields, following a recipe analogous to that given above for $A_\infty$ $1$-categories.


In later sections, we'll prove the following two unsurprising theorems, about the (as-yet-undefined) blob homology of these homological systems of fields.


\begin{thm}
\begin{equation*}
\cB_*(M, \Xi) \iso \Xi(M)
\end{equation*}
\end{thm}

\begin{thm}[Product formula]
Given a $b$-manifold $B$, an $f$-manifold $F$ and a $b+f$ dimensional system of fields,
there is a quasi-isomorphism
\begin{align*}
\cB_*(B \times F, \cF) & \quismto \cB_*(B, \cF^{\times F})
\end{align*}
\end{thm}

\begin{question}
Is it possible to compute the blob homology of a non-trivial bundle in terms of the blob homology of its fiber?
\end{question}

\subsection{Blob homology}
The definition of blob homology for $(\cF, \cU)$ a homological system of fields and local relations is essentially the same as that given before in \S \ref{???}, except now there are some extra terms in the differential accounting for the `internal' differential acting on the fields.

As before
\begin{equation*}
	\cB_*^{\cF,\cU}(M) \deq \bigoplus_{\overline{B}} \bigoplus_{\overline{c}}
		\left( \otimes_j \cU(B_j; c_j)\right) \otimes \cF(M \setmin B^t; c^t)
\end{equation*}
with $\overline{B}$ running over configurations of blobs satisfying the usual conditions, and $\overline{c}$ running over all boundary conditions. This is a doubly-graded vector space, graded by blob degree (the number of blobs) and internal degree (the sum of the homological degrees of the tensor factor fields). It becomes a complex by taking the homological degree to the be the sum of the blob and internal degrees, and defining $d$ by

\begin{equation*}
d f = \sum_{v \in t} \partial_v f + \sum_{v' \in t \cup \{\star\}} d_{v'} f,
\end{equation*}


%We'll write $\cT$ for the set of finite rooted trees. We'll think of each such a rooted tree as a category, with vertices as objects  and each morphism set either empty or a singleton, with $v \to w$ if $w$ is closer to a root of the tree than $v$. We'll write $\hat{v}$ for the `parent' of a vertex $v$ if $v$ is not a root (that is, $\hat{v}$ is the unique vertex such that $v \to \hat{v}$ but there is no $w$ with $v \to w \to \hat{v}$. If $v$ is a root, we'll write $\hat{v}=\star$. Further, for each tree $t$, let's arbitrarily choose an orientation $\lambda_t$, that is, an alternating $\pm1$-valued function on orderings of the vertices.

%Given $v \in t$ there's a functor $\partial_v : t \to t \setminus \{v\}$ which removes the vertex $v$. Notice that removing a vertex naturally produces an orientation on $t \setminus \{v\}$ from the orientation on $t$, by $(\partial_v \lambda_t)(o) = \lambda_t(vo)$. This orientation may or may not agree with the chosen orientation of $t \setminus \{v\}$. We'll define $\sigma(v \in t) = \pm 1$ according to whether or not they agree. Notice that $$\sigma(v \in t) \sigma(w \in \partial_v t) = - \sigma(w \in t) \sigma(v \in \partial_w t).$$

%Let $\operatorname{balls}(M)$ denote the category of open balls in $M$ with inclusions. Given a tree $t \in \cT$ we'll call a functor $b : t \to \operatorname{balls}(M)$ such that if $b(v) \cap b(v') \neq \emptyset$) then either $v \to v'$ or $v' \to v$, \emph{non-intersecting}.\footnote{Equivalently, if $b(v)$ and $b(v')$ are spanned in $\operatorname{balls}(M)$, then $v$ and $v'$ are spanned in $t$. That is, if there exists some ball $B \subset M$ so $B \subset b(v)$ and $B \subset b(v')$, then there must exist some $v'' \in t$ so $v'' \to v$ and $v'' \to v'$. Because $t$ is a tree, this implies either $v \to v'$ or $v' \to v$} For each non-intersecting functor $b$ define  
%\begin{equation*}
%\cF(t,b) = \cF\left(M \setminus b(t)\right) \tensor \left(\Tensor_{\substack{v \in t \\ \text{$v$ not a leaf}}} \cF\left(b(v) \setminus b(v' \to v)\right)\right) \tensor \left(\Tensor_{\substack{v \in t \\ \text{$v$ a leaf}}} \cU\left(b(v)\right)\right)
%\end{equation*}
%and then the vector space
%\begin{equation*}
%\cB_*^{\cF,\cU}(M) = \DirectSum_{t \in \cT} \DirectSum_{\substack{\text{non-intersecting}\\\text{functors} \\ b: t \to \operatorname{balls}(M)}} \cF(t,b)
%\end{equation*}

The blob degree of an element of $\cF(t,b)$ is the number of vertices in $t$, and the internal degree is the sum of the homological degrees in the tensor factors.
The vector space $\cB_*^{\cF,\cU}(M)$ becomes a chain complex by taking the homological degree to be the sum of the blob and internal degrees, and defining $d$ on $\cF(t,b)$ by
\begin{equation*}
d f = \sum_{v \in t} \partial_v f + \sum_{v' \in t \cup \{\star\}} d_{v'} f,
\end{equation*}
where if $f \in \cF(t,b)$ is an elementary tensor of the form $f = f_\star \tensor \Tensor_{v \in t} f_v$ with
\begin{align*}
f_\star & \in \cF(M \setminus b(t)) && \\
f_v       & \in \cF(b(v) \setminus b(v' \to v)) && \text{if $v$ is not a leaf} \\
f_v       & \in \cU(b(v)) && \text{if $v$ is a leaf}
\end{align*}
the terms $\partial_v f$ are elementary tensors in $\cF(\partial_v t, \restrict{b}{\partial_v t})$ defined by
\begin{equation*}
(\partial_v f)_{v'} = \begin{cases} \sigma(v \in t) f_{\hat{v}} \circ f_v & \text{if $v' = \hat{v}$} \\ f_{v'} & \text{otherwise} \end{cases}
\end{equation*}
and the terms $d_v f$ are also elementary tensors in $\cF(t, b)$ defined by
\begin{equation*}
(d_v f)_{v'} = \begin{cases} (-1)^{\sum_{v \to v'} \deg f(v')} & \text{if $v'=v$} \\ f_v & \text{otherwise.} \end{cases}
\end{equation*}

We remark that if $\cF$ takes values in vector spaces, not chain complexes, then the $d_v$ terms vanish, and this coincides with our earlier definition of blob homomology for (non-homological) systems of fields.

\todo{We'll quickly check $d^2=0$.}

