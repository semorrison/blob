%!TEX root = ../blob1.tex

\section{Introduction}

We construct the ``blob complex'' $\bc_*(M; \cC)$ associated to an $n$-manifold $M$ and a ``linear $n$-category with strong duality'' $\cC$. This blob complex provides a simultaneous generalisation of several well-understood constructions:
\begin{itemize}
\item The vector space $H_0(\bc_*(M; \cC))$ is isomorphic to the usual topological quantum field theory invariant of $M$ associated to $\cC$. (See Property \ref{property:skein-modules} later in the introduction and \S \ref{sec:constructing-a-tqft}.)
\item When $n=1$ and $\cC$ is just a 1-category (e.g.\ an associative algebra), the blob complex $\bc_*(S^1; \cC)$ is quasi-isomorphic to the Hochschild complex $\HC_*(\cC)$. (See Property \ref{property:hochschild} and \S \ref{sec:hochschild}.)
\item When $\cC$ is the polynomial algebra $k[t]$, thought of as an n-category (see \S \ref{sec:comm_alg}), we have 
that $\bc_*(M; k[t])$ is homotopy equivalent to $C_*(\Sigma^\infty(M), k)$, the singular chains
on the configuration space of unlabeled points in $M$.
%$$H_*(\bc_*(M; k[t])) = H^{\text{sing}}_*(\Delta^\infty(M), k).$$ 
\end{itemize}
The blob complex definition is motivated by the desire for a derived analogue of the usual TQFT Hilbert space (replacing quotient of fields by local relations with some sort of resolution), 
and for a generalization of Hochschild homology to higher $n$-categories. We would also like to be able to talk about $\CM{M}{T}$ when $T$ is an $n$-category rather than a manifold. The blob complex gives us all of these! More detailed motivations are described in \S \ref{sec:motivations}.

The blob complex has good formal properties, summarized in \S \ref{sec:properties}. These include an action of $\CH{M}$, 
extending the usual $\Homeo(M)$ action on the TQFT space $H_0$ (see Property \ref{property:evaluation}) and a gluing formula allowing calculations by cutting manifolds into smaller parts (see Property \ref{property:gluing}).

We expect applications of the blob complex to contact topology and Khovanov homology but do not address these in this paper. See \S \ref{sec:future} for slightly more detail.

\subsubsection{Structure of the paper}
The three subsections of the introduction explain our motivations in defining the blob complex (see \S \ref{sec:motivations}), summarise the formal properties of the blob complex (see \S \ref{sec:properties}) and outline anticipated future directions and applications (see \S \ref{sec:future}).

The first part of the paper (sections \S \ref{sec:fields}---\S \ref{sec:evaluation}) gives the definition of the blob complex, and establishes some of its properties. There are many alternative definitions of $n$-categories, and part of our difficulty defining the blob complex is simply explaining what we mean by an ``$n$-category with strong duality'' as one of the inputs. At first we entirely avoid this problem by introducing the notion of a `system of fields', and define the blob complex associated to an $n$-manifold and an $n$-dimensional system of fields. We sketch the construction of a system of fields from a $1$-category or from a pivotal $2$-category.

Nevertheless, when we attempt to establish all of the observed properties of the blob complex, we find this situation unsatisfactory. Thus, in the second part of the paper (section \S \ref{sec:ncats}) we pause and give yet another definition of an $n$-category, or rather a definition of an $n$-category with strong duality. (It appears that removing the duality conditions from our definition would make it more complicated rather than less.) We call these ``topological $n$-categories'', to differentiate them from previous versions. Moreover, we find that we need analogous $A_\infty$ $n$-categories, and we define these as well following very similar axioms.

The basic idea is that each potential definition of an $n$-category makes a choice about the `shape' of morphisms. We try to be as lax as possible: a topological $n$-category associates a vector space to every $B$ homeomorphic to the $n$-ball. These vector spaces glue together associatively, and we require that there is an action of the homeomorphism group.
For an $A_\infty$ $n$-category, we associate a chain complex instead of a vector space to each such $B$ and ask that the action of homeomorphisms extends to a suitably defined action of the complex of singular chains of homeomorphisms. The axioms for an $A_\infty$ $n$-category are designed to capture two main examples: the blob complexes of $n$-balls labelled by a topological $n$-category, and the complex $\CM{-}{T}$ of maps to a fixed target space $T$.

In  \S \ref{sec:ainfblob} we explain how to construct a system of fields from a topological $n$-category, and give an alternative definition of the blob complex for an $A_\infty$ $n$-category on an $n$-manifold. Using these definitions, we show how to use the blob complex to `resolve' any topological $n$-category as an $A_\infty$ $n$-category, and relate the first and second definitions of the blob complex. We use the blob complex for $A_\infty$ $n$-categories to establish important properties of the blob complex (in both variants), in particular the `gluing formula' of Property \ref{property:gluing} below.

\nn{KW: the previous two paragraphs seem a little awkward to me, but I don't presently have a good idea for fixing them.}

Finally, later sections address other topics. Section \S \ref{sec:comm_alg} describes the blob complex when $\cC$ is a commutative algebra, thought of as a topological $n$-category, in terms of the topology of $M$. Section \S \ref{sec:deligne} states (and in a later edition of this paper, hopefully proves) a higher dimensional generalisation of the Deligne conjecture (that the little discs operad acts on Hochschild cohomology) in terms of the blob complex. The appendixes prove technical results about $\CH{M}$, and make connections between our definitions of $n$-categories and familar definitions for $n=1$ and $n=2$, as well as relating the $n=1$ case of our $A_\infty$ $n$-categories with usual $A_\infty$ algebras.


\nn{some more things to cover in the intro}
\begin{itemize}
\item related: we are being unsophisticated from a homotopy theory point of
view and using chain complexes in many places where we could get by with spaces
\item ? one of the points we make (far) below is that there is not really much
difference between (a) systems of fields and local relations and (b) $n$-cats;
thus we tend to switch between talking in terms of one or the other
\end{itemize}

\medskip\hrule\medskip

\subsection{Motivations}
\label{sec:motivations}

We will briefly sketch our original motivation for defining the blob complex.
\nn{this is adapted from an old draft of the intro; it needs further modification
in order to better integrate it into the current intro.}

As a starting point, consider TQFTs constructed via fields and local relations.
(See Section \ref{sec:tqftsviafields} or \cite{kw:tqft}.)
This gives a satisfactory treatment for semisimple TQFTs
(i.e.\ TQFTs for which the cylinder 1-category associated to an
$n{-}1$-manifold $Y$ is semisimple for all $Y$).

For non-semi-simple TQFTs, this approach is less satisfactory.
Our main motivating example (though we will not develop it in this paper)
is the (decapitated) $4{+}1$-dimensional TQFT associated to Khovanov homology.
It associates a bigraded vector space $A_{Kh}(W^4, L)$ to a 4-manifold $W$ together
with a link $L \subset \bd W$.
The original Khovanov homology of a link in $S^3$ is recovered as $A_{Kh}(B^4, L)$.

How would we go about computing $A_{Kh}(W^4, L)$?
For $A_{Kh}(B^4, L)$, the main tool is the exact triangle (long exact sequence)
relating resolutions of a crossing.
Unfortunately, the exactness breaks if we glue $B^4$ to itself and attempt
to compute $A_{Kh}(S^1\times B^3, L)$.
According to the gluing theorem for TQFTs-via-fields, gluing along $B^3 \subset \bd B^4$
corresponds to taking a coend (self tensor product) over the cylinder category
associated to $B^3$ (with appropriate boundary conditions).
The coend is not an exact functor, so the exactness of the triangle breaks.


The obvious solution to this problem is to replace the coend with its derived counterpart.
This presumably works fine for $S^1\times B^3$ (the answer being the Hochschild homology
of an appropriate bimodule), but for more complicated 4-manifolds this leaves much to be desired.
If we build our manifold up via a handle decomposition, the computation
would be a sequence of derived coends.
A different handle decomposition of the same manifold would yield a different
sequence of derived coends.
To show that our definition in terms of derived coends is well-defined, we
would need to show that the above two sequences of derived coends yield the same answer.
This is probably not easy to do.

Instead, we would prefer a definition for a derived version of $A_{Kh}(W^4, L)$
which is manifestly invariant.
(That is, a definition that does not
involve choosing a decomposition of $W$.
After all, one of the virtues of our starting point --- TQFTs via field and local relations ---
is that it has just this sort of manifest invariance.)

The solution is to replace $A_{Kh}(W^4, L)$, which is a quotient
\[
 \text{linear combinations of fields} \;\big/\; \text{local relations} ,
\]
with an appropriately free resolution (the ``blob complex")
\[
	\cdots\to \bc_2(W, L) \to \bc_1(W, L) \to \bc_0(W, L) .
\]
Here $\bc_0$ is linear combinations of fields on $W$,
$\bc_1$ is linear combinations of local relations on $W$,
$\bc_2$ is linear combinations of relations amongst relations on $W$,
and so on.

None of the above ideas depend on the details of the Khovanov homology example,
so we develop the general theory in this paper and postpone specific applications
to later papers.



\subsection{Formal properties}
\label{sec:properties}
We now summarize the results of the paper in the following list of formal properties.

\begin{property}[Functoriality]
\label{property:functoriality}%
The blob complex is functorial with respect to homeomorphisms. That is, 
for a fixed $n$-dimensional system of fields $\cC$, the association
\begin{equation*}
X \mapsto \bc_*^{\cC}(X)
\end{equation*}
is a functor from $n$-manifolds and homeomorphisms between them to chain complexes and isomorphisms between them.
\end{property}
As a consequence, there is an action of $\Homeo(X)$ on the chain complex $\bc_*^\cC(X)$; this action is extended to all of $C_*(\Homeo(X))$ in Property \ref{property:evaluation} below.

The blob complex is also functorial with respect to $\cC$, although we will not address this in detail here. \todo{exact w.r.t $\cC$?}

\begin{property}[Disjoint union]
\label{property:disjoint-union}
The blob complex of a disjoint union is naturally the tensor product of the blob complexes.
\begin{equation*}
\bc_*(X_1 \du X_2) \iso \bc_*(X_1) \tensor \bc_*(X_2)
\end{equation*}
\end{property}

If an $n$-manifold $X_\text{cut}$ contains $Y \sqcup Y^\text{op}$ as a codimension $0$ submanifold of its boundary, write $X_\text{glued} = X_\text{cut} \bigcup_{Y}\selfarrow$ for the manifold obtained by gluing together $Y$ and $Y^\text{op}$. Note that this includes the case of gluing two disjoint manifolds together.
\begin{property}[Gluing map]
\label{property:gluing-map}%
%If $X_1$ and $X_2$ are $n$-manifolds, with $Y$ a codimension $0$-submanifold of $\bdy X_1$, and $Y^{\text{op}}$ a codimension $0$-submanifold of $\bdy X_2$, there is a chain map
%\begin{equation*}
%\gl_Y: \bc_*(X_1) \tensor \bc_*(X_2) \to \bc_*(X_1 \cup_Y X_2).
%\end{equation*}
Given a gluing $X_\mathrm{cut} \to X_\mathrm{glued}$, there is
a natural map
\[
	\bc_*(X_\mathrm{cut}) \to \bc_*(X_\mathrm{glued}) 
\]
(natural with respect to homeomorphisms, and also associative with respect to iterated gluings).
\end{property}

\begin{property}[Contractibility]
\label{property:contractibility}%
With field coefficients, the blob complex on an $n$-ball is contractible in the sense that it is homotopic to its $0$-th homology. Moreover, the $0$-th homology of balls can be canonically identified with the vector spaces associated by the system of fields $\cC$ to balls.
\begin{equation}
\xymatrix{\bc_*^{\cC}(B^n) \ar[r]^(0.4){\iso}_(0.4){\text{qi}} & H_0(\bc_*^{\cC}(B^n)) \ar[r]^(0.6)\iso & \cC(B^n)}
\end{equation}
\end{property}

\begin{property}[Skein modules]
\label{property:skein-modules}%
The $0$-th blob homology of $X$ is the usual 
(dual) TQFT Hilbert space (a.k.a.\ skein module) associated to $X$
by $\cC$. (See \S \ref{sec:local-relations}.)
\begin{equation*}
H_0(\bc_*^{\cC}(X)) \iso A^{\cC}(X)
\end{equation*}
\end{property}

\begin{property}[Hochschild homology when $X=S^1$]
\label{property:hochschild}%
The blob complex for a $1$-category $\cC$ on the circle is
quasi-isomorphic to the Hochschild complex.
\begin{equation*}
\xymatrix{\bc_*^{\cC}(S^1) \ar[r]^(0.4){\iso}_(0.4){\text{qi}} & \HC_*(\cC).}
\end{equation*}
\end{property}

In the following $\CH{X}$ is the singular chain complex of the space of homeomorphisms of $X$, fixed on $\bdy X$.
\begin{property}[$C_*(\Homeo(-))$ action]
\label{property:evaluation}%
There is a chain map
\begin{equation*}
\ev_X: \CH{X} \tensor \bc_*(X) \to \bc_*(X).
\end{equation*}

Restricted to $C_0(\Homeo(X))$ this is just the action of homeomorphisms described in Property \ref{property:functoriality}. 
\nn{should probably say something about associativity here (or not?)}

For
any codimension $0$-submanifold $Y \sqcup Y^\text{op} \subset \bdy X$ the following diagram
(using the gluing maps described in Property \ref{property:gluing-map}) commutes.
\begin{equation*}
\xymatrix@C+2cm{
     \CH{X \bigcup_Y \selfarrow} \otimes \bc_*(X \bigcup_Y \selfarrow) \ar[r]^<<<<<<<<<<<<{\ev_{(X \bigcup_Y \scalebox{0.5}{\selfarrow})}}    & \bc_*(X \bigcup_Y \selfarrow) \\
     \CH{X} \otimes \bc_*(X)
        \ar[r]_{\ev_{X}}  \ar[u]^{\gl^{\Homeo}_Y \otimes \gl_Y}  &
            \bc_*(X) \ar[u]_{\gl_Y}
}
\end{equation*}

\nn{unique up to homotopy?}
\end{property}

Since the blob complex is functorial in the manifold $X$, we can use this to build a chain map
$$ev_{X \to Y} : \CH{X \to Y} \tensor \bc_*(X) \to \bc_*(Y)$$
satisfying corresponding conditions.

In \S \ref{sec:ncats} we introduce the notion of topological $n$-categories, from which we can construct systems of fields. Below, we talk about the blob complex associated to a topological $n$-category, implicitly passing to the system of fields. Further, in \S \ref{sec:ncats} we also have the notion of an $A_\infty$ $n$-category.

\begin{property}[Blob complexes of (products with) balls form an $A_\infty$ $n$-category]
\label{property:blobs-ainfty}
Let $\cC$ be  a topological $n$-category.  Let $Y$ be an $n{-}k$-manifold. 
There is an $A_\infty$ $k$-category $A_*(Y, \cC)$, defined on each $m$-ball $D$, for $0 \leq m < k$, to be the set $$A_*(Y,\cC)(D) = A^\cC(Y \times D)$$ and on $k$-balls $D$ to be the set $$A_*(Y, \cC)(D) = \bc_*(Y \times D, \cC).$$ (When $m=k$ the subsets with fixed boundary conditions form a chain complex.) These sets have the structure of an $A_\infty$ $k$-category, with compositions coming from the gluing map in Property \ref{property:gluing-map} and with the action of families of homeomorphisms given in Property \ref{property:evaluation}.
\end{property}
\begin{rem}
Perhaps the most interesting case is when $Y$ is just a point; then we have a way of building an $A_\infty$ $n$-category from a topological $n$-category. We think of this $A_\infty$ $n$-category as a free resolution.
\end{rem}

There is a version of the blob complex for $\cC$ an $A_\infty$ $n$-category
instead of a topological $n$-category; this is described in \S \ref{sec:ainfblob}.

\begin{property}[Product formula]
\label{property:product}
Let $W$ be a $k$-manifold and $Y$ be an $n-k$ manifold. Let $\cC$ be an $n$-category.
Let $A_*(Y,\cC)$ be the $A_\infty$ $k$-category associated to $Y$ via blob homology (see Property \ref{property:blobs-ainfty}).
Then
\[
	\bc_*(Y\times W, \cC) \simeq \bc_*(W, A_*(Y,\cC)) .
\]
Note on the right hand side we have the version of the blob complex for $A_\infty$ $n$-categories.
\end{property}
It seems reasonable to expect a generalization describing an arbitrary fibre bundle. See in particular \S \ref{moddecss} for the framework for such a statement.

\begin{property}[Gluing formula]
\label{property:gluing}%
\mbox{}% <-- gets the indenting right
\begin{itemize}
\item For any $(n-1)$-manifold $Y$, the blob complex of $Y \times I$ is
naturally an $A_\infty$ category. % We'll write $\bc_*(Y)$ for $\bc_*(Y \times I)$ below.

\item For any $n$-manifold $X$, with $Y$ a codimension $0$-submanifold of its boundary, the blob complex of $X$ is naturally an
$A_\infty$ module for $\bc_*(Y \times I)$.

\item For any $n$-manifold $X_\text{glued} = X_\text{cut} \bigcup_Y \selfarrow$, the blob complex $\bc_*(X_\text{glued})$ is the $A_\infty$ self-tensor product of
$\bc_*(X_\text{cut})$ as an $\bc_*(Y \times I)$-bimodule:
\begin{equation*}
\bc_*(X_\text{glued}) \simeq \bc_*(X_\text{cut}) \Tensor^{A_\infty}_{\mathclap{\bc_*(Y \times I)}} \selfarrow
\end{equation*}
\end{itemize}
\end{property}

Finally, we state two more properties, which we will not prove in this paper.
\nn{revise this; expect that we will prove these in the paper}

\begin{property}[Mapping spaces]
Let $\pi^\infty_{\le n}(T)$ denote the $A_\infty$ $n$-category based on maps 
$B^n \to T$.
(The case $n=1$ is the usual $A_\infty$-category of paths in $T$.)
Then 
$$\bc_*(X, \pi^\infty_{\le n}(T)) \simeq \CM{X}{T}.$$
\end{property}

This says that we can recover the (homotopic) space of maps to $T$ via blob homology from local data.

\begin{property}[Higher dimensional Deligne conjecture]
\label{property:deligne}
The singular chains of the $n$-dimensional fat graph operad act on blob cochains.
\end{property}
See \S \ref{sec:deligne} for an explanation of the terms appearing here. The proof will appear elsewhere.

Properties \ref{property:functoriality}, \ref{property:gluing-map} and \ref{property:skein-modules} will be immediate from the definition given in
\S \ref{sec:blob-definition}, and we'll recall them at the appropriate points there. \todo{Make sure this gets done.}
Properties \ref{property:disjoint-union} and \ref{property:contractibility} are established in \S \ref{sec:basic-properties}.
Property \ref{property:hochschild} is established in \S \ref{sec:hochschild}, Property \ref{property:evaluation} in \S \ref{sec:evaluation}, Property \ref{property:blobs-ainfty} as Example \ref{ex:blob-complexes-of-balls} in \S \ref{sec:ncats},
and Properties \ref{property:product} and \ref{property:gluing} in \S \ref{sec:ainfblob} as consequences of Theorem \ref{product_thm}.

\subsection{Future directions}
\label{sec:future}
Throughout, we have resisted the temptation to work in the greatest generality possible (don't worry, it wasn't that hard). 
In most of the places where we say ``set" or ``vector space", any symmetric monoidal category would do. We could presumably also replace many of our chain complexes with topological spaces (or indeed, work at the generality of model categories), and likely it will prove useful to think about the connections between what we do here and $(\infty,k)$-categories.
More could be said about finite characteristic (there appears in be $2$-torsion in $\bc_1(S^2, \cC)$ for any spherical $2$-category $\cC$, for example). Much more could be said about other types of manifolds, in particular oriented, $\operatorname{Spin}$ and $\operatorname{Pin}^{\pm}$ manifolds, where boundary issues become more complicated. (We'd recommend thinking about boundaries as germs, rather than just codimension $1$ manifolds.) We've also take the path of least resistance by considering $\operatorname{PL}$ manifolds; there may be some differences for topological manifolds and smooth manifolds.

Many results in Hochschild homology can be understood `topologically' via the blob complex. For example, we expect that the shuffle product on the Hochschild homology of a commutative algebra $A$ simply corresponds to the gluing operation on $\bc_*(S^1 \times [0,1], A)$, but haven't investigated the details.

Most importantly, however, \nn{applications!} \nn{cyclic homology, $n=2$ cases, contact, Kh}


\subsection{Thanks and acknowledgements}
We'd like to thank David Ben-Zvi, Kevin Costello, 
Michael Freedman, Vaughan Jones, Justin Roberts, Chris Schommer-Pries, Peter Teichner \nn{and who else?} for many interesting and useful conversations. 
During this work, Kevin Walker has been at Microsoft Station Q, and Scott Morrison has been at Microsoft Station Q and the Miller Institute for Basic Research at UC Berkeley.


\medskip\hrule\medskip

Still to do:
\begin{itemize}
\item say something about starting with semisimple n-cat (trivial?? not trivial?)
\item Mention somewhere \cite{MR1624157} ``Skein homology''; it's not directly related, but has similar motivations.
\end{itemize}

