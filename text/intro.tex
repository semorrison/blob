%!TEX root = ../blob1.tex

\section{Introduction}

We construct the ``blob complex'' $\bc_*(M; \cC)$ associated to an $n$-manifold $M$ and a ``linear $n$-category with strong duality'' $\cC$. This blob complex provides a simultaneous generalisation of several well-understood constructions:
\begin{itemize}
\item The vector space $H_0(\bc_*(M; \cC))$ is isomorphic to the usual topological quantum field theory invariant of $M$ associated to $\cC$. (See \S \ref{sec:fields} \nn{more specific}.)
\item When $n=1$, $\cC$ is just an associative algebroid, and $\bc_*(S^1; \cC)$ is quasi-isomorphic to the Hochschild complex $\HC_*(\cC)$. (See \S \ref{sec:hochschild}.)
\item When $\cC = k[t]$, thought of as an n-category, we have $$H_*(\bc_*(M; k[t])) = H^{\text{sing}}_*(\Delta^\infty(M), k).$$ (See \S \ref{sec:comm_alg}.)
\end{itemize}
The blob complex has good formal properties, summarized in \S \ref{sec:properties}. These include an action of $\CD{M}$, extending the usual $\Diff(M)$ action on the TQFT space $H_0$ (see Property \ref{property:evaluation}) and a `gluing formula' allowing calculations by cutting manifolds into smaller parts (see Property \ref{property:gluing}).

The blob complex definition is motivated by \nn{ continue here ...} give multiple motivations/viewpoints for blob complex: (1) derived cat
version of TQFT Hilbert space; (2) generalization of Hochschild homology to higher $n$-cats;
(3) ? sort-of-obvious colimit type construction;
(4) ? a generalization of $C_*(\Maps(M, T))$ to the case where $T$ is
a category rather than a manifold

We expect applications of the blob complex to \nn{ ... } but do not address these in this paper.
\nn{hope to apply to Kh, contact, (other examples?) in the future}


\subsubsection{Structure of the paper}

The first part of the paper (sections \S \ref{sec:fields}---\S \ref{sec:evaluation}) gives the definition of the blob complex, and establishes some of its properties. There are many alternative definitions of $n$-categories, and part of our difficulty defining the blob complex is simply explaining what we mean by an ``$n$-category with strong duality'' as one of the inputs. At first we entirely avoid this problem by introducing the notion of a `system of fields', and define the blob complex associated to an $n$-manifold and an $n$-dimensional system of fields. We sketch the construction of a system of fields from a $1$-category or from a pivotal $2$-category.

Nevertheless, when we attempt to establish all of the observed properties of the blob complex, we find this situation unsatisfactory. Thus, in the second part of the paper (section \S \ref{sec:ncats}) we pause and give yet another definition of an $n$-category, or rather a definition of an $n$-category with strong duality. (It's not clear that we could remove the duality conditions from our definition, even if we wanted to.) We call these ``topological $n$-categories'', to differentiate them from previous versions. Moreover, we find that we need analogous $A_\infty$ $n$-categories, and we define these as well following very similar axioms. When $n=1$ these reduce to the usual $A_\infty$ categories.

In the third part of the paper (section \S \ref{sec:ainfblob}) we explain how to construct a system of fields from a topological $n$-category, and give an alternative definition of the blob complex for an $n$-manifold and an $A_\infty$ $n$-category. Using these definitions, we show how to use the blob complex to `resolve' any topological $n$-category as an $A_\infty$ $n$-category, and relate the first and second definitions of the blob complex. We use the blob complex for $A_\infty$ $n$-categories to establish important properties of the blob complex (in both variants), in particular the `gluing formula' of Property \ref{property:gluing} below.


[some things to cover in the intro]
\begin{itemize}
\item explain relation between old and new blob complex definitions
\item overview of sections
\item ?? we have resisted the temptation 
(actually, it was not a temptation) to state things in the greatest
generality possible
\item related: we are being unsophisticated from a homotopy theory point of
view and using chain complexes in many places where we could be by with spaces
\item ? one of the points we make (far) below is that there is not really much
difference between (a) systems of fields and local relations and (b) $n$-cats;
thus we tend to switch between talking in terms of one or the other
\end{itemize}

\medskip\hrule\medskip

[Old outline for intro]
\begin{itemize}
\item Starting point: TQFTs via fields and local relations.
This gives a satisfactory treatment for semisimple TQFTs
(i.e.\ TQFTs for which the cylinder 1-category associated to an
$n{-}1$-manifold $Y$ is semisimple for all $Y$).
\item For non-semiemple TQFTs, this approach is less satisfactory.
Our main motivating example (though we will not develop it in this paper)
is the $4{+}1$-dimensional TQFT associated to Khovanov homology.
It associates a bigraded vector space $A_{Kh}(W^4, L)$ to a 4-manifold $W$ together
with a link $L \subset \bd W$.
The original Khovanov homology of a link in $S^3$ is recovered as $A_{Kh}(B^4, L)$.
\item How would we go about computing $A_{Kh}(W^4, L)$?
For $A_{Kh}(B^4, L)$, the main tool is the exact triangle (long exact sequence)
\nn{... $L_1, L_2, L_3$}.
Unfortunately, the exactness breaks if we glue $B^4$ to itself and attempt
to compute $A_{Kh}(S^1\times B^3, L)$.
According to the gluing theorem for TQFTs-via-fields, gluing along $B^3 \subset \bd B^4$
corresponds to taking a coend (self tensor product) over the cylinder category
associated to $B^3$ (with appropriate boundary conditions).
The coend is not an exact functor, so the exactness of the triangle breaks.
\item The obvious solution to this problem is to replace the coend with its derived counterpart.
This presumably works fine for $S^1\times B^3$ (the answer being the Hochschild homology
of an appropriate bimodule), but for more complicated 4-manifolds this leaves much to be desired.
If we build our manifold up via a handle decomposition, the computation
would be a sequence of derived coends.
A different handle decomposition of the same manifold would yield a different
sequence of derived coends.
To show that our definition in terms of derived coends is well-defined, we
would need to show that the above two sequences of derived coends yield the same answer.
This is probably not easy to do.
\item Instead, we would prefer a definition for a derived version of $A_{Kh}(W^4, L)$
which is manifestly invariant.
(That is, a definition that does not
involve choosing a decomposition of $W$.
After all, one of the virtues of our starting point --- TQFTs via field and local relations ---
is that it has just this sort of manifest invariance.)
\item The solution is to replace $A_{Kh}(W^4, L)$, which is a quotient
\[
 \text{linear combinations of fields} \;\big/\; \text{local relations} ,
\]
with an appropriately free resolution (the ``blob complex")
\[
	\cdots\to \bc_2(W, L) \to \bc_1(W, L) \to \bc_0(W, L) .
\]
Here $\bc_0$ is linear combinations of fields on $W$,
$\bc_1$ is linear combinations of local relations on $W$,
$\bc_2$ is linear combinations of relations amongst relations on $W$,
and so on.
\item None of the above ideas depend on the details of the Khovanov homology example,
so we develop the general theory in the paper and postpone specific applications
to later papers.
\item The blob complex enjoys the following nice properties \nn{...}
\end{itemize}

\bigskip
\hrule
\bigskip

\subsection{Formal properties}
\label{sec:properties}
We then show that blob homology enjoys the following properties.

\begin{property}[Functoriality]
\label{property:functoriality}%
The blob complex is functorial with respect to homeomorphisms. That is, 
for fixed $n$-category / fields $\cC$, the association
\begin{equation*}
X \mapsto \bc_*^{\cC}(X)
\end{equation*}
is a functor from $n$-manifolds and homeomorphisms between them to chain complexes and isomorphisms between them.
\end{property}

The blob complex is also functorial with respect to $\cC$, although we will not address this in detail here.

\begin{property}[Disjoint union]
\label{property:disjoint-union}
The blob complex of a disjoint union is naturally the tensor product of the blob complexes.
\begin{equation*}
\bc_*(X_1 \du X_2) \iso \bc_*(X_1) \tensor \bc_*(X_2)
\end{equation*}
\end{property}

If an $n$-manifold $X_\text{cut}$ contains $Y \sqcup Y^\text{op}$ as a codimension $0$-submanifold of its boundary, write $X_\text{glued} = X_\text{cut} \bigcup_{Y}\selfarrow$ for the manifold obtained by gluing together $Y$ and $Y^\text{op}$. Note that this includes the case of gluing two disjoint manifolds together.
\begin{property}[Gluing map]
\label{property:gluing-map}%
%If $X_1$ and $X_2$ are $n$-manifolds, with $Y$ a codimension $0$-submanifold of $\bdy X_1$, and $Y^{\text{op}}$ a codimension $0$-submanifold of $\bdy X_2$, there is a chain map
%\begin{equation*}
%\gl_Y: \bc_*(X_1) \tensor \bc_*(X_2) \to \bc_*(X_1 \cup_Y X_2).
%\end{equation*}
Given a gluing $X_\mathrm{cut} \to X_\mathrm{glued}$, there is
a natural map
\[
	\bc_*(X_\mathrm{cut}) \to \bc_*(X_\mathrm{glued}) .
\]
(Natural with respect to homeomorphisms, and also associative with respect to iterated gluings.)
\end{property}

\begin{property}[Contractibility]
\label{property:contractibility}%
\todo{Err, requires a splitting?}
The blob complex on an $n$-ball is contractible in the sense that it is quasi-isomorphic to its $0$-th homology. Moreover, the $0$-th homology of balls can be canonically identified with the original $n$-category $\cC$.
\begin{equation}
\xymatrix{\bc_*^{\cC}(B^n) \ar[r]^{\iso}_{\text{qi}} & H_0(\bc_*^{\cC}(B^n))}
\end{equation}
\end{property}

\begin{property}[Skein modules]
\label{property:skein-modules}%
The $0$-th blob homology of $X$ is the usual 
(dual) TQFT Hilbert space (a.k.a.\ skein module) associated to $X$
by $\cC$. (See \S \ref{sec:local-relations}.)
\begin{equation*}
H_0(\bc_*^{\cC}(X)) \iso A^{\cC}(X)
\end{equation*}
\end{property}

\begin{property}[Hochschild homology when $X=S^1$]
\label{property:hochschild}%
The blob complex for a $1$-category $\cC$ on the circle is
quasi-isomorphic to the Hochschild complex.
\begin{equation*}
\xymatrix{\bc_*^{\cC}(S^1) \ar[r]^{\iso}_{\text{qi}} & \HC_*(\cC)}
\end{equation*}
\end{property}

Here $\CD{X}$ is the singular chain complex of the space of diffeomorphisms of $X$, fixed on $\bdy X$.
\begin{property}[$C_*(\Diff(-))$ action]
\label{property:evaluation}%
There is a chain map
\begin{equation*}
\ev_X: \CD{X} \tensor \bc_*(X) \to \bc_*(X).
\end{equation*}

Restricted to $C_0(\Diff(X))$ this is just the action of diffeomorphisms described in Property \ref{property:functoriality}. Further, for
any codimension $1$-submanifold $Y \subset X$ dividing $X$ into $X_1 \cup_Y X_2$, the following diagram
(using the gluing maps described in Property \ref{property:gluing-map}) commutes.
\begin{equation*}
\xymatrix{
     \CD{X} \otimes \bc_*(X) \ar[r]^{\ev_X}    & \bc_*(X) \\
     \CD{X_1} \otimes \CD{X_2} \otimes \bc_*(X_1) \otimes \bc_*(X_2)
        \ar@/_4ex/[r]_{\ev_{X_1} \otimes \ev_{X_2}}  \ar[u]^{\gl^{\Diff}_Y \otimes \gl_Y}  &
            \bc_*(X_1) \otimes \bc_*(X_2) \ar[u]_{\gl_Y}
}
\end{equation*}
\nn{should probably say something about associativity here (or not?)}
\nn{maybe do self-gluing instead of 2 pieces case:}
Further, for
any codimension $0$-submanifold $Y \sqcup Y^\text{op} \subset \bdy X$ the following diagram
(using the gluing maps described in Property \ref{property:gluing-map}) commutes.
\begin{equation*}
\xymatrix@C+2cm{
     \CD{X \bigcup_Y \selfarrow} \otimes \bc_*(X \bigcup_Y \selfarrow) \ar[r]^<<<<<<<<<<<<{\ev_{(X \bigcup_Y \scalebox{0.5}{\selfarrow})}}    & \bc_*(X \bigcup_Y \selfarrow) \\
     \CD{X} \otimes \bc_*(X)
        \ar[r]_{\ev_{X}}  \ar[u]^{\gl^{\Diff}_Y \otimes \gl_Y}  &
            \bc_*(X) \ar[u]_{\gl_Y}
}
\end{equation*}
\end{property}

There is a version of the blob complex for $\cC$ an $A_\infty$ $n$-category
instead of a garden variety $n$-category; this is described in \S \ref{sec:ainfblob}.

\begin{property}[Product formula]
Let $M^n = Y^{n-k}\times W^k$ and let $\cC$ be an $n$-category.
Let $A_*(Y)$ be the $A_\infty$ $k$-category associated to $Y$ via blob homology, which associates to each $k$-ball $D$ the complex $A_*(Y)(D) = \bc_*(Y \times D, \cC)$.
Then
\[
	\bc_*(Y^{n-k}\times W^k, \cC) \simeq \bc_*(W, A_*(Y)) .
\]
Note on the right here we have the version of the blob complex for $A_\infty$ $n$-categories.
\nn{say something about general fiber bundles?}
\end{property}

\begin{property}[Gluing formula]
\label{property:gluing}%
\mbox{}% <-- gets the indenting right
\begin{itemize}
\item For any $(n-1)$-manifold $Y$, the blob homology of $Y \times I$ is
naturally an $A_\infty$ category. % We'll write $\bc_*(Y)$ for $\bc_*(Y \times I)$ below.

\item For any $n$-manifold $X$, with $Y$ a codimension $0$-submanifold of its boundary, the blob homology of $X$ is naturally an
$A_\infty$ module for $\bc_*(Y \times I)$.

\item For any $n$-manifold $X_\text{glued} = X_\text{cut} \bigcup_Y \selfarrow$, the blob complex $\bc_*(X_\text{glued})$ is the $A_\infty$ self-tensor product of
$\bc_*(X_\text{cut})$ as an $\bc_*(Y \times I)$-bimodule.
\begin{equation*}
\bc_*(X_\text{glued}) \simeq \bc_*(X_\text{cut}) \Tensor^{A_\infty}_{\mathclap{\bc_*(Y \times I)}} \selfarrow
\end{equation*}
\end{itemize}
\end{property}



\begin{property}[Mapping spaces]
Let $\pi^\infty_{\le n}(W)$ denote the $A_\infty$ $n$-category based on maps 
$B^n \to W$.
(The case $n=1$ is the usual $A_\infty$ category of paths in $W$.)
Then 
$$\bc_*(M, \pi^\infty_{\le n}(W) \simeq \CM{M}{W}.$$
\end{property}

\begin{property}[Higher dimensional Deligne conjecture]
The singular chains of the $n$-dimensional fat graph operad act on blob cochains.
\end{property}
\begin{rem}
The $n$-dimensional fat graph operad can be thought of as a sequence of general surgeries
of $n$-manifolds
$R_i \cup A_i \leadsto R_i \cup B_i$ together with mapping cylinders of diffeomorphisms
$f_i: R_i\cup B_i \to R_{i+1}\cup A_{i+1}$.
(Note that the suboperad where $A_i$, $B_i$ and $R_i\cup A_i$ are all diffeomorphic to 
the $n$-ball is equivalent to the little $n{+}1$-disks operad.)
If $A$ and $B$ are $n$-manifolds sharing the same boundary, we define
the blob cochains $\bc^*(A, B)$ (analogous to Hochschild cohomology) to be
$A_\infty$ maps from $\bc_*(A)$ to $\bc_*(B)$, where we think of both
collections of complexes as modules over the $A_\infty$ category associated to $\bd A = \bd B$.
The ``holes" in the above 
$n$-dimensional fat graph operad are labeled by $\bc^*(A_i, B_i)$.
\end{rem}







Properties \ref{property:functoriality}, \ref{property:gluing-map} and \ref{property:skein-modules} will be immediate from the definition given in
\S \ref{sec:blob-definition}, and we'll recall them at the appropriate points there. \todo{Make sure this gets done.}
Properties \ref{property:disjoint-union} and \ref{property:contractibility} are established in \S \ref{sec:basic-properties}.
Property \ref{property:hochschild} is established in \S \ref{sec:hochschild}, Property \ref{property:evaluation} in \S \ref{sec:evaluation},
and Property \ref{property:gluing} in \S \ref{sec:gluing}.
\nn{need to say where the remaining properties are proved.}