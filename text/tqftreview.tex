%!TEX root = ../blob1.tex

\section{TQFTs via fields}
\label{sec:fields}
\label{sec:tqftsviafields}

In this section we review the notion of a ``system of fields and local relations".
For more details see \cite{kw:tqft}.
From a system of fields and local relations we can readily construct TQFT invariants of manifolds.
This is described in \S \ref{sec:constructing-a-tqft}.
A system of fields is very closely related to an $n$-category.
In Example \ref{ex:traditional-n-categories(fields)}, which runs throughout this section, 
we sketch the construction of a system of fields from an $n$-category.
We make this more precise for $n=1$ or $2$ in \S \ref{sec:example:traditional-n-categories(fields)}, 
and much later, after we've have given our own definition of a `topological $n$-category' in \S \ref{sec:ncats}, 
we explain precisely how to go back and forth between a topological $n$-category and a system of fields and local relations.

We only consider compact manifolds, so if $Y \sub X$ is a closed codimension 0
submanifold of $X$, then $X \setmin Y$ implicitly means the closure
$\overline{X \setmin Y}$.


\subsection{Systems of fields}

Let $\cM_k$ denote the category with objects 
unoriented PL manifolds of dimension
$k$ and morphisms homeomorphisms.
(We could equally well work with a different category of manifolds ---
oriented, topological, smooth, spin, etc. --- but for definiteness we
will stick with unoriented PL.)

Fix a symmetric monoidal category $\cS$.
While reading the definition, you should just think about the cases $\cS = \Set$ or $\cS = \Vect$.
The presentation here requires that the objects of $\cS$ have an underlying set, but this could probably be avoided if desired.

A $n$-dimensional {\it system of fields} in $\cS$
is a collection of functors $\cC_k : \cM_k \to \Set$ for $0 \leq k \leq n$
together with some additional data and satisfying some additional conditions, all specified below.

Before finishing the definition of fields, we give two motivating examples of systems of fields.

\begin{example}
\label{ex:maps-to-a-space(fields)}
Fix a target space $T$, and let $\cC(X)$ be the set of continuous maps
from $X$ to $T$.
\end{example}

\begin{example}
\label{ex:traditional-n-categories(fields)}
Fix an $n$-category $C$, and let $\cC(X)$ be 
the set of sub-cell-complexes of $X$ with codimension-$j$ cells labeled by
$j$-morphisms of $C$.
One can think of such sub-cell-complexes as dual to pasting diagrams for $C$.
This is described in more detail in \S \ref{sec:example:traditional-n-categories(fields)}.
\end{example}

Now for the rest of the definition of system of fields.
(Readers desiring a more precise definition should refer to Subsection \ref{ss:n-cat-def}
and replace $k$-balls with $k$-manifolds.)
\begin{enumerate}
\item There are boundary restriction maps $\cC_k(X) \to \cC_{k-1}(\bd X)$, 
and these maps comprise a natural
transformation between the functors $\cC_k$ and $\cC_{k-1}\circ\bd$.
For $c \in \cC_{k-1}(\bd X)$, we will denote by $\cC_k(X; c)$ the subset of 
$\cC(X)$ which restricts to $c$.
In this context, we will call $c$ a boundary condition.
\item The subset $\cC_n(X;c)$ of top fields with a given boundary condition is an object in our symmetric monoidal category $\cS$.
(This condition is of course trivial when $\cS = \Set$.) If the objects are sets with extra structure (e.g. $\cS = \Vect$ or $\Kom$), 
then this extra structure is considered part of the definition of $\cC_n$.
Any maps mentioned below between top level fields must be morphisms in $\cS$.
\item $\cC_k$ is compatible with the symmetric monoidal
structures on $\cM_k$, $\Set$ and $\cS$: $\cC_k(X \du W) \cong \cC_k(X)\times \cC_k(W)$,
compatibly with homeomorphisms and restriction to boundary.
We will call the projections $\cC(X_1 \du X_2) \to \cC(X_i)$
restriction maps.
\item Gluing without corners.
Let $\bd X = Y \du Y \du W$, where $Y$ and $W$ are closed $k{-}1$-manifolds.
Let $X\sgl$ denote $X$ glued to itself along the two copies of $Y$.
Using the boundary restriction and disjoint union
maps, we get two maps $\cC_k(X) \to \cC(Y)$, corresponding to the two
copies of $Y$ in $\bd X$.
Let $\Eq_Y(\cC_k(X))$ denote the equalizer of these two maps.
Then (here's the axiom/definition part) there is an injective ``gluing" map
\[
	\Eq_Y(\cC_k(X)) \hookrightarrow \cC_k(X\sgl) ,
\]
and this gluing map is compatible with all of the above structure (actions
of homeomorphisms, boundary restrictions, disjoint union).
Furthermore, up to homeomorphisms of $X\sgl$ isotopic to the identity,
the gluing map is surjective.
We say that fields on $X\sgl$ in the image of the gluing map
are transverse to $Y$ or splittable along $Y$.
\item Gluing with corners.
Let $\bd X = Y \cup Y \cup W$, where the two copies of $Y$ and 
$W$ might intersect along their boundaries.
Let $X\sgl$ denote $X$ glued to itself along the two copies of $Y$.
Note that $\bd X\sgl = W\sgl$, where $W\sgl$ denotes $W$ glued to itself
(without corners) along two copies of $\bd Y$.
Let $c\sgl \in \cC_{k-1}(W\sgl)$ be a be a splittable field on $W\sgl$ and let
$c \in \cC_{k-1}(W)$ be the cut open version of $c\sgl$.
Let $\cC^c_k(X)$ denote the subset of $\cC(X)$ which restricts to $c$ on $W$.
(This restriction map uses the gluing without corners map above.)
Using the boundary restriction, gluing without corners, and (in one case) orientation reversal
maps, we get two maps $\cC^c_k(X) \to \cC(Y)$, corresponding to the two
copies of $Y$ in $\bd X$.
Let $\Eq^c_Y(\cC_k(X))$ denote the equalizer of these two maps.
Then (here's the axiom/definition part) there is an injective ``gluing" map
\[
	\Eq^c_Y(\cC_k(X)) \hookrightarrow \cC_k(X\sgl, c\sgl) ,
\]
and this gluing map is compatible with all of the above structure (actions
of homeomorphisms, boundary restrictions, orientation reversal, disjoint union).
Furthermore, up to homeomorphisms of $X\sgl$ isotopic to the identity,
the gluing map is surjective.
We say that fields in the image of the gluing map
are transverse to $Y$ or splittable along $Y$.
\item There are maps $\cC_{k-1}(Y) \to \cC_k(Y \times I)$, denoted
$c \mapsto c\times I$.
These maps comprise a natural transformation of functors, and commute appropriately
with all the structure maps above (disjoint union, boundary restriction, etc.).
Furthermore, if $f: Y\times I \to Y\times I$ is a fiber-preserving homeomorphism
covering $\bar{f}:Y\to Y$, then $f(c\times I) = \bar{f}(c)\times I$.
\end{enumerate}

There are two notations we commonly use for gluing.
One is 
\[
	x\sgl \deq \gl(x) \in \cC(X\sgl) , 
\]
for $x\in\cC(X)$.
The other is
\[
	x_1\bullet x_2 \deq \gl(x_1\otimes x_2) \in \cC(X\sgl) , 
\]
in the case that $X = X_1 \du X_2$, with $x_i \in \cC(X_i)$.

\medskip

Using the functoriality and $\cdot\times I$ properties above, together
with boundary collar homeomorphisms of manifolds, we can define the notion of 
{\it extended isotopy}.
Let $M$ be an $n$-manifold and $Y \subset \bd M$ be a codimension zero submanifold
of $\bd M$.
Let $x \in \cC(M)$ be a field on $M$ and such that $\bd x$ is splittable along $\bd Y$.
Let $c$ be $x$ restricted to $Y$.
Let $M \cup (Y\times I)$ denote $M$ glued to $Y\times I$ along $Y$.
Then we have the glued field $x \bullet (c\times I)$ on $M \cup (Y\times I)$.
Let $f: M \cup (Y\times I) \to M$ be a collaring homeomorphism.
Then we say that $x$ is {\it extended isotopic} to $f(x \bullet (c\times I))$.
More generally, we define extended isotopy to be the equivalence relation on fields
on $M$ generated by isotopy plus all instance of the above construction
(for all appropriate $Y$ and $x$).

\nn{the following discussion of linearizing fields is kind of lame.
maybe just assume things are already linearized.}

\nn{remark that if top dimensional fields are not already linear
then we will soon linearize them(?)}

For top dimensional ($n$-dimensional) manifolds, we're actually interested
in the linearized space of fields.
By default, define $\lf(X) = \c[\cC(X)]$; that is, $\lf(X)$ is
the vector space of finite
linear combinations of fields on $X$.
If $X$ has boundary, we of course fix a boundary condition: $\lf(X; a) = \c[\cC(X; a)]$.
Thus the restriction (to boundary) maps are well defined because we never
take linear combinations of fields with differing boundary conditions.

In some cases we don't linearize the default way; instead we take the
spaces $\lf(X; a)$ to be part of the data for the system of fields.
In particular, for fields based on linear $n$-category pictures we linearize as follows.
Define $\lf(X; a) = \c[\cC(X; a)]/K$, where $K$ is the space generated by
obvious relations on 0-cell labels.
More specifically, let $L$ be a cell decomposition of $X$
and let $p$ be a 0-cell of $L$.
Let $\alpha_c$ and $\alpha_d$ be two labelings of $L$ which are identical except that
$\alpha_c$ labels $p$ by $c$ and $\alpha_d$ labels $p$ by $d$.
Then the subspace $K$ is generated by things of the form
$\lambda \alpha_c + \alpha_d - \alpha_{\lambda c + d}$, where we leave it to the reader
to infer the meaning of $\alpha_{\lambda c + d}$.
Note that we are still assuming that $n$-categories have linear spaces of $n$-morphisms.

\nn{Maybe comment further: if there's a natural basis of morphisms, then no need;
will do something similar below; in general, whenever a label lives in a linear
space we do something like this; ? say something about tensor
product of all the linear label spaces?  Yes:}

For top dimensional ($n$-dimensional) manifolds, we linearize as follows.
Define an ``almost-field" to be a field without labels on the 0-cells.
(Recall that 0-cells are labeled by $n$-morphisms.)
To each unlabeled 0-cell in an almost field there corresponds a (linear) $n$-morphism
space determined by the labeling of the link of the 0-cell.
(If the 0-cell were labeled, the label would live in this space.)
We associate to each almost-labeling the tensor product of these spaces (one for each 0-cell).
We now define $\lf(X; a)$ to be the direct sum over all almost labelings of the
above tensor products.


\subsection{Systems of fields from $n$-categories}
\label{sec:example:traditional-n-categories(fields)}
We now describe in more detail Example \ref{ex:traditional-n-categories(fields)}, 
systems of fields coming from sub-cell-complexes labeled
by $n$-category morphisms.

Given an $n$-category $C$ with the right sort of duality
(e.g. a pivotal 2-category, *-1-category),
we can construct a system of fields as follows.
Roughly speaking, $\cC(X)$ will the set of all embedded cell complexes in $X$
with codimension $i$ cells labeled by $i$-morphisms of $C$.
We'll spell this out for $n=1,2$ and then describe the general case.

If $X$ has boundary, we require that the cell decompositions are in general
position with respect to the boundary --- the boundary intersects each cell
transversely, so cells meeting the boundary are mere half-cells.
Put another way, the cell decompositions we consider are dual to standard cell
decompositions of $X$.

We will always assume that our $n$-categories have linear $n$-morphisms.

For $n=1$, a field on a 0-manifold $P$ is a labeling of each point of $P$ with
an object (0-morphism) of the 1-category $C$.
A field on a 1-manifold $S$ consists of
\begin{itemize}
    \item a cell decomposition of $S$ (equivalently, a finite collection
of points in the interior of $S$);
    \item a labeling of each 1-cell (and each half 1-cell adjacent to $\bd S$)
by an object (0-morphism) of $C$;
    \item a transverse orientation of each 0-cell, thought of as a choice of
``domain" and ``range" for the two adjacent 1-cells; and
    \item a labeling of each 0-cell by a morphism (1-morphism) of $C$, with
domain and range determined by the transverse orientation and the labelings of the 1-cells.
\end{itemize}

If $C$ is an algebra (i.e. if $C$ has only one 0-morphism) we can ignore the labels
of 1-cells, so a field on a 1-manifold $S$ is a finite collection of points in the
interior of $S$, each transversely oriented and each labeled by an element (1-morphism)
of the algebra.

\medskip

For $n=2$, fields are just the sort of pictures based on 2-categories (e.g.\ tensor categories)
that are common in the literature.
We describe these carefully here.

A field on a 0-manifold $P$ is a labeling of each point of $P$ with
an object of the 2-category $C$.
A field of a 1-manifold is defined as in the $n=1$ case, using the 0- and 1-morphisms of $C$.
A field on a 2-manifold $Y$ consists of
\begin{itemize}
    \item a cell decomposition of $Y$ (equivalently, a graph embedded in $Y$ such
that each component of the complement is homeomorphic to a disk);
    \item a labeling of each 2-cell (and each partial 2-cell adjacent to $\bd Y$)
by a 0-morphism of $C$;
    \item a transverse orientation of each 1-cell, thought of as a choice of
``domain" and ``range" for the two adjacent 2-cells;
    \item a labeling of each 1-cell by a 1-morphism of $C$, with
domain and range determined by the transverse orientation of the 1-cell
and the labelings of the 2-cells;
    \item for each 0-cell, a homeomorphism of the boundary $R$ of a small neighborhood
of the 0-cell to $S^1$ such that the intersections of the 1-cells with $R$ are not mapped
to $\pm 1 \in S^1$; and
    \item a labeling of each 0-cell by a 2-morphism of $C$, with domain and range
determined by the labelings of the 1-cells and the parameterizations of the previous
bullet.
\end{itemize}
\nn{need to say this better; don't try to fit everything into the bulleted list}

For general $n$, a field on a $k$-manifold $X^k$ consists of
\begin{itemize}
    \item A cell decomposition of $X$;
    \item an explicit general position homeomorphism from the link of each $j$-cell
to the boundary of the standard $(k-j)$-dimensional bihedron; and
    \item a labeling of each $j$-cell by a $(k-j)$-dimensional morphism of $C$, with
domain and range determined by the labelings of the link of $j$-cell.
\end{itemize}

%\nn{next definition might need some work; I think linearity relations should
%be treated differently (segregated) from other local relations, but I'm not sure
%the next definition is the best way to do it}

\medskip




\subsection{Local relations}
\label{sec:local-relations}
Local relations are certain subspaces of the fields on balls, which form an ideal under gluing.
Again, we give the examples first.

\addtocounter{prop}{-2}
\begin{example}[contd.]
For maps into spaces, $U(B; c)$ is generated by fields of the form $a-b \in \lf(B; c)$,
where $a$ and $b$ are maps (fields) which are homotopic rel boundary.
\end{example}

\begin{example}[contd.]
For $n$-category pictures, $U(B; c)$ is equal to the kernel of the evaluation map
$\lf(B; c) \to \mor(c', c'')$, where $(c', c'')$ is some (any) division of $c$ into
domain and range.
\end{example}

These motivate the following definition.

\begin{defn}
A {\it local relation} is a collection subspaces $U(B; c) \sub \lf(B; c)$,
for all $n$-manifolds $B$ which are
homeomorphic to the standard $n$-ball and all $c \in \cC(\bd B)$, 
satisfying the following properties.
\begin{enumerate}
\item functoriality: 
$f(U(B; c)) = U(B', f(c))$ for all homeomorphisms $f: B \to B'$
\item local relations imply extended isotopy: 
if $x, y \in \cC(B; c)$ and $x$ is extended isotopic 
to $y$, then $x-y \in U(B; c)$.
\item ideal with respect to gluing:
if $B = B' \cup B''$, $x\in U(B')$, and $c\in \cC(B'')$, then $x\bullet r \in U(B)$
\end{enumerate}
\end{defn}
See \cite{kw:tqft} for further details.


\subsection{Constructing a TQFT}
\label{sec:constructing-a-tqft}

In this subsection we briefly review the construction of a TQFT from a system of fields and local relations.
(For more details, see \cite{kw:tqft}.)

Let $W$ be an $n{+}1$-manifold.
We can think of the path integral $Z(W)$ as assigning to each
boundary condition $x\in \cC(\bd W)$ a complex number $Z(W)(x)$.
In other words, $Z(W)$ lies in $\c^{\lf(\bd W)}$, the vector space of linear
maps $\lf(\bd W)\to \c$.

The locality of the TQFT implies that $Z(W)$ in fact lies in a subspace
$Z(\bd W) \sub \c^{\lf(\bd W)}$ defined by local projections.
The linear dual to this subspace, $A(\bd W) = Z(\bd W)^*$,
can be thought of as finite linear combinations of fields modulo local relations.
(In other words, $A(\bd W)$ is a sort of generalized skein module.)
This is the motivation behind the definition of fields and local relations above.

In more detail, let $X$ be an $n$-manifold.
%To harmonize notation with the next section, 
%let $\bc_0(X)$ be the vector space of finite linear combinations of fields on $X$, so
%$\bc_0(X) = \lf(X)$.
\begin{defn}
\label{defn:TQFT-invariant}
The TQFT invariant of $X$ associated to a system of fields $\cF$ and local relations $\cU$ is 
	$$A(X) \deq \lf(X) / U(X),$$
where $\cU(X) \sub \lf(X)$ to be the space of local relations in $\lf(X)$;
$\cU(X)$ is generated by things of the form $u\bullet r$, where
$u\in \cU(B)$ for some embedded $n$-ball $B\sub X$ and $r\in \cC(X\setmin B)$.
\end{defn}
(The blob complex, defined in the next section, 
is in some sense the derived version of $A(X)$.)
If $X$ has boundary we can similarly define $A(X; c)$ for each 
boundary condition $c\in\cC(\bd X)$.

The above construction can be extended to higher codimensions, assigning
a $k$-category $A(Y)$ to an $n{-}k$-manifold $Y$, for $0 \le k \le n$.
These invariants fit together via actions and gluing formulas.
We describe only the case $k=1$ below.
(The construction of the $n{+}1$-dimensional part of the theory (the path integral) 
requires that the starting data (fields and local relations) satisfy additional
conditions.
We do not assume these conditions here, so when we say ``TQFT" we mean a decapitated TQFT
that lacks its $n{+}1$-dimensional part.)

Let $Y$ be an $n{-}1$-manifold.
Define a (linear) 1-category $A(Y)$ as follows.
The objects of $A(Y)$ are $\cC(Y)$.
The morphisms from $a$ to $b$ are $A(Y\times I; a, b)$, 
where $a$ and $b$ label the two boundary components of the cylinder $Y\times I$.
Composition is given by gluing of cylinders.

Let $X$ be an $n$-manifold with boundary and consider the collection of vector spaces
$A(X; \cdot) \deq \{A(X; c)\}$ where $c$ ranges through $\cC(\bd X)$.
This collection of vector spaces affords a representation of the category $A(\bd X)$, where
the action is given by gluing a collar $\bd X\times I$ to $X$.

Given a splitting $X = X_1 \cup_Y X_2$ of a closed $n$-manifold $X$ along an $n{-}1$-manifold $Y$,
we have left and right actions of $A(Y)$ on $A(X_1; \cdot)$ and $A(X_2; \cdot)$.
The gluing theorem for $n$-manifolds states that there is a natural isomorphism
\[
	A(X) \cong A(X_1; \cdot) \otimes_{A(Y)} A(X_2; \cdot) .
\]

